- en: Chapter 6. Supplemental Case Study
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章 补充案例研究
- en: Now, it's time to apply our newly learned principles to a completely different
    theme. We upgrade from cars to planes, covering a simple airline system.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，是时候将我们新学的原则应用到一个完全不同的主题上了。我们从汽车升级到飞机，涉及一个简单的航空公司系统。
- en: This chapter's case study does not pretend to encompass the full collection
    of data from real airline—it's only a sample. Nonetheless, we'll see that the
    principles we learned previously can be applied to build and refine a correct
    and coherent data structure.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的案例研究并不试图涵盖真实航空公司的全部数据集合——它仅是一个样本。尽管如此，我们将看到之前学到的原则可以应用于构建和完善一个正确且连贯的数据结构。
- en: Normally, each airline has its own information system. We assume here that we
    have got the mandate to build an information system that encompasses many airlines.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，每家航空公司都有自己的信息系统。我们在此假设已获得授权，构建一个涵盖多家航空公司的信息系统。
- en: Results from the Document Gathering Phase
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 文档收集阶段的结果
- en: After reviewing the airline system's current website, a booking agent's website,
    some electronic tickets, and boarding passes, we gather a large amount of information.
    We'll first express this information with sentences which present the system and
    data exchange on a rather high level. Each sentence is followed by a list of the
    data elements which we can deduce from it. An element can be present in more than
    one sentence. Refer to the *Tables and Sample Values* section for more details
    about each data element. There are also some notes that will help us in the naming
    and grouping phase.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在审查了航空公司当前的网站、预订代理的网站、一些电子机票和登机牌后，我们收集了大量信息。我们将首先用句子表达这些信息，这些句子从较高层面介绍了系统和数据交换。每个句子后面都列出了我们可以从中推断出的数据元素。一个元素可能出现在多个句子中。有关每个数据元素的更多详细信息，请参阅*表格和示例值*部分。还有一些注释将帮助我们在命名和分组阶段。
- en: Flight 456 of Air Quebec leaves Montreal-Trudeau airport at 22:45 on October
    2nd, 2007 heading for Paris's Charles de Gaulle.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 魁北克航空的456号航班于2007年10月2日22:45从蒙特利尔-特鲁多机场起飞，前往巴黎的戴高乐机场。
- en: 'The following are the data elements that can be obtained from the above sentence:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是可从上述句子中获取的数据元素：
- en: flight_number
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: flight_number
- en: airline_name
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: airline_name
- en: airport_name
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: airport_name
- en: flight_departure_moment
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: flight_departure_moment
- en: Note
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: We need to indicate whether the airport is for departure or arrival.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要指明机场是用于出发还是到达。
- en: The airport code for Montreal-Trudeau is YUL and the one for Charles de Gaulle
    is CDG.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 蒙特利尔-特鲁多机场的代码是YUL，戴高乐机场的代码是CDG。
- en: 'The data element obtained from the above sentence is:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 上述句子中获取的数据元素是：
- en: airport_code
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: airport_code
- en: Note
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Should we use the airport_code as a primary key? Maybe not, due to space considerations.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我们是否应将airport_code作为主键？可能不行，考虑到空间因素。
- en: This flight is scheduled to land at 11:30 the day after (local time).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 该航班计划于次日11:30（当地时间）降落。
- en: 'The data element obtained is:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 获取的数据元素是：
- en: flight_arrival_moment
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: flight_arrival_moment
- en: Note
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Do we need to split the date and time into two fields? Probably not, to benefit
    from date and time calculations functions (how many hours and minutes takes a
    flight, taking the date into account).
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 我们是否需要将日期和时间拆分为两个字段？可能不必，以便利用日期和时间计算功能（考虑日期的情况下，飞行需要多少小时和分钟）。
- en: An aircraft model APM-300 from Fontax services this flight.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 一架来自Fontax的APM-300飞机服务于本次航班。
- en: 'The data elements obtained from above sentence are:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 上述句子中获取的数据元素包括：
- en: plane_model
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: plane_model
- en: plane_brand
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: plane_brand
- en: Note
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Do we need to associate the plane model to a flight, but also to which specific
    plane. (There can be more than one APM-300.)
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我们是否需要将飞机型号与航班关联，同时也要关联到具体的哪一架飞机。（可能存在多架APM-300。）
- en: The pilot on this flight is Dan Murray and the flight attendant is Melanie Waters.
    Other crew members are to be confirmed.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 本次航班的飞行员是Dan Murray，乘务员是Melanie Waters。其他机组人员待确认。
- en: 'The data elements obtained from the above sentence are:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 上述句子中获取的数据元素包括：
- en: pilot_first_name
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: pilot_first_name
- en: pilot_last_name
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: pilot_last_name
- en: flight_attendant_first_name
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: flight_attendant_first_name
- en: flight_attendant_last_name
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: flight_attendant_last_name
- en: Note
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: We should generalize using the notion of a crew category.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应该使用机组类别这一概念进行泛化。
- en: Peter Smith buys a ticket for this flight from Fantastic Tour, Inc., a booking
    agency. The ticket number is 014 88417654\. This is a one-way ticket.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Peter Smith通过预订代理Fantastic Tour, Inc.购买了本次航班的机票，票号为014 88417654。这是一张单程票。
- en: 'The data elements obtained from the above sentence are:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 上述句子中获取的数据元素包括：
- en: passenger_first_name
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: passenger_first_name
- en: passenger_last_name
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 乘客姓氏
- en: booking_agency_name
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预订代理名称
- en: ticket_number
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机票号
- en: ticket_type
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机票类型
- en: Note
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: We'll also need a primary key for the passenger and probably for the booking
    agency if we don't use its code. Should the ticket itself be represented in a
    table, or will the ticket number be part of something more general like a reservation?
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还需要为乘客设定一个主键，如果不用其代码，可能还需要为预订代理设定一个主键。机票本身是否应在表中表示，还是机票号作为更通用的预订信息的一部分？
- en: For this flight, Mr. Smith is seated at 19A, located in the economy section
    of the plane.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 对于此航班，史密斯先生坐在19A座位，位于飞机的经济舱。
- en: 'The data elements obtained from the above sentence are:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述句子中获得的数据元素有：
- en: passenger_last_name
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 乘客姓氏
- en: seat_id
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 座位ID
- en: plane_section
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞机舱位
- en: Note
  id: totrans-52
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The sections available on a plane depend not only on the plane model but also
    on the airline.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 飞机上可用的舱位不仅取决于飞机型号，还取决于航空公司。
- en: This ticket is non-refundable.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 此机票不可退款。
- en: 'The data element obtained from the above sentence is:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述句子中获得的数据元素有：
- en: ticket_refundability
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机票退款性
- en: Flight 456 can be boarded at gate number 74, 35 minutes before takeoff.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 航班456可在起飞前35分钟于74号登机口登机。
- en: 'The data elements obtained from the above sentence are:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述句子中获得的数据元素有：
- en: flight_number
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 航班号
- en: gate_id
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 登机口ID
- en: boarding_time
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 登机时间
- en: In economy class, passengers are entitled to one bag inside the cabin and two
    registered bags—total weight 50 kg max. Mr Smith has one registered bag, bearing
    the tag AQ636-84763.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 经济舱乘客有权携带一件舱内行李和两件注册行李——总重不超过50公斤。史密斯先生有一件注册行李，标签号为AQ636-84763。
- en: 'The data elements obtained from the above sentence are:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述句子中获得的数据元素有：
- en: plane_section
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞机舱位
- en: max_number_in_cabin_bags
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最大舱内行李数
- en: max_number_registered_bags
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最大注册行李数
- en: max_weight_registered_bags_kg
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最大注册行李重量（公斤）
- en: tag_id
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标签ID
- en: Note
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: We have detected that "class" is a synonym for "section".
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 我们发现“class”是“section”的同义词。
- en: 'There are information screens in the airport that indicate the state of each
    flight: on time, boarding, delayed, or cancelled.'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 机场的信息屏幕显示每趟航班的状态：准时、登机、延误或取消。
- en: 'The data element obtained from the above sentence is:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述句子中获得的数据元素有：
- en: flight_status
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 航班状态
- en: Note
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Will need to be coded (id and description).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 需要编码（ID和描述）。
- en: Two meals are served on this flight. Air Quebec has arrangements with Montreal
    Chef Service for the preparation and delivery of food.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 此航班提供两餐。魁北克航空与蒙特利尔厨师服务公司合作准备和配送食物。
- en: 'The data elements obtained from the above sentence are:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述句子中获得的数据元素有：
- en: number_meals
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 餐食数量
- en: airline_name
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 航空公司名称
- en: meal_supplier
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 餐食供应商
- en: 'Air Quebec owns four Fontax APM-300 aircraft but aircraft #302 (code-named
    Charlie) is scheduled for repairs in October 2007.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 魁北克航空拥有四架Fontax APM-300飞机，但302号飞机（代号Charlie）计划于2007年10月进行维修。
- en: 'The data elements obtained from the above sentence are:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述句子中获得的数据元素有：
- en: airline_name
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 航空公司名称
- en: plane_brand
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞机品牌
- en: plane_model
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞机型号
- en: plane_id
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞机ID
- en: description
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述
- en: plane_event
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞机事件
- en: plane_event_start_moment
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞机事件开始时间
- en: plane_event_end_moment
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 飞机事件结束时间
- en: Note
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Each plane is affectionately nicknamed, the element for this will be "description".
    About the repairs, we generalize them with the concept of events, having a starting
    and ending moment.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 每架飞机都有一个亲切的昵称，此元素将被称为“描述”。关于维修，我们用事件的概念来概括，包括开始和结束的时刻。
- en: Passenger Smith can use the quick reference code A6BCUD and his last name to
    access his flight information on the airline web site.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 史密斯乘客可以使用快速参考代码A6BCUD及其姓氏在航空公司网站上访问其航班信息。
- en: 'The data elements obtained from the above sentence are:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 从上述句子中获得的数据元素有：
- en: passenger_last_name
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 乘客姓氏
- en: web_site_quick_reference
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站快速参考
- en: Preliminary List of Data Elements
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据元素初步列表
- en: We list here the data elements as they can be deduced from the document gathering
    phase. In many cases, they are not in a format already suitable for the final
    model because they are prefixed with a table name. For example, a data element
    identified as `pilot_last_name` will become the column `last_name` in the `pilot`
    table. Sample values and more detailed information about each data element appear
    in the next section.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在此列出从文档收集阶段推断出的数据元素。在许多情况下，它们并非已适合最终模型的格式，因为它们带有表名前缀。例如，标识为`pilot_last_name`的数据元素将成为`pilot`表中的列`last_name`。每个数据元素的示例值和更详细信息将在下一部分展示。
- en: '| Data elements |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| 数据元素 |'
- en: '| --- |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '| --- |'
- en: '| flight_departure_moment | seat_id |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: '| 航班起飞时间 | 座位ID |'
- en: '| flight_arrival_moment | plane_section |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '| 航班到达时间 | 飞机舱段 |'
- en: '| departure_airport_code | ticket_refundability |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| 出发机场代码 | 机票退款政策 |'
- en: '| arrival_airport_code | gate_id |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| 到达机场代码 | 登机口编号 |'
- en: '| airline_code | boarding_time |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| 航空公司代码 | 登机时间 |'
- en: '| airline_name | max_number_in_cabin_bags |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '| 航空公司名称 | 客舱内最大行李数 |'
- en: '| airport_name | max_number_registered_bags |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| 机场名称 | 最大注册行李数 |'
- en: '| plane_brand | max_weight_registered_bags_kg |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| 飞机品牌 | 最大注册行李重量（公斤） |'
- en: '| plane_model | tag_id |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| 飞机型号 | 标签编号 |'
- en: '| pilot_last_name | ticket_issued_on |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| 飞行员姓氏 | 机票发行日期 |'
- en: '| pilot_first_name | number_meals |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| 飞行员名字 | 餐食数量 |'
- en: '| flight_attendant_last_name | web_site_quick_reference |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| 空乘姓氏 | 网站快速参考 |'
- en: '| flight_attendant_first_name | meal_supplier |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| 空乘名字 | 餐食供应商 |'
- en: '| passenger_last_name | plane_id |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| 乘客姓氏 | 飞机编号 |'
- en: '| passenger_first_name | plane_event |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| 乘客名字 | 飞机活动 |'
- en: '| passenger_id | plane_event_start_moment |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| 乘客编号 | 飞机活动开始时间 |'
- en: '| booking_agency_name | plane_event_end_moment |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| 预订代理名称 | 飞机活动结束时间 |'
- en: '| ticket_number | flight_status |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| 机票号码 | 航班状态 |'
- en: Tables and Sample Values
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 表格与示例值
- en: To prepare the list of tables, we start with the physical objects or persons
    we can observe in the sentences built from the documents gathering phase. Then
    we have a look at all the elements and build new tables to accommodate them.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 为了准备表格列表，我们从文档收集阶段构建的句子中可以观察到的物理对象或人物开始。然后我们查看所有元素并构建新表格以容纳它们。
- en: In the following table descriptions, the table layout is followed by design
    comments when appropriate.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下表格描述中，表格布局后跟有适当的设计评论。
- en: Code Tables
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 代码表
- en: Usually the following tables are designed first because they are easier to model
    and they are needed for establishing the relations from more complex tables.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 通常首先设计以下表格，因为它们更容易建模，并且对于建立更复杂表格的关系是必需的。
- en: '| table: airport | column name | sample value |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| 表格：机场 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 1 |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 1 |'
- en: '|   | international_code | YUL |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '|   | 国际代码 | YUL |'
- en: '|   | description | Montreal-Trudeau |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | 蒙特利尔-特鲁多 |'
- en: The airport table could contain other columns like the address, phone, and website.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 机场表可能包含其他列，如地址、电话和网站。
- en: '| table: airline | column name | sample value |'
  id: totrans-130
  prefs: []
  type: TYPE_TB
  zh: '| 表格：航空公司 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-131
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 1 |'
  id: totrans-132
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 1 |'
- en: '|   | description | Air-Quebec |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | 魁北克航空 |'
- en: '| table: plane_brand | column name | sample value |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| 表格：飞机品牌 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 1 |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 1 |'
- en: '|   | description | Fontax |'
  id: totrans-137
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | Fontax |'
- en: We avoid naming this table as `brand` because it's a too generic name.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 我们避免将此表命名为`brand`，因为这是一个过于通用的名称。
- en: '| table: meal_supplier | column name | sample value |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| 表格：餐食供应商 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 9 |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 9 |'
- en: '|   | description | Montreal Chef Service |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | 蒙特利尔主厨服务 |'
- en: Again, this table could have more details about the agency, like phone and address.
    We could also merge this table with `meal_supplier` table by adding a code identifying
    the type of company, but it's not done in the present model.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，此表可能包含有关代理机构的更多详细信息，如电话和地址。我们还可以通过添加一个标识公司类型的代码将此表与`meal_supplier`表合并，但在当前模型中并未实现。
- en: '| table: ticket_type | column name | sample value |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '| 表格：机票类型 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 1 |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 1 |'
- en: '|   | description | one-way |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | 单程 |'
- en: '| table: crew_category | column name | sample value |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| 表格：机组类别 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 1 |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 1 |'
- en: '|   | description | Pilot |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | 飞行员 |'
- en: To avoid columns like `pilot_last_name, copilot_first_name`, we form a `crew_category`
    table. See also the related `flight_crew` table later in this chapter.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免列如`pilot_last_name, copilot_first_name`，我们创建了一个`crew_category`表。另请参阅本章稍后的相关`flight_crew`表。
- en: '| table: ticket_refundability | column name | sample value |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 表格：机票退款政策 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 1 |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 1 |'
- en: '|   | description | non-refundable |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | 不可退款 |'
- en: '| table: flight_status | column name | sample value |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| 表格：航班状态 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-158
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 1 |'
  id: totrans-159
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 1 |'
- en: '|   | description | boarding |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | 登机 |'
- en: If we need to include other types of events in the model, this `event` table
    will have to be renamed as something more precise like `plane_event`, and a new
    name will be needed for our current `plane_event` table that is used to associate
    an event with a plane.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们需要在模型中包含其他类型的事件，这个`事件`表将不得不更名为更精确的名称，如`飞机事件`，并且我们当前用于关联事件与飞机的`飞机事件`表也需要一个新的名称。
- en: Themed Tables
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主题表
- en: These tables are more comprehensive than the code tables. Each one refers to
    a specific theme that needs more columns than a simple code table.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 这些表比代码表更全面。每个表都涉及一个特定的主题，需要比简单的代码表更多的列。
- en: '| table: plane | column name | sample value |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| 表：飞机 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 302 |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '|   | *ID | 302 |'
- en: '|   | airline_id | 1 |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '|   | 航空公司ID | 1 |'
- en: '|   | brand_id | 1 |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '|   | 品牌ID | 1 |'
- en: '|   | model_id | 2 |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '|   | 机型ID | 2 |'
- en: '|   | description | Charlie |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '|   | 描述 | 查理 |'
- en: This table identifies which aircraft belongs to which airline, with the description
    being an internal means of describing this particular aircraft within the airline.
    Other fields like an aircraft serial number can be added here.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 此表标识了哪架飞机属于哪家航空公司，描述字段是航空公司内部用来描述该特定飞机的方式。其他字段，如飞机序列号，也可以添加到这里。
- en: '| table: crew | column name | sample value |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| 表：机组 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 9 |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '|   | *ID | 9 |'
- en: '|   | category_id | 1 |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '|   | 类别ID | 1 |'
- en: '|   | last_name | Murray |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '|   | 姓氏 | 默里 |'
- en: '|   | first_name | Dan |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '|   | 名字 | 丹 |'
- en: Passengers and crew members cannot be physically merged into one table even
    if they belong to the same flight because the set of columns used to describe
    a passenger diverges from the one associated to a crew member. We'll cover in
    the *Sample Queries* section how to produce a combined list of all persons on
    a plane.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 乘客和机组人员不能物理上合并到一个表中，即使他们属于同一航班，因为用来描述乘客的列集合与描述机组人员的列集合不同。我们将在*示例查询*部分介绍如何生成飞机上所有人员的合并列表。
- en: '| table: flight | column name | sample value |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| 表：航班 | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *id | 34 |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '|   | *ID | 34 |'
- en: '|   | airline_id | 1 |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '|   | 航空公司ID | 1 |'
- en: '|   | number | 456 |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '|   | 航班号 | 456 |'
- en: '|   | departure_moment | 2007-10-02 22:45 |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '|   | 出发时间 | 2007-10-02 22:45 |'
- en: '|   | arrival_moment | 2007-10-03 11:30 |'
  id: totrans-185
  prefs: []
  type: TYPE_TB
  zh: '|   | 到达时间 | 2007-10-03 11:30 |'
- en: '|   | departure_airport_id | 1 |'
  id: totrans-186
  prefs: []
  type: TYPE_TB
  zh: '|   | 出发机场ID | 1 |'
- en: '|   | arrival_airport_id | 2 |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '|   | 到达机场ID | 2 |'
- en: '|   | plane_id | 302 |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '|   | 飞机ID | 302 |'
- en: '|   | meal_supplier_id | 9 |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '|   | 餐食供应商ID | 9 |'
- en: '|   | number_meals | 2 |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '|   | 餐食数量 | 2 |'
- en: '|   | departure_gate | 74 |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '|   | 出发登机口 | 74 |'
- en: '|   | arrival_gate | B65 |'
  id: totrans-192
  prefs: []
  type: TYPE_TB
  zh: '|   | 到达登机口 | B65 |'
- en: '|   | boarding_moment | 2007-10-02 22:10 |'
  id: totrans-193
  prefs: []
  type: TYPE_TB
  zh: '|   | 登机时间 | 2007-10-02 22:10 |'
- en: '|   | status_id | 1 |'
  id: totrans-194
  prefs: []
  type: TYPE_TB
  zh: '|   | 状态ID | 1 |'
- en: The notion of flight is central to this system, thus we'll have a `flight` table.
    This means that we have to determine a primary key and, at first sight, the flight
    number would be a good candidate—but it's not and the reason for this is that
    the flight number is not painted on an aircraft; it's only a logical way of expressing
    the movement of a plane between two airports, and also the persons or companies
    related to this movement. We note that the flight number is kept short—three or
    four digits for improved reference on all printed matter and on airport information
    screens; thus, this flight number is only meaningful when accompanied by supplemental
    information, like the airline code (AQ) or company name, and a date.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 飞行概念是此系统的核心，因此我们将有一个`航班`表。这意味着我们必须确定一个主键，乍一看，航班号似乎是个好选择——但实际上并非如此，原因是航班号并未涂在飞机上；它仅是一种逻辑方式，用来表达飞机在两个机场之间的移动，以及与此移动相关的人员或公司。我们注意到，航班号保持简短——三或四位数字，以便在所有印刷品和机场信息屏幕上更好地参考；因此，航班号只有在伴随补充信息（如航空公司代码（AQ）或公司名称）和日期时才有意义。
- en: 'Keeping in mind that there will be other tables associated with this flight
    table, we have two choices here for the primary key:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到与该航班表关联的其他表，我们在这里有两种选择来确定主键：
- en: create a **surrogate key** (an artificial primary key whose value is not derived
    from other table's data)
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个**代理键**（一个人工主键，其值不由其他表的数据派生）
- en: use a combination of columns—airline_id, flight_number, departure_moment
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用列的组合——航空公司ID、航班号、出发时间
- en: It is better to create a surrogate key, `id`. This `id` will be propagated to
    the related tables in just one column, which could help to speed up retrieval
    times because there is just one field to compare between tables. Using the flight's
    `id` will also simplify the writing of queries. Of course we include the flight
    `number`—the information known to the public in the `flight` table but not as
    a primary key.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个代理键`id`会更好。这个`id`将仅通过一个列传播到相关表中，这有助于加快检索时间，因为只需在表之间比较一个字段。使用航班的`id`也将简化查询的编写。当然，我们在`flight`表中包含航班`number`——公众所知的信息，但不是作为主键。
- en: '| table: reservation | column name | sample value |'
  id: totrans-200
  prefs: []
  type: TYPE_TB
  zh: '| 表：reservation | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-201
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *flight_id | 34 |'
  id: totrans-202
  prefs: []
  type: TYPE_TB
  zh: '|   | *flight_id | 34 |'
- en: '|   | *passenger_id | 1302 |'
  id: totrans-203
  prefs: []
  type: TYPE_TB
  zh: '|   | *passenger_id | 1302 |'
- en: '|   | web_site_quick_reference | KARTYU |'
  id: totrans-204
  prefs: []
  type: TYPE_TB
  zh: '|   | web_site_quick_reference | KARTYU |'
- en: '|   | ticket_number | 014 88417654 |'
  id: totrans-205
  prefs: []
  type: TYPE_TB
  zh: '|   | ticket_number | 014 88417654 |'
- en: '|   | ticket_issued_moment | 2007-01-01 12:00 |'
  id: totrans-206
  prefs: []
  type: TYPE_TB
  zh: '|   | ticket_issued_moment | 2007-01-01 12:00 |'
- en: '|   | booking_agency_id | 1 |'
  id: totrans-207
  prefs: []
  type: TYPE_TB
  zh: '|   | booking_agency_id | 1 |'
- en: '|   | ticket_refundability_id | 1 |'
  id: totrans-208
  prefs: []
  type: TYPE_TB
  zh: '|   | ticket_refundability_id | 1 |'
- en: '|   | ticket_type_id | 1 |'
  id: totrans-209
  prefs: []
  type: TYPE_TB
  zh: '|   | ticket_type_id | 1 |'
- en: '|   | seat | 19A |'
  id: totrans-210
  prefs: []
  type: TYPE_TB
  zh: '|   | seat | 19A |'
- en: '|   | section_id | 2 |'
  id: totrans-211
  prefs: []
  type: TYPE_TB
  zh: '|   | section_id | 2 |'
- en: It would be a mistake to include columns such as `passenger1, passenger2` or
    `seat_1a, seat_1b` in the flights table. This is why we use the `reservation`
    table to hold passenger information related to a specific flight. This table could
    also be named `flight_passenger`.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 在航班表中包含诸如`passenger1, passenger2`或`seat_1a, seat_1b`之类的列将是一个错误。这就是为什么我们使用`reservation`表来保存与特定航班相关的乘客信息。此表也可以命名为`flight_passenger`。
- en: Normally we would not need the `section_id` in the `reservation` table, since
    we can refer to it via the `seat_id` but the `seat_id` may be unknown at the time
    of reservation, so seat assignment can be delayed until the boarding pass is issued.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 通常我们不需要在`reservation`表中包含`section_id`，因为我们可以通过`seat_id`引用它，但`seat_id`可能在预订时未知，因此座位分配可以延迟到登机牌发放时。
- en: Composite-Key Tables
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 复合键表
- en: These tables have more than one key because some key segments refer to a code
    or themed table.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 这些表具有多个键，因为某些键段指向代码或主题表。
- en: '| table: plane_brand_model | column name | sample value |'
  id: totrans-216
  prefs: []
  type: TYPE_TB
  zh: '| 表：plane_brand_model | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-217
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *brand_id | 1 |'
  id: totrans-218
  prefs: []
  type: TYPE_TB
  zh: '|   | *brand_id | 1 |'
- en: '|   | *id | 2 |'
  id: totrans-219
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 2 |'
- en: '|   | description | APM-300 |'
  id: totrans-220
  prefs: []
  type: TYPE_TB
  zh: '|   | description | APM-300 |'
- en: Here, the `brand_id` and a unique `id` form the primary keys for the plane model.
    We want to know to which brand this model refers, and still keep integers for
    the keys instead of using APM-300 as a key value.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，`brand_id`和唯一的`id`构成了飞机型号的主键。我们想知道此型号指的是哪个品牌，并且仍然使用整数作为键，而不是使用APM-300作为键值。
- en: '| table: plane_section | column name | sample value |'
  id: totrans-222
  prefs: []
  type: TYPE_TB
  zh: '| 表：plane_section | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-223
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *airline_id | 1 |'
  id: totrans-224
  prefs: []
  type: TYPE_TB
  zh: '|   | *airline_id | 1 |'
- en: '|   | *id | 1 |'
  id: totrans-225
  prefs: []
  type: TYPE_TB
  zh: '|   | *id | 1 |'
- en: '|   | description | economy |'
  id: totrans-226
  prefs: []
  type: TYPE_TB
  zh: '|   | description | 经济舱 |'
- en: Each airline can potentially describe the sections of their planes the way they
    want—some are using *hospitality* instead of *economy*.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 每家航空公司都可能以自己的方式描述飞机的舱段——有些使用*hospitality*而非*经济舱*。
- en: '| table: airline_brand_model_restriction | column name | sample value |'
  id: totrans-228
  prefs: []
  type: TYPE_TB
  zh: '| 表：airline_brand_model_restriction | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-229
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *airline_id | 1 |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '|   | *airline_id | 1 |'
- en: '|   | *brand_id | 1 |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '|   | *brand_id | 1 |'
- en: '|   | *model_id | 2 |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '|   | *model_id | 2 |'
- en: '|   | max_number_in_cabin_bags | 1 |'
  id: totrans-233
  prefs: []
  type: TYPE_TB
  zh: '|   | max_number_in_cabin_bags | 1 |'
- en: '|   | max_number_registered_bags | 2 |'
  id: totrans-234
  prefs: []
  type: TYPE_TB
  zh: '|   | max_number_registered_bags | 2 |'
- en: '|   | max_weight_registered_bags_kg | 50 |'
  id: totrans-235
  prefs: []
  type: TYPE_TB
  zh: '|   | max_weight_registered_bags_kg | 50 |'
- en: '| table: plane_section_seat | column name | sample value |'
  id: totrans-236
  prefs: []
  type: TYPE_TB
  zh: '| 表：plane_section_seat | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-237
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *airline_id | 1 |'
  id: totrans-238
  prefs: []
  type: TYPE_TB
  zh: '|   | *airline_id | 1 |'
- en: '|   | *brand_id | 1 |'
  id: totrans-239
  prefs: []
  type: TYPE_TB
  zh: '|   | *brand_id | 1 |'
- en: '|   | *model_id | 2 |'
  id: totrans-240
  prefs: []
  type: TYPE_TB
  zh: '|   | *model_id | 2 |'
- en: '|   | *section_id | 1 |'
  id: totrans-241
  prefs: []
  type: TYPE_TB
  zh: '|   | *section_id | 1 |'
- en: '|   | *seat | 19A |'
  id: totrans-242
  prefs: []
  type: TYPE_TB
  zh: '|   | *seat | 19A |'
- en: The `plane_section_seat` table describes which seats are located in a specific
    section of the aircraft. This is per airline, brand, model, and section, because
    different airlines could possess the same kind of aircraft but use different seat
    numbers or have a larger business section than others airlines. Also, in some
    cases, seats 1A and 1C may exist but 1B may not. Thus, we need this table to hold
    the complete list of existing seats.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '`plane_section_seat`表描述了特定飞机舱段中的座位位置。这是针对每家航空公司、品牌、型号和舱段的，因为不同的航空公司可能拥有相同类型的飞机，但使用不同的座位编号，或者商务舱比其他航空公司更大。此外，在某些情况下，可能存在座位1A和1C，但1B可能不存在。因此，我们需要此表来保存所有现有座位的完整列表。'
- en: '| table:flight_crew | column name | sample value |'
  id: totrans-244
  prefs: []
  type: TYPE_TB
  zh: '| 表：flight_crew | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-245
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *flight_id | 34 |'
  id: totrans-246
  prefs: []
  type: TYPE_TB
  zh: '|   | *flight_id | 34 |'
- en: '|   | *crew_id | 9 |'
  id: totrans-247
  prefs: []
  type: TYPE_TB
  zh: '|   | *crew_id | 9 |'
- en: 'With these sample values, we can deduce that Dan Murray is the pilot for flight
    456 of Air-Quebec. Another possible column in this table would be the status of
    this crew member for this flight: arrived on time, cancelled, or replaced.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这些示例值，我们可以推断出Dan Murray是Air-Quebec的456航班的飞行员。此表中的另一个可能列是该机组人员对该航班的状态：准时到达、取消或替换。
- en: '| table: plane_event | column name | sample value |'
  id: totrans-249
  prefs: []
  type: TYPE_TB
  zh: '| 表：plane_event | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-250
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *plane_id | 302 |'
  id: totrans-251
  prefs: []
  type: TYPE_TB
  zh: '|   | *plane_id | 302 |'
- en: '|   | *event_id | 1 |'
  id: totrans-252
  prefs: []
  type: TYPE_TB
  zh: '|   | *event_id | 1 |'
- en: '|   | *start_moment | 2008-10-01 |'
  id: totrans-253
  prefs: []
  type: TYPE_TB
  zh: '|   | *start_moment | 2008-10-01 |'
- en: '|   | end_moment | 2008-10-31 |'
  id: totrans-254
  prefs: []
  type: TYPE_TB
  zh: '|   | end_moment | 2008-10-31 |'
- en: '| table: reservation_registered_bags | column name | sample value |'
  id: totrans-255
  prefs: []
  type: TYPE_TB
  zh: '| 表：reservation_registered_bags | 列名 | 示例值 |'
- en: '| --- | --- | --- |'
  id: totrans-256
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '|   | *flight_id | 34 |'
  id: totrans-257
  prefs: []
  type: TYPE_TB
  zh: '|   | *flight_id | 34 |'
- en: '|   | *passenger_id | 1302 |'
  id: totrans-258
  prefs: []
  type: TYPE_TB
  zh: '|   | *passenger_id | 1302 |'
- en: '|   | *tag | AQ636-84763 |'
  id: totrans-259
  prefs: []
  type: TYPE_TB
  zh: '|   | *tag | AQ636-84763 |'
- en: Other columns for tag tracking could be added here.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 此处还可以添加用于标签追踪的其他列。
- en: Airline System Data Schema
  id: totrans-261
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 航空公司系统数据模式
- en: Here again we use phpMyAdmin's PDF schema feature to display the relations between
    tables and the keys involved.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 再次使用phpMyAdmin的PDF模式功能来显示表之间的关系和涉及的键。
- en: '![Airline System Data Schema](img/1302_06_01.jpg)'
  id: totrans-263
  prefs: []
  type: TYPE_IMG
  zh: '![航空公司系统数据模式](img/1302_06_01.jpg)'
- en: Sample Queries
  id: totrans-264
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 示例查询
- en: As a complement to the list of tables and the database schema, let's see our
    tables in action! We will enter sample values into the tables, and then build
    some SQL queries in order to pull the needed data.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 作为表格列表和数据库模式的补充，让我们看看我们的表格是如何运作的！我们将向表格中输入示例值，然后构建一些SQL查询以提取所需数据。
- en: Inserting Sample Values
  id: totrans-266
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 插入示例值
- en: We use the sample values described in the above list of tables. Please refer
    to this book's support site ([http://www.packtpub.com/support](http://www.packtpub.com/support))
    for the code download which contains the tables' definition and sample values.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用了上述表格列表中描述的示例值。请访问本书的支持网站([http://www.packtpub.com/support](http://www.packtpub.com/support))下载包含表格定义和示例值的代码。
- en: Boarding Pass
  id: totrans-268
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 登机牌
- en: 'A passenger can print his or her boarding pass while at home by using the website''s
    quick reference for his or her reservation, which is `KARTYU` in our example.
    Here is the generated query to retrieve the boarding pass information:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 乘客可以在家中通过网站的快速参考为其预订打印登机牌，在我们的例子中，该参考是`KARTYU`。以下是检索登机牌信息的生成查询：
- en: '[PRE0]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Executing this query retrieves these results:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 执行此查询会检索到以下结果：
- en: '![Boarding Pass](img/1302_06_02.jpg)'
  id: totrans-272
  prefs: []
  type: TYPE_IMG
  zh: '![登机牌](img/1302_06_02.jpg)'
- en: Passenger List
  id: totrans-273
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 乘客名单
- en: Here, the airline wants a list of passengers for a specific flight; we use `flight_id`,
    which is the primary key of the `flight` table, and not the flight number because
    flight numbers are not unique.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，航空公司需要一份特定航班的乘客名单；我们使用`flight_id`，即`flight`表的主键，而不是航班号，因为航班号并不唯一。
- en: '[PRE1]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Currently, this flight is not very popular, and it looks like Peter and Annie
    will be able to chat together:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，这个航班不是很受欢迎，看起来彼得和安妮将能够一起聊天：
- en: '![Passenger List](img/1302_06_03.jpg)'
  id: totrans-277
  prefs: []
  type: TYPE_IMG
  zh: '![乘客名单](img/1302_06_03.jpg)'
- en: All Persons on a Flight
  id: totrans-278
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 航班上的所有人员
- en: 'In the unlikely event of a plane crash, we might need to extract quickly the
    list of all persons on a flight. The following query does just that:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 在极不可能发生的飞机失事情况下，我们可能需要快速提取航班上所有人员的名单。以下查询正是为此目的：
- en: '[PRE2]'
  id: totrans-280
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The results are sorted by last name and first name; note the "type" column that
    indicates whether this person is a passenger or a crew member.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 结果按姓氏和名字排序；注意“类型”列，它指示此人是乘客还是机组人员。
- en: '![All Persons on a Flight](img/1302_06_04.jpg)'
  id: totrans-282
  prefs: []
  type: TYPE_IMG
  zh: '![航班上的所有人员](img/1302_06_04.jpg)'
- en: Summary
  id: totrans-283
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: From the study of a few documents about an airline system, we listed the possible
    data elements that become columns grouped into tables. We carefully chose the
    primary key or keys for each table and built relations between these tables, verifying
    that all potential data elements were included in at least one table.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 通过对航空公司系统的一些文档进行研究，我们列出了可能的数据元素，这些元素被分组为列并归入表中。我们仔细为每个表选择了主键或键，并建立了这些表之间的关系，确保所有潜在的数据元素至少包含在一个表中。
