["```go\nrs1:PRIMARY> rs.conf()\n{ // This is the replica set configuration document\n\n \"_id\" : \"rs1\",\n \"version\" : 4,\n \"members\" : [\n {\n \"_id\" : 0,\n \"host\" : \"172.17.0.2:27017\"\n },\n {\n \"_id\" : 1,\n \"host\" : \"172.17.0.3:27017\"\n },\n {\n \"_id\" : 2,\n \"host\" : \"172.17.0.4:27017\"\n }\n ]\n}\n\n```", "```go\nrs1:PRIMARY> cfg = rs.conf()\n{\n \"_id\" : \"rs1\",\n \"version\" : 4,\n \"members\" : [\n {\n \"_id\" : 0,\n \"host\" : \"172.17.0.7:27017\"\n },\n {\n \"_id\" : 1,\n \"host\" : \"172.17.0.5:27017\"\n },\n {\n \"_id\" : 2,\n \"host\" : \"172.17.0.6:27017\"\n }\n ]\n}\n\n```", "```go\nrs1:PRIMARY> cfg.members[0].tags = {\"media\": \"ssd\", \"application\": \"main\"}\nrs1:PRIMARY> cfg.members[1].tags = {\"media\": \"ssd\", \"application\": \"main\"}\nrs1:PRIMARY> cfg.members[2].tags = {\"media\": \"ssd\", \"application\": \"report\"}\n\n```", "```go\nrs1:PRIMARY> rs.reconfig(cfg)\n\n```", "```go\n{ \"ok\" : 1 }\n\n```", "```go\nrs1:PRIMARY> cfg = rs.conf()\n{\n \"_id\" : \"rs1\",\n \"version\" : 5,\n \"members\" : [\n {\n \"_id\" : 0,\n \"host\" : \"172.17.0.7:27017\",\n \"tags\" : {\n \"application\" : \"main\",\n \"media\" : \"ssd\"\n }\n },\n {\n \"_id\" : 1,\n \"host\" : \"172.17.0.5:27017\",\n \"tags\" : {\n \"application\" : \"main\",\n \"media\" : \"ssd\"\n }\n },\n {\n \"_id\" : 2,\n \"host\" : \"172.17.0.6:27017\",\n \"tags\" : {\n \"application\" : \"report\",\n \"media\" : \"ssd\"\n }\n }\n ]\n}\n\n```", "```go\n{\n \"_id\": ObjectId(\"54bf0d719a5bc523007bb78f\"),\n \"username\": \"customer1\",\n \"email\": \"customer1@customer.com\",\n \"password\": \"1185031ff57bfdaae7812dd705383c74\",\n \"followedSellers\": [\n \"seller3\",\n \"seller1\"\n ]\n}\n{\n \"_id\": ObjectId(\"54bf0d719a5bc523007bb790\"),\n \"username\": \"customer2\",\n \"email\": \"customer2@customer.com\",\n \"password\": \"6362e1832398e7d8e83d3582a3b0c1ef\",\n \"followedSellers\": [\n \"seller2\",\n \"seller4\"\n ]\n}\n{\n \"_id\": ObjectId(\"54bf0d719a5bc523007bb791\"),\n \"username\": \"customer3\",\n \"email\": \"customer3@customer.com\",\n \"password\": \"f2394e387b49e2fdda1b4c8a6c58ae4b\",\n \"followedSellers\": [\n \"seller2\",\n \"seller4\"\n ]\n}\n{\n \"_id\": ObjectId(\"54bf0d719a5bc523007bb792\"),\n \"username\": \"customer4\",\n \"email\": \"customer4@customer.com\",\n \"password\": \"10619c6751a0169653355bb92119822a\",\n \"followedSellers\": [\n \"seller1\",\n \"seller2\"\n ]\n}\n{\n \"_id\": ObjectId(\"54bf0d719a5bc523007bb793\"),\n \"username\": \"customer5\",\n \"email\": \"customer5@customer.com\",\n \"password\": \"30c25cf1d31cbccbd2d7f2100ffbc6b5\",\n \"followedSellers\": [\n \"seller2\",\n \"seller4\"\n ]\n}\n\n```", "```go\ndb.customers.find(\n {username: \"customer5\"}\n).readPref(\n {\n tags: [{application: \"report\", media: \"ssd\"}]\n }\n)\ndb.customers.find(\n {username: \"customer5\"}\n).readPref(\n {\n tags: [{application: \"main\", media: \"ssd\"}]\n }\n)\n\n```", "```go\nrs1:PRIMARY> cfg = rs.conf()\n\n```", "```go\nrs1:PRIMARY> cfg.members[0].tags = {\"media\": \"ssd\", \"application\": \"main\", \"datacenter\": \"A\"}\nrs1:PRIMARY> cfg.members[1].tags = {\"media\": \"ssd\", \"application\": \"main\", \"datacenter\": \"B\"}\nrs1:PRIMARY> cfg.members[2].tags = {\"media\": \"ssd\", \"application\": \"report\", \"datacenter\": \"A\"}\n\n```", "```go\nrs1:PRIMARY> rs.reconfig(cfg)\n\n```", "```go\n{ \"ok\" : 1 }\n\n```", "```go\nrs1:PRIMARY> rs.conf()\n{\n \"_id\" : \"rs1\",\n \"version\" : 6,\n \"members\" : [\n {\n \"_id\" : 0,\n \"host\" : \"172.17.0.7:27017\",\n \"tags\" : {\n \"application\" : \"main\",\n \"datacenter\" : \"A\",\n \"media\" : \"ssd\"\n }\n },\n {\n \"_id\" : 1,\n \"host\" : \"172.17.0.5:27017\",\n \"tags\" : {\n \"application\" : \"main\",\n \"datacenter\" : \"B\",\n \"media\" : \"ssd\"\n }\n },\n {\n \"_id\" : 2,\n \"host\" : \"172.17.0.6:27017\",\n \"tags\" : {\n \"application\" : \"report\",\n \"datacenter\" : \"A\",\n \"media\" : \"ssd\"\n }\n }\n ]\n}\n\n```", "```go\ndb.customers.find(\n {username: \"customer5\"}\n).readPref(\n {tags: [{application: \"main\", media: \"ssd\", datacenter: \"A\"}]}\n) // It will be executed in the replica set' instance 0 \ndb.customers.find(\n {username: \"customer5\"}\n).readPref(\n {tags: [{application: \"report\", media: \"ssd\", datacenter: \"A\"}]}\n) //It will be executed in the replica set's instance 2 \ndb.customers.find(\n {username: \"customer5\"}\n).readPref(\n {tags: [{application: \"main\", media: \"ssd\", datacenter: \"B\"}]}\n) //It will be executed in the replica set's instance 1\n\n```", "```go\nrs1:PRIMARY> cfg = rs.conf()\nrs1:PRIMARY> cfg.members[0].tags = {\"riodc\": \"rack1\"}\nrs1:PRIMARY> cfg.members[1].tags = {\"riodc\": \"rack2\"}\nrs1:PRIMARY> cfg.members[2].tags = {\"riodc\": \"rack3\"}\nrs1:PRIMARY> cfg.members[3].tags = {\"spdc\": \"rack1\"}\nrs1:PRIMARY> cfg.members[4].tags = {\"spdc\": \"rack2\"}\nrs1:PRIMARY> rs.reconfig(cfg)\n\n```", "```go\nrs1:PRIMARY> cfg = rs.conf()\nrs1:PRIMARY> cfg.settings = {getLastErrorModes: {MultipleDC: {\"riodc\": 1, \"spdc\":1}}}\n\n```", "```go\n{\n \"getLastErrorModes\" : {\n \"MultipleDC\" : {\n \"riodc\" : 1,\n \"spdc\" : 1\n }\n }\n}\n\n```", "```go\nrs1:PRIMARY> rs.reconfig(cfg)\n\n```", "```go\n{ \"ok\" : 1 }\n\n```", "```go\ndb.customers.insert(\n {\n username: \"customer6\", \n email: \"customer6@customer.com\",\n password: \"1185031ff57bfdaae7812dd705383c74\", \n followedSellers: [\"seller1\", \"seller3\"]\n }, \n {\n writeConcern: {w: \"MultipleDC\"} \n }\n)\n\n```", "```go\nrs1:PRIMARY> cfg = rs.conf()\nrs1:PRIMARY> cfg.settings = {getLastErrorModes: {MultipleDC: {\"riodc\": 2, \"spdc\":2}}}\nrs1:PRIMARY> rs.reconfig(cfg)\n\n```", "```go\nrs1:PRIMARY> cfg = rs.conf()\nrs1:PRIMARY> cfg.members[0].tags = {\"riodc\": \"rack1\", \"ssd\": \"ok\"}\nrs1:PRIMARY> cfg.members[3].tags = {\"spdc\": \"rack1\", \"ssd\": \"ok\"}\nrs1:PRIMARY> rs.reconfig(cfg)\nrs1:PRIMARY> cfg.settings = {getLastErrorModes: {MultipleDC: {\"riodc\": 2, \"spdc\":2}, ssd: {\"ssd\": 1}}}\nrs1:PRIMARY> rs.reconfig(cfg)\n\n```", "```go\ndb.customers.insert(\n {\n username: \"customer6\", \n email: \"customer6@customer.com\", \n password: \"1185031ff57bfdaae7812dd705383c74\", \n followedSellers: [\"seller1\", \"seller3\"]\n }, \n {\n writeConcern: {w: \"ssd\"} \n }\n)\n\n```", "```go\ndb.createCollection(\"ordersQueue\",{capped: true, size: 10000})\n\n```", "```go\ndb.createCollection(\n \"ordersQueue\",\n {capped: true, size: 10000, max: 5000}\n)\n\n```", "```go\ndb.runCommand(\n {\"convertToCapped\": \" ordersQueue \", size: 100000}\n)\n\n```", "```go\n{\n \"_id\" : ObjectId(\"54d97db16840a9a7c089fa30\"), \n \"orderId\" : \"order_1\", \n \"time\" : 1423539633910 \n}\n{\n \"_id\" : ObjectId(\"54d97db66840a9a7c089fa31\"), \n \"orderId\" : \"order_2\", \n \"time\" : 1423539638006 \n}\n{\n \"_id\" : ObjectId(\"54d97dba6840a9a7c089fa32\"), \n \"orderId\" : \"order_3\", \n \"time\" : 1423539642022 \n}\n{\n \"_id\" : ObjectId(\"54d97dbe6840a9a7c089fa33\"), \n \"orderId\" : \"order_4\", \n \"time\" : 1423539646015 \n}\n{\n \"_id\" : ObjectId(\"54d97dcf6840a9a7c089fa34\"), \n \"orderId\" : \"order_5\", \n \"time\" : 1423539663559 \n}\n\n```", "```go\n{ \n \"_id\" : ObjectId(\"54d97db16840a9a7c089fa30\"), \n \"orderId\" : \"order_1\", \n \"time\" : 1423539633910 \n}\n{ \n \"_id\" : ObjectId(\"54d97db66840a9a7c089fa31\"), \n \"orderId\" : \"order_2\", \n \"time\" : 1423539638006 \n}\n{ \n \"_id\" : ObjectId(\"54d97dba6840a9a7c089fa32\"), \n \"orderId\" : \"order_3\", \n \"time\" : 1423539642022 \n}\n{ \n \"_id\" : ObjectId(\"54d97dbe6840a9a7c089fa33\"), \n \"orderId\" : \"order_4\", \n \"time\" : 1423539646015 \n}\n{ \n \"_id\" : ObjectId(\"54d97dcf6840a9a7c089fa34\"), \n \"orderId\" : \"order_5\", \n \"time\" : 1423539663559 \n}\n\n```", "```go\ndb.ordersQueue.find().sort({$natural: 1})\n\n```", "```go\ndb.ordersQueue.find().sort({$natural: -1})\n\n```", "```go\n{ \n \"_id\" : ObjectId(\"5498da405d0ffdd8a07a87ba\"), \n \"username\" : \"customer1\", \n \"email\" : \"customer1@customer.com\", \n \"password\" : \"b1c5098d0c6074db325b0b9dddb068e1\", \"accountConfirmationExpireAt\" : ISODate(\"2015-01-11T20:27:02.138Z\") \n}\n\n```", "```go\ndb.customers.createIndex(\n {accountConfirmationExpireAt: 1}, \n {expireAfterSeconds: 3600}\n)\n\n```", "```go\ndb.customers.createIndex(\n {accountConfirmationExpireAt: 1}, \n {expireAfterSeconds: 0}\n)\n\n```"]