- en: 12\. Data Visualization
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 12. 数据可视化
- en: Overview
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 概述
- en: This chapter will introduce you to MongoDB Charts, which offers the best way
    to create visualizations using data from a MongoDB database. You will start by
    learning the basics of the MongoDB Charts data visualization engine, then go on
    to create new dashboards and charts to understand the difference between the various
    types of graphs. You will also integrate and customize graphs with other external
    applications. By the end of this chapter, you will be well versed in the basic
    concepts of the Charts PaaS cloud interface and be able to perform the steps necessary
    to build useful graphs.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将向您介绍MongoDB Charts，它提供了使用来自MongoDB数据库的数据创建可视化的最佳方式。您将首先学习MongoDB Charts数据可视化引擎的基础知识，然后创建新的仪表板和图表，以了解各种类型图表之间的区别。您还将集成和定制图表与其他外部应用程序。通过本章结束时，您将熟悉Charts
    PaaS云界面的基本概念，并能够执行构建有用图表所需的步骤。
- en: Introduction
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: The visual representation of data is extremely useful for reporting as well
    as for business presentations. The advantages of using charts for data visualization
    in science, statistics, and mathematics cannot be overstated. Graphs and charts
    can effectively communicate essential information for business decisions to be
    made, in much the same way that movies can tell stories by using images in motion.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 数据的可视化呈现对于报告和商业演示非常有用。在科学、统计学和数学中使用图表进行数据可视化的优势不言而喻。图表可以有效地传达业务决策所需的基本信息，就像电影可以通过运动图像来讲述故事一样。
- en: 'MongoDB has developed a new, integrated tool for data visualization, called
    MongoDB Charts. This is a relatively new feature, with its first release in the
    second quarter of 2018\. MongoDB Charts allows users to perform quick data representation
    from a MongoDB database without writing code in a programming language such as
    Java or Python. Currently, there are two different implementations of MongoDB Charts:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: MongoDB已经开发了一个名为MongoDB Charts的新的集成工具，用于数据可视化。这是一个相对较新的功能，首次发布于2018年第二季度。MongoDB
    Charts允许用户从MongoDB数据库中快速表示数据，而无需使用诸如Java或Python之类的编程语言编写代码。目前，MongoDB Charts有两种不同的实现方式：
- en: '**MongoDB Charts PaaS** (**Platform as a Service**): This refers to the cloud
    service for Charts. This version of Charts is fully integrated with Atlas cloud
    projects and databases. It does not require any installation on the client side,
    and is free to use with an Atlas cloud account.'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**MongoDB Charts PaaS**（**平台即服务**）：这是指Charts的云服务。这个版本的Charts与Atlas云项目和数据库完全集成。它不需要在客户端进行任何安装，并且在Atlas云账户中免费使用。'
- en: '**MongoDB Charts Server**: This refers to the on-premises MongoDB Charts tools,
    installed locally. The Charts server needs to be downloaded from MongoDB and installed
    on a dedicated server installation with Docker. On-premises Charts is included
    as part of MongoDB Enterprise Advanced, and it will not be covered in this course.'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**MongoDB Charts服务器**：这是指本地安装的MongoDB Charts工具。Charts服务器需要从MongoDB下载并安装在一个专用服务器安装中，使用Docker。本地Charts包含在MongoDB
    Enterprise Advanced中，并且本课程不涵盖它。'
- en: The features available for users are similar in both versions of MongoDB Charts.
    Using just a simple browser client, users can create dashboards and a variety
    of charts. Mongo DB continuously expands upon the Charts tools by adding new features
    in the application and bug-fixes with each new release.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 用户在两个版本的MongoDB Charts中可用的功能是相似的。用户只需使用一个简单的浏览器客户端，就可以创建仪表板和各种图表。MongoDB不断扩展Charts工具，每次新发布都会添加新功能和修复应用程序中的错误。
- en: Throughout this chapter, we will consider a scenario wherein John, an employee
    at XYZ organization, has been assigned to create a dashboard with information
    from a database containing a collection of movies. John is a beginner with limited
    experience in MongoDB. He wonders whether there is an easy way to build graphics
    without writing code in a programming language. And that is where MongoDB Charts
    comes into play. First, we will learn about **Menus and Tabs** in MongoDB Charts.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将考虑这样一个场景：XYZ组织的员工John被指派创建一个仪表板，其中包含来自一个电影集合的数据库的信息。John是一个经验有限的MongoDB初学者。他想知道是否有一种简单的方法可以在不使用编程语言编写代码的情况下构建图形。这就是MongoDB
    Charts发挥作用的地方。首先，我们将学习MongoDB Charts中的**菜单和选项卡**。
- en: Exploring Menus and Tabs
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索菜单和选项卡
- en: 'To start the MongoDB Charts GUI application, users need to first log into the
    Atlas cloud web application. MongoDB Charts (the PaaS version) is bound to one
    Atlas project (the "per project" option), so if there are multiple Atlas projects,
    the user needs to select the currently active Atlas project. As described in previous
    chapters, the name of the Atlas project is chosen when the project is created.
    For this chapter, the name of the project is the default project name in Atlas:
    `Project 0`. The `Charts` tab is visible in the Atlas web application as shown
    in the following figure:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动MongoDB Charts GUI应用程序，用户需要首先登录Atlas云Web应用程序。MongoDB Charts（PaaS版本）绑定到一个Atlas项目（“每个项目”选项），因此如果有多个Atlas项目，用户需要选择当前活动的Atlas项目。如前几章所述，Atlas项目的名称是在创建项目时选择的。对于本章，Atlas中的项目名称是Atlas中的默认项目名称：“Project
    0”。如下图所示，在Atlas Web应用程序中可以看到“Charts”选项卡：
- en: '![Figure 12.1: Charts tab'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.1：图表选项卡'
- en: '](img/B15507_12_01.jpg)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_01.jpg)'
- en: 'Figure 12.1: Charts tab'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.1：图表选项卡
- en: The MongoDB Charts option needs to be activated before the first use. To do
    so, you need to click on the `Activate Now` button to activate the Charts application,
    as shown in *Figure 12.1*. The activation process will only take a minute. During
    the activation, the Atlas application will set up Charts and will generate the
    database metadata necessary to create and run Charts.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在第一次使用之前，需要激活MongoDB Charts选项。为此，您需要点击“立即激活”按钮来激活Charts应用程序，如*图12.1*所示。激活过程只需要一分钟。在激活过程中，Atlas应用程序将设置Charts并生成创建和运行Charts所需的数据库元数据。
- en: As you can see from *Figure 12.1*, in MongoDB Charts, there is a maximum limit
    of 1 GB data transfer per month that can be used for sandpit testing and for learning
    about Charts. Once the limit is reached, MongoDB Charts cannot be used until the
    end of the month. However, the limit can be increased by upgrading the free-tier
    service to a paid Atlas service. You can find more details regarding this at [https://www.mongodb.com/pricing](https://www.mongodb.com/pricing).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 如*图12.1*所示，在MongoDB Charts中，每月最大数据传输限制为1GB，可用于沙盒测试和学习Charts。一旦达到限制，直到月底MongoDB
    Charts将无法使用。但是，可以通过将免费版服务升级为付费的Atlas服务来增加限制。您可以在[https://www.mongodb.com/pricing](https://www.mongodb.com/pricing)找到更多详细信息。
- en: 'Note that, once activated, the MongoDB Charts option will remain activated
    for the entire lifetime of your Atlas project. You will be asked if you wish to
    populate with sample data or connect an existing cluster in ATALS cloud. If you
    wish to remove the Charts option, you can do so by going to the Atlas project
    settings. This could be useful if you want to re-activate a fresh new version
    of Charts for an existing project. Nevertheless, removing Charts should be done
    with caution because it will automatically delete all charts and dashboards saved
    in the cloud. Once Atlas Charts is activated, the application starts and it can
    be used to create charts, as shown in the following screenshot:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，一旦激活，MongoDB Charts选项将在Atlas项目的整个生命周期内保持激活状态。您将被询问是否希望使用示例数据填充或连接现有的ATLAS云中的集群。如果您希望删除Charts选项，可以通过转到Atlas项目设置来执行。如果您想要为现有项目重新激活全新版本的Charts，这可能会很有用。然而，删除Charts应该谨慎进行，因为它将自动删除云中保存的所有图表和仪表板。一旦激活Atlas
    Charts，应用程序将启动，并且可以用于创建图表，如下图所示：
- en: '![Figure 12.2: Charts application'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.2：Charts应用程序'
- en: '](img/B15507_12_02.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_02.jpg)'
- en: 'Figure 12.2: Charts application'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.2：Charts应用程序
- en: 'The option buttons are displayed on the left side of the application:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 选项按钮显示在应用程序的左侧：
- en: '`Dashboards`: As the name suggests, this option helps manage dashboards. A
    dashboard is a set of different charts combined into a single page for business
    reporting purposes.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`仪表板`：顾名思义，此选项帮助管理仪表板。仪表板是将不同图表组合成单个页面以用于业务报告目的的集合。'
- en: '`Data Sources`: Using this option, you can manage the data source, which is
    simply a reference to the MongoDB database collection from which data is processed
    to display charts.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`数据源`：使用此选项，您可以管理数据源，这只是对MongoDB数据库集合的引用，从中处理数据以显示图表。'
- en: '`Charts Settings`: This option allows users to manage chart authentication
    providers and to monitor the network bandwidth usage of the Charts application.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`图表设置`：此选项允许用户管理图表认证提供程序，并监视Charts应用程序的网络带宽使用情况。'
- en: Note
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To return to the main Atlas web application, you can click the `Atlas` tab link
    on the top bar in the Charts application.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 返回主Atlas web应用程序，您可以在Charts应用程序的顶部工具栏中点击`Atlas`标签链接。
- en: Dashboards
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 仪表板
- en: In business presentations, information is usually displayed that's pertinent
    to subject areas. A subject area is a category, such as human resources or real
    estate. A subject display contains all the relevant data indicators for the respective
    business area, but data from one subject area is often not correlated with database
    structures. That is how data is stored in the MongoDB database. Therefore, dashboards
    are a chart grouping feature for when we need to present data in a centralized
    and meaningful way for businesses.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在商业演示中，通常显示与主题相关的信息。主题是一个类别，比如人力资源或房地产。主题显示包含了各自业务领域的所有相关数据指标，但是一个主题领域的数据通常与数据库结构不相关。这就是数据存储在MongoDB数据库中的方式。因此，仪表板是一个图表分组功能，当我们需要以集中和有意义的方式为企业呈现数据时使用。
- en: In the current version of Charts, the cloud application automatically creates
    an empty dashboard for us. The default dashboard has a name, `User's Dashboard`,
    as shown in *Figure 12.2*, where `User` is the Atlas login username.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在当前版本的Charts中，云应用程序会自动为我们创建一个空白仪表板。默认仪表板的名称为`用户的仪表板`，如*图12.2*所示，其中`用户`是Atlas登录用户名。
- en: 'You can delete the default dashboard and create additional dashboards for your
    business presentations. To create a new dashboard, you can click on the `Add Dashboard`
    button as shown in *Figure 12.2*. A dialog box will open in which you need to
    add details about the new dashboard:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以删除默认仪表板并为您的业务演示创建其他仪表板。要创建新的仪表板，您可以点击*图12.2*中显示的`添加仪表板`按钮。将打开一个对话框，在其中您需要添加有关新仪表板的详细信息：
- en: '![Figure 12.3: Add Dashboard dialog box'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.3：添加仪表板对话框'
- en: '](img/B15507_12_03.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_03.jpg)'
- en: 'Figure 12.3: Add Dashboard dialog box'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.3：添加仪表板对话框
- en: 'To access dashboard properties, click on the `…` button from the dashboard
    box, as shown in the following figure:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问仪表板属性，请点击仪表板框中的`…`按钮，如下图所示：
- en: '![Figure 12.4: Dashboard properties drop-down menu'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.4：仪表板属性下拉菜单'
- en: '](img/B15507_12_04.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_04.jpg)'
- en: 'Figure 12.4: Dashboard properties drop-down menu'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.4：仪表板属性下拉菜单
- en: 'There are a few buttons and options available in the dashboard context:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在仪表板上下文中有一些按钮和选项可用：
- en: '`Edit Title / Description`: This option is used to change the current title
    or description of the dashboard.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`编辑标题/描述`：此选项用于更改仪表板的当前标题或描述。'
- en: '`Duplicate Dashboard`: This option copies the dashboard to a new one, with
    a different name.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`复制仪表板`：此选项将仪表板复制到一个新的仪表板中，名称不同。'
- en: '`Delete Dashboard`: This option removes the dashboard from MongoDB Charts.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`删除仪表板`：此选项将从MongoDB Charts中删除仪表板。'
- en: '`Lock`: This option assigns dashboard permissions for Atlas project users.
    This option is not useful for free-tier Atlas Charts, as MongoDB does not allow
    you to manage project users and teams with the free tier.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`锁定`：此选项为Atlas项目用户分配仪表板权限。对于免费版Atlas Charts来说，此选项并不实用，因为MongoDB不允许您使用免费版来管理项目用户和团队。'
- en: 'To view a dashboard, click on the dashboard name link (for example, `User''s
    Dashboard`). The dashboard will open and show all charts contained in it. If no
    charts are created, then an empty dashboard is displayed as in the following screenshot:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看仪表板，请点击仪表板名称链接（例如，“用户的仪表板”）。仪表板将打开并显示其中包含的所有图表。如果没有创建图表，则会显示一个空的仪表板，如下图所示：
- en: '![Figure 12.5: User''s Dashboard'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.5：用户的仪表板'
- en: '](img/B15507_12_05.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_05.jpg)'
- en: 'Figure 12.5: User''s Dashboard'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.5：用户的仪表板
- en: Later in this chapter, we will go through the steps to add charts to our dashboards.
    But before we can add new charts, we must ensure that database documents are available
    for our charts. This is the topic of the next section.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的后面，我们将介绍如何向我们的仪表板添加图表的步骤。但在我们添加新图表之前，我们必须确保数据库文档可用于我们的图表。这是下一节的主题。
- en: Data Sources
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据源
- en: Data sources represent the interface between MongoDB database structures and
    the MongoDB Charts presentation engine. A data source is a pointer to a specific
    database collection (or collections) from which the data is processed to create
    a graph. As MongoDB Charts is integrated with the Atlas web application, all data
    sources are configured to connect to Atlas database deployments. Therefore, a
    data source contains a description of the Atlas cluster deployment, the database,
    and the collection that will be used for Charts.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 数据源代表MongoDB数据库结构和MongoDB Charts演示引擎之间的接口。数据源是指向特定数据库集合（或集合）的指针，从中处理数据以创建图表。由于MongoDB
    Charts与Atlas Web应用程序集成，所有数据源都配置为连接到Atlas数据库部署。因此，数据源包含Atlas集群部署的描述、将用于Charts的数据库和集合。
- en: A data source also enables a level of isolation between the MongoDB database
    and MongoDB Charts application users. It is guaranteed that data sources do not
    modify MongoDB databases because they access databases in read-only mode. Without
    a data source, Charts cannot access JSON documents from a MongoDB database.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 数据源还可以在MongoDB数据库和MongoDB Charts应用程序用户之间提供一定程度的隔离。可以保证数据源不会修改MongoDB数据库，因为它们以只读模式访问数据库。没有数据源，Charts无法访问MongoDB数据库中的JSON文档。
- en: Note
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: MongoDB Charts (the PaaS version) permits data sources to reference data only
    from Atlas cloud cluster deployments. Therefore, it is not possible to create
    a data source from your local MongoDB database installation. Before you can generate
    a new data source, database collections and documents must be uploaded to your
    Atlas database cluster.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: MongoDB Charts（PaaS版本）允许数据源仅引用来自Atlas云集群部署的数据。因此，不可能从本地MongoDB数据库安装创建数据源。在生成新数据源之前，必须将数据库集合和文档上传到Atlas数据库集群中。
- en: 'To access the data sources, click on the `Data Sources` tab on the left, as
    shown in the following figure:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 访问数据源，请点击左侧的“数据源”选项卡，如下图所示：
- en: '![Figure 12.6: Data Sources tab'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.6：数据源选项卡'
- en: '](img/B15507_12_06.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_06.jpg)'
- en: 'Figure 12.6: Data Sources tab'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.6：数据源选项卡
- en: In the middle, you can observe a list with existing data sources and the `Add
    Data Source` button in the upper-right corner of the page.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在中间，您可以看到现有数据源的列表，页面右上角有“添加数据源”按钮。
- en: 'As you can see, in the current version of Charts, one sample data source is
    automatically populated by your application. The name of this sample data source
    is `Sample Data: Movies`. MongoDB tries to facilitate a quick introduction to
    Charts by providing a sample data source and sample dashboards/charts, so that
    users can see some charts without learning how to use the Charts interface.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，在当前版本的Charts中，您的应用程序会自动填充一个示例数据源。这个示例数据源的名称是“示例数据：电影”。MongoDB试图通过提供示例数据源和示例仪表板/图表来简化对Charts的快速介绍，以便用户在不学习如何使用Charts界面的情况下查看一些图表。
- en: Note
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'The sample data source `Sample Data: Movies` cannot be changed or deleted by
    users. That is because the sample data source is pointing to a special Atlas database,
    which is external to your project and not accessible to users. As it is not guaranteed
    that this data source will exist in future versions, you should ignore this data
    source and continue as if there are none.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 示例数据源“示例数据：电影”不能被用户更改或删除。这是因为示例数据源指向一个特殊的Atlas数据库，该数据库对您的项目外部，并且用户无法访问。由于不能保证这个数据源将存在于将来的版本中，您应该忽略这个数据源，并继续操作。
- en: To create a new data source, you must provide the connection details to your
    cloud MongoDB database. A data source usually points to a single database collection.
    As you are already familiar with the MongoDB database structure, it should be
    relatively easy to create a new data source in Charts.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建新的数据源，您必须提供连接到云MongoDB数据库的连接详细信息。数据源通常指向单个数据库集合。由于您已经熟悉了MongoDB数据库结构，因此在Charts中创建新数据源应该相对容易。
- en: However, data sources can be more complicated to deal with than a single database
    collection. More complex options (which are called **data source preprocessing**)
    are available for Charts users. Complex data sources include features such as
    filtering, joining, and aggregation. More details about preprocessing features
    will be covered later in this chapter. For the moment, let's focus on creating
    a new data source in Charts.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，数据源可能比单个数据库集合更复杂。Charts用户可以使用更复杂的选项（称为**数据源预处理**）。复杂的数据源包括过滤、连接和聚合等功能。有关预处理功能的更多细节将在本章的后面介绍。目前，让我们专注于在Charts中创建新数据源。
- en: 'To create a data source, click on the `Add Data Source` button as shown in
    *Figure: 12.6*. A new window with the `Add Data Sources` wizard will appear on
    the screen:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建数据源，请点击“添加数据源”按钮，如*图12.6*所示。屏幕上会出现一个带有“添加数据源”向导的新窗口：
- en: '![Figure 12.7: Add Data Sources window'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.7：添加数据源窗口'
- en: '](img/B15507_12_07.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_07.jpg)'
- en: 'Figure 12.7: Add Data Sources window'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.7：添加数据源窗口
- en: You will be presented with a list of cloud databases available for Charts (*Figure
    12.7*). In the case of free-tier Atlas, there will be one `M0` cluster available.
    As you can see, the footer says `The connection made to your clusters from Charts
    will be read-only`. This is to reassure you that the data source will not alter
    the database information. You can choose `Cluster0` from the cluster list and
    then click on the `Next` button.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到一个用于Charts的云数据库列表（图12.7）。在免费的Atlas中，将有一个`M0`集群可用。正如您所看到的，页脚上写着`从Charts到您的集群的连接将是只读的`。这是为了让您放心，数据源不会改变数据库信息。您可以从集群列表中选择`Cluster0`，然后点击`下一步`按钮。
- en: 'Next, a list of available databases is displayed. You can expand each database,
    display all collections within, and select a specific collection from the respective
    database, as shown in the following screenshot:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，将显示可用数据库的列表。您可以展开每个数据库，显示其中所有的集合，并从各自的数据库中选择特定的集合，如下截图所示：
- en: '![Figure 12.8: Select collections window'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.8：选择集合窗口
- en: '](img/B15507_12_08.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_08.jpg)'
- en: 'Figure 12.8: Select collections window'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.8：选择集合窗口
- en: You can select the entire database or expand the database section and select
    one or more collections from within the database. If you select multiple collections
    (or multiple databases), Atlas will generate multiple data sources—one data source
    for each database collection. It is therefore possible to create multiple data
    sources without going through this setup assistant multiple times. The limitation
    in this case is that all data sources will point to a single database cluster
    that was selected previously.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以选择整个数据库，或展开数据库部分并从中选择一个或多个集合。如果选择多个集合（或多个数据库），Atlas将生成多个数据源——每个数据库集合一个数据源。因此，可以创建多个数据源，而不必多次通过此设置助手。在这种情况下的限制是，所有数据源将指向之前选择的单个数据库集群。
- en: 'Once the data source is configured and saved, it will appear in the list, as
    shown in *Figure 12.9*:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦数据源配置并保存，它将出现在列表中，如图12.9所示：
- en: '![Figure 12.9: Data Sources tab shows that sample_supplies database is configured'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.9：数据源选项卡显示配置了sample_supplies数据库
- en: '](img/B15507_12_09.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_09.jpg)'
- en: 'Figure 12.9: Data Sources tab shows that sample_supplies database is configured'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.9：数据源选项卡显示配置了sample_supplies数据库
- en: 'Exercise 12.01: Working with Data Sources'
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12.01：使用数据源
- en: 'In this exercise, you will create new data sources for Charts. These will reappear
    in examples later in this chapter, so it is important to follow the steps here
    carefully:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将为Charts创建新的数据源。这些将在本章后面的示例中再次出现，因此请务必仔细遵循这里的步骤：
- en: Note
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Please ensure that you have uploaded the Atlas sample data in your `M0` cluster
    as it was shown in the first three chapters of this book. As explained before,
    a new data source cannot be defined without a valid MongoDB database collection.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 请确保您已经在`M0`集群中上传了Atlas示例数据，就像本书的前三章中所展示的那样。正如之前解释的，如果没有有效的MongoDB数据库集合，就无法定义新的数据源。
- en: In the `Data Source` tab, click on `Add Data Source`, as shown in *Figure 12.6*.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`数据源`选项卡中，点击`添加数据源`，如图12.6所示。
- en: 'Select your own cluster, as shown in *Figure 12.7*. Then, click Next:'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您自己的集群，如图12.7所示。然后，点击下一步：
- en: 'From the database list, click on the `sample_mflix` database. If you wish,
    you can expand the database section to see the list of all collections from the
    `sample_mflix` database:![Figure 12.10: Selecting the sample_mflix database'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从数据库列表中，点击`sample_mflix`数据库。如果愿意，可以展开数据库部分，查看`sample_mflix`数据库中所有集合的列表：图12.10：选择sample_mflix数据库
- en: '](img/B15507_12_10.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_10.jpg)'
- en: 'Figure 12.10: Selecting the sample_mflix database'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.10：选择sample_mflix数据库
- en: 'Click on the `Finish` button. You should be able to see five additional data
    sources (one for each collection) created in your interface, as shown in the following
    figure:![Figure 12.11: Data Sources list updated'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`完成`按钮。您应该能够在界面中看到创建的五个额外数据源（每个集合一个），如下图所示：图12.11：数据源列表已更新
- en: '](img/B15507_12_11.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_11.jpg)'
- en: 'Figure 12.11: Data Sources list updated'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.11：数据源列表已更新
- en: In this example, you added a new data source in MongoDB Charts.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，您在MongoDB Charts中添加了一个新的数据源。
- en: Data Source Permissions
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据源权限
- en: Complex MongoDB projects can have many developers and business users working
    together with Charts. In such cases, the Atlas user who creates a new data source
    may need to share it with other Atlas project users. As explained in previous
    chapters, Atlas applications can manage multiple users for large Atlas deployments.
    However, this concept is not applicable for the free-tier Atlas sandpit projects
    in which most of the examples in this book are presented.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 复杂的MongoDB项目可能有许多开发人员和业务用户与Charts一起工作。在这种情况下，创建新数据源的Atlas用户可能需要与其他Atlas项目用户共享。正如前几章所解释的，Atlas应用程序可以管理大型Atlas部署的多个用户。但是，这个概念不适用于本书中大部分示例所展示的免费的Atlas沙盒项目。
- en: 'Once a user creates a new data source, they become the owner of that data source
    and can share it with other project members by clicking on the `ACCESS` button
    in the `Charts` tab in the `Data Sources` window (see *Figure 12.9*). Here is
    a screenshot example from the `M0` free-tier cluster:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦用户创建了新的数据源，他们就成为了该数据源的所有者，并可以通过在`数据源`窗口的`Charts`选项卡中点击`ACCESS`按钮与其他项目成员共享它（见图12.9）。这是来自`M0`免费集群的一个截图示例：
- en: '![Figure 12.12: Data Source Permissions window'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.12：数据源权限窗口
- en: '](img/B15507_12_12.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_12.jpg)'
- en: 'Figure 12.12: Data Source Permissions window'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.12：数据源权限窗口
- en: As can be seen from the preceding screenshot, the owner can enable or disable
    the `VIEWER` permission for `Everyone in Project0`. The `VIEWER` permission allows
    users to "use" the data source to build their own charts. Other users are not
    allowed to modify or delete the data source.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的截图中可以看出，所有者可以为`Project0`中的`Everyone`启用或禁用`VIEWER`权限。`VIEWER`权限允许用户“使用”数据源来构建他们自己的图表。其他用户不允许修改或删除数据源。
- en: For large projects, the data source owner can grant permission to a specific
    Atlas group or users that are invited to the project. These advanced permissions,
    which are specific to large Atlas projects, are not covered in this introductory
    course.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 对于大型项目，数据源所有者可以授予特定的Atlas组或被邀请参与项目的用户权限。这些高级权限是特定于大型Atlas项目的，不在本入门课程中涵盖。
- en: Building Charts
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 构建图表
- en: New charts can be created in MongoDB Charts using the Chart Builder. To start
    the Chart Builder, open a dashboard. You can open your own user dashboard by clicking
    on the `User's Dashboard` link in the dashboard tab, as shown in *Figure 12.5*.
    Then, click on the `ADD CHART` button.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用图表生成器在MongoDB Charts中创建新图表。要启动图表生成器，请打开仪表板。您可以通过单击仪表板选项卡中的`用户仪表板`链接来打开自己的用户仪表板，如*图12.5*所示。然后，单击`添加图表`按钮。
- en: 'The following is a screenshot of the Chart Builder:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是图表生成器的屏幕截图：
- en: '![Figure 12.13: Chart Builder'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.13：图表生成器'
- en: '](img/B15507_12_13.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_13.jpg)'
- en: 'Figure 12.13: Chart Builder'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.13：图表生成器
- en: The first step is to choose the data source. The `Choose a Data Source` button
    appears highlighted in green in the top-left corner. Note that a valid data source
    needs to be created and published before you can assign it to a chart. Also, it
    is not possible to assign more than one data source to a chart. By default, all
    documents from a collection are retrieved for the Chart Builder.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是选择数据源。`选择数据源`按钮出现在左上角绿色高亮显示。请注意，需要创建并发布有效的数据源，然后才能将其分配给图表。此外，不可能将多个数据源分配给一个图表。默认情况下，图表生成器会检索集合中的所有文档。
- en: There is an option to click the `Sample Mode` radio button. This mode enables
    Charts to retrieve only a subset of documents from the database. There is no rule
    about the maximum number of JSON documents that should be loaded in the Chart
    Builder. For example, if the goal is to display precise aggregation values, then
    we may need to retrieve all the documents. On the other hand, if the goal is to
    display a trend or a correlation graph, then just a sample of documents should
    suffice. Nevertheless, loading an extremely high amount of data in Charts (more
    than 1 GB) will have a negative impact on Charts' performance and is discouraged.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个选项可以单击`示例模式`单选按钮。此模式使图表仅从数据库中检索一部分文档。关于应在图表生成器中加载的JSON文档的最大数量没有规定。例如，如果目标是显示精确的聚合值，那么可能需要检索所有文档。另一方面，如果目标是显示趋势或相关图表，则可能只需要一部分文档。然而，在图表中加载大量数据（超过1GB）将对图表的性能产生负面影响，因此不鼓励这样做。
- en: Fields
  id: totrans-106
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 字段
- en: 'On the left side of the Chart Builder page, you can see the list of collection
    fields:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在图表生成器页面的左侧，您可以看到集合字段的列表：
- en: '![Figure 12.14: Fields area in the Chart Builder'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.14：图表生成器中的字段区域'
- en: '](img/B15507_12_14.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_14.jpg)'
- en: 'Figure 12.14: Fields area in the Chart Builder'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.14：图表生成器中的字段区域
- en: Each field has a name and a data type, as you have already seen in *Chapter
    2*, *Documents and Data Types*.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 每个字段都有一个名称和一个数据类型，正如您在*第2章*，*文档和数据类型*中已经看到的。
- en: 'The following is the list of data types in the Chart Builder:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是图表生成器中的数据类型列表：
- en: '`A` – String'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`A` - 字符串'
- en: '`#` – Numeric (integer or float)'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`#` - 数字（整数或浮点数）'
- en: Date
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日期
- en: '`[]` – Array'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`[]` - 数组'
- en: '`{}` – Sub-document'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`{}` - 子文档'
- en: Note
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: In the example screenshot (*Figure 12.14*), the movies data source has been
    selected for `sample_mflix.movies`.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例截图（*图12.14*）中，已选择了`sample_mflix.movies`的电影数据源。
- en: Types of Charts
  id: totrans-120
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 图表类型
- en: 'There are various types of charts available that you can choose from. They
    all could represent similar views. However, some chart types are better suited
    to a particular scenario or database data type. The following table enlists all
    the chart types and their respective functions:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 有各种类型的图表可供选择。它们都可以表示类似的视图。但是，某些图表类型更适合特定的场景或数据库数据类型。以下表格列出了所有图表类型及其各自的功能：
- en: '![Figure 12.15: Types of charts in MongoDB'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.15：MongoDB中的图表类型'
- en: '](img/B15507_12_15.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_15.jpg)'
- en: 'Figure 12.15: Types of charts in MongoDB'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.15：MongoDB中的图表类型
- en: Each chart type could have one or more sub-types that are visual variations
    of the main chart and are useful in different presentations. Since a chart sub-type
    is dependent on the main chart type, we will discuss them for each type of chart.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 每种图表类型可能有一个或多个子类型，这些子类型是主图表的视觉变化，并且在不同的展示中很有用。由于图表子类型取决于主图表类型，我们将讨论每种图表类型的子类型。
- en: 'A chart sub-type can be selected from the same menu, just under `Chart Type`,
    as shown in the following screenshot for the `Bar` chart type:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 可以从同一菜单中选择图表子类型，就在`图表类型`下方，如下面的屏幕截图所示，用于`条形图`类型：
- en: '![Figure 12.16: Bar chart sub-types'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.16：条形图子类型'
- en: '](img/B15507_12_16.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_16.jpg)'
- en: 'Figure 12.16: Bar chart sub-types'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.16：条形图子类型
- en: Note that there are four different sub-types for bar and column charts as shown
    in *Figure 12.16*. While most sub-types are only variations of the same chart
    type, some sub-types can be useful to focus on different aspects of data. For
    example, the `Grouped` sub-type is useful to compare values in different categories
    while `Stacked` is useful to see the cumulated values for all categories. The
    simplest way to identify the right sub-type for you is to quickly navigate through
    them. The Charts engine will automatically re-display the chart in your chosen
    sub-type form.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，如*图12.16*所示，条形图和柱状图有四种不同的子类型。虽然大多数子类型只是相同图表类型的变体，但某些子类型可能有助于专注于数据的不同方面。例如，`分组`子类型有助于比较不同类别中的值，而`堆叠`有助于查看所有类别的累积值。确定适合您的正确子类型的最简单方法是快速浏览它们。图表引擎将自动以您选择的子类型形式重新显示图表。
- en: 'Just under the `Chart Type` selection menu, there is a submenu with other tabs
    that is used to define chart channels or dimensions. The following screenshot
    shows these:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 在`图表类型`选择菜单下方，有一个子菜单，其中包含其他选项卡，用于定义图表通道或维度。以下屏幕截图显示了这些内容：
- en: '![Figure 12.17: Chart channels'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.17：图表通道'
- en: '](img/B15507_12_17.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_17.jpg)'
- en: 'Figure 12.17: Chart channels'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.17：图表通道
- en: 'The following list gives a brief description of each tab:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 以下列表简要描述了每个选项卡：
- en: '`Encode`: This is for defining the chart channels. A channel describes how
    the data is translated into a chart visualization item. Different chart types
    have different encode channels. For example, bar and line graphs have channels
    represented by Cartesian coordinates (an X axis and a Y axis).'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`编码`：用于定义图表通道。通道描述了数据如何转换为图表可视化项。不同的图表类型具有不同的编码通道。例如，条形图和折线图具有由笛卡尔坐标表示的通道。'
- en: '`Filter`: This is for defining data filters. This option helps filter input
    documents, so only the required documents are considered for the chart plotting.
    This is useful if we want to exclude non-relevant data from our graph.'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`筛选`：用于定义数据筛选。此选项有助于筛选输入文档，因此只有所需的文档被考虑用于图表绘制。如果我们想要从图表中排除非相关数据，这将非常有用。'
- en: '`Customize`: This is used to define functional and aesthetical customizations
    of charts, such as chart colors and labels. While this option is non-essential,
    it often makes a big difference in terms of graph readability.'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`自定义`：用于定义图表的功能和美学自定义，例如图表颜色和标签。虽然这个选项并非必需，但在图表可读性方面通常会产生很大的差异。'
- en: More detailed information about channel utilization is presented later in this
    chapter. For now, let's go through some of the chart types and practical examples.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 有关通道利用的更详细信息将在本章后面介绍。现在，让我们浏览一些图表类型和实际示例。
- en: Bar and Column Charts
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 条形图和柱状图
- en: Bar and column charts are probably the most common type of charts used in presentations.
    The basic format of the chart is comprised of a set of bars with different values
    for height and thickness, arranged in a bi-dimensional graph.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 条形图和柱状图可能是演示中最常用的图表类型。图表的基本格式由一组具有不同高度和厚度值的条形组成，排列在二维图中。
- en: 'Bar charts are especially useful to represent aggregated values for categorical
    data. The main designation for bar charts is therefore data categorization or
    classification. While this material is not a comprehensive theory on data science,
    a short introduction will help you to understand the basics. Here is a description
    of how categorical data can be defined:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 条形图特别适用于表示分类数据的聚合值。因此，条形图的主要用途是数据分类或分类。虽然这份材料不是关于数据科学的全面理论，但简短的介绍将帮助您了解基础知识。以下是分类数据的定义描述：
- en: '**Data classification**: This pertains to data that can be identified based
    on a category or label, for example, quality (high, average, low) or color (white,
    red, blue). This could also include a few distinct numerical values or numbers
    used as categories (not values).'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据分类**：这涉及可以根据类别或标签进行识别的数据，例如质量（高、平均、低）或颜色（白色、红色、蓝色）。这也可能包括一些不同的数值或用作类别的数字值（而不是值）。'
- en: '**Data binning**: This means grouping data in a category based on an interval.
    For example, numerical values between 0 and 9.99 could be grouped in the first
    bin, and numbers between 10 and 19.99 in the second bin, and so on. In this way,
    we can group many values into relatively few categories. Binning is the method
    used to represent graphs for statistical analysis, called histograms.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据分箱**：这意味着根据间隔将数据分组到一个类别中。例如，0到9.99之间的数值可以分组到第一个箱中，10到19.99之间的数值可以分组到第二个箱中，依此类推。通过这种方式，我们可以将许多数值分组到相对较少的类别中。分箱是用于表示统计分析图表的方法，称为直方图。'
- en: Once we have defined data categories, our bi-dimensional bar chart can be built
    from there. The data category will populate one dimension of the chart, while
    the calculated (aggregated) values will populate the other dimension of the chart.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们定义了数据类别，我们的二维条形图就可以从那里构建。数据类别将填充图表的一个维度，而计算（聚合）值将填充图表的另一个维度。
- en: 'Exercise 12.02: Creating a Bar Chart to Display Movies'
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12.02：创建一个条形图来显示电影
- en: 'The goal of this exercise is to create a bar chart and to get familiar with
    the MongoDB Charts interface menu and options:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 本练习的目标是创建一个条形图，并熟悉MongoDB Charts界面菜单和选项：
- en: First, choose the chart type and then drag and drop fields into the `Encode`
    area. For example, if you choose the chart type `Bar` and `Grouped`, you can see
    the X and Y axes in the `Encode` area.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，选择图表类型，然后将字段拖放到“编码”区域。例如，如果您选择图表类型“条形图”和“分组”，您可以在“编码”区域看到X轴和Y轴。
- en: Note
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Select `sample_mflix.movies datasource` for this chart (top-left drop down menu)
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 为此图表选择“sample_mflix.movies数据源”（左上角下拉菜单）
- en: 'Click on the field named `title` (movie title) and drag it to `Y Axis`:![Figure
    12.18: Dragging the title field to the Y Axis'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击名为“标题”（电影标题）的字段，并将其拖放到“Y轴”：![图12.18：将标题字段拖放到Y轴
- en: '](img/B15507_12_18.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_18.jpg)'
- en: 'Figure 12.18: Dragging the title field to the Y Axis'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.18：将标题字段拖放到Y轴
- en: To limit the number of values, click `Limit Results` and enter `5` in the `Show` box.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要限制数值的数量，点击“限制结果”，并在“显示”框中输入“5”。
- en: Note
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Accept the default option for `SORT BY`, which is `VALUE` (see *Figure 12.17*).
    We will explain the various options in the encoding channels in the upcoming sections.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 接受“排序方式”的默认选项，即“值”（见*图12.17*）。我们将在接下来的章节中解释编码通道的各种选项。
- en: 'The next step is to define values for the X axis. Expand the `awards` field
    sub-document, then click and drag and drop `wins` to `X Axis`. Keep the default
    setting for `AGGREGATE`, which is `SUM`:![Figure 12.19: Adding the wins field
    to the X Axis'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是为X轴定义值。展开“奖项”字段子文档，然后单击并拖放“获奖次数”到“X轴”。保持“聚合”默认设置为“求和”：![图12.19：将获奖次数字段添加到X轴
- en: '](img/B15507_12_19.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_19.jpg)'
- en: 'Figure 12.19: Adding the wins field to the X Axis'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.19：将获奖次数字段添加到X轴
- en: 'The graph should now automatically appear on the right side of the Chart Builder
    screen:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 图现在应该会自动出现在图表生成器屏幕的右侧：
- en: '![Figure 12.20: Top five movies sorted by the number of awards'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.20：按奖项数量排序的前五部电影'
- en: '](img/B15507_12_20.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_20.jpg)'
- en: 'Figure 12.20: Top five movies sorted by the number of awards'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.20：按奖项数量排序的前五部电影
- en: 'Now, group the bars based on database fields. For this feature, add multiple
    fields to the `X Axis` channel while keeping `title` as the only `Y Axis` value.
    To add a second set of values on the X axis (`Grouped` bar), drag and drop `nominations`
    to `X Axis`:![Figure 12.21: Dragging the nominations field to X Axis'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，根据数据库字段对条形进行分组。对于此功能，将多个字段添加到`X轴`通道，同时保持`标题`作为唯一的`Y轴`值。要在X轴上添加第二组值（`分组`条形），请将`提名`拖放到`X轴`：![图12.21：将提名字段拖动到X轴
- en: '](img/B15507_12_21.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_21.jpg)'
- en: 'Figure 12.21: Dragging the nominations field to X Axis'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.21：将提名字段拖动到X轴
- en: 'The chart is then automatically updated to show both `nominations` and `wins`
    for each movie:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 然后图表会自动更新，显示每部电影的`提名`和`获奖`：
- en: '![Figure 12.22: Bar graph showing awards and nominations for top movies'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.22：条形图显示顶级电影的奖项和提名'
- en: '](img/B15507_12_22.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_22.jpg)'
- en: 'Figure 12.22: Bar graph showing awards and nominations for top movies'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.22：条形图显示顶级电影的奖项和提名
- en: This graph sub-type is particularly useful if you want to compare values. In
    this case, you compared the number of nominations and wins for each movie. As
    you can see, the values are "grouped." This is exactly the meaning of the `Grouped`
    tab in the `Chart Type` selection menu.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想要比较值，这种图表子类型特别有用。在这种情况下，您比较了每部电影的提名和获奖次数。正如您所看到的，这些值是“分组”的。这正是`图表类型`选择菜单中`分组`选项的意思。
- en: 'If you prefer to see them "stacked" instead of grouped, then just click on
    the `Stacked` button (*Figure 12.21*) and the chart will be automatically updated.
    This option is useful if we want to see the total cumulated values of movie award
    nominations and wins:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您更喜欢看到它们“堆叠”而不是分组，那么只需单击“堆叠”按钮（*图12.21*），图表将自动更新。如果我们想要看到电影奖项提名和获奖的累积总值，这个选项就很有用：
- en: '![Figure 12.23: Result with stacked bars (instead of grouped)'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.23：堆叠条形图的结果（而不是分组）'
- en: '](img/B15507_12_23.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_23.jpg)'
- en: 'Figure 12.23: Result with stacked bars (instead of grouped)'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.23：堆叠条形图的结果（而不是分组）
- en: As you can see, switching from one sub-type to another in MongoDB Charts comes
    down to one click. As a result, the chart is automatically redrawn in the new
    format without any other user input. This feature is extremely useful once we
    decide whether our initial sub-type choice was the right one for our presentation.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，在MongoDB Charts中从一个子类型切换到另一个子类型只需要点击一次。结果，图表会自动以新格式重新绘制，而无需任何其他用户输入。一旦我们决定我们的初始子类型选择是否适合我们的演示，这个功能就非常有用。
- en: Now, let's look at other types of charts that are available in Atlas.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看Atlas中可用的其他类型的图表。
- en: Circular Charts
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 圆形图表
- en: Circular charts are colored round circles or semi-circles, often sub-divided
    into slices to represent values or percentages. The circular chart is also "unidimensional,"
    which means that the graph can only represent a single set of scalar values and
    not values that can be represented in a Cartesian coordinate system. Considering
    this limitation, we need to be aware that there is little information that we
    can represent using this type of chart. Nevertheless, a circular chart provides
    a powerful visual representation of data proportions, by putting an emphasis on
    the ratio between one slice and the whole. Because of its simplicity and visual
    impact, this type of chart is also highly effective for presentations.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 圆形图表是彩色的圆形或半圆形，通常被细分成扇形，以表示值或百分比。圆形图表也是“单维”的，这意味着图表只能表示一组标量值，而不能表示可以在笛卡尔坐标系中表示的值。考虑到这个限制，我们需要意识到使用这种类型的图表可以表示的信息很少。尽管如此，圆形图表通过强调一个扇形与整体之间的比例，提供了数据比例的强大视觉表示。由于其简单性和视觉冲击力，这种类型的图表对于演示也非常有效。
- en: 'There are two sub-types of circular charts: `Donut` and `Gauge`:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 圆形图表有两种子类型：`圆环`和`仪表盘`：
- en: '`Donut`: This represents a full, colored circle (pie), which is divided into
    slices that represent values or percentages. There could be many values or slices.
    However, it is recommended to limit the number of values, so that the donut is
    divided into a relatively small number of slices.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`圆环`：这代表一个全彩色的圆（饼），被分成代表值或百分比的扇形。可能有很多值或扇形。然而，建议限制值的数量，以便圆环被分成相对较少的扇形。'
- en: '`Gauge`: This represents a semi-circle, with a ratio from the total. This type
    of graph is a simplified version of the donut type because it can represent a
    single value proportion.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`仪表盘`：这代表一个半圆，与总数的比例。这种类型的图表是圆环类型的简化版本，因为它可以表示单个值的比例。'
- en: In the next exercise, you will learn how to build a donut chart.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个练习中，您将学习如何创建一个圆环图。
- en: 'Exercise 12.03: Creating a Pie Chart Graph from the Movies Collection'
  id: totrans-184
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12.03：从电影收藏创建饼图图表
- en: 'Say you need to represent the movies based on their country of origin. As a
    pie representation is generally more intuitive than a table, you decide to use
    a donut chart to represent this data. This will also allow you to put an emphasis
    on the top movie-producing countries in the world:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您需要根据电影的原产国来表示电影。由于饼状图通常比表格更直观，您决定使用圆环图来表示这些数据。这也将使您强调世界上产出顶级电影的国家：
- en: 'Select the `Donut` sub-type from the `Chart Type` drop-down menu:![Figure 12.24:
    Selecting donut chart sub-type'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`图表类型`下拉菜单中选择`圆环`子类型：![图12.24：选择圆环图子类型
- en: '](img/B15507_12_24.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_24.jpg)'
- en: 'Figure 12.24: Selecting donut chart sub-type'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.24：选择圆环图子类型
- en: 'Click and drag the `countries` field to the `Label` channel, as in the following screenshot:![Figure
    12.25: Dragging the countries field to the Label channel'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击并将`国家`字段拖动到`标签`通道，如下图所示：![图12.25：将国家字段拖动到标签通道
- en: '](img/B15507_12_25.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_25.jpg)'
- en: 'Figure 12.25: Dragging the countries field to the Label channel'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.25：将国家字段拖动到标签通道
- en: Click on the `CHOOSE METHOD` dropdown and select `Array element by index (index
    = 0)` to choose the first element of the array in all documents. Accept the default
    option for `SORT BY`—that is, `VALUE`.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击`选择方法`下拉菜单，然后选择`按索引选择数组元素（索引=0）`以选择所有文档中数组的第一个元素。接受`排序方式`的默认选项——即`值`。
- en: Note
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Because the `countries` field is a JSON array data type, your best option will
    be an `ARRAY REDUCTION` method, so that Charts will know how to interpret the
    data. In this example, you are focusing on the primary country producer (`index
    = 0`) and ignoring co-producers.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 因为`countries`字段是JSON数组数据类型，您最好的选择将是`数组缩减`方法，这样Charts将知道如何解释数据。在这个例子中，您将专注于主要国家制片商（`索引=0`），并忽略联合制片商。
- en: 'Reduce the number of results (using the `Limit Results` option) to `10`. In
    this way, your pie will have only `10` slices, which will correspond to the top
    10 movie producers:![Figure 12.26: Setting the value of Limit Results to 10'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 减少结果数量（使用`限制结果`选项）到`10`。这样，您的饼图将只有`10`个切片，这将对应于前`10`个电影制片商：![图12.26：将限制结果的值设置为10
- en: '](img/B15507_12_26.jpg)'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_26.jpg)'
- en: 'Figure 12.26: Setting the value of Limit Results to 10'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.26：将限制结果的值设置为10
- en: 'Drag and drop the `title` field into the `Arc` channel and select the option
    of `COUNT` for the `AGGREGATE` dropdown. The circular chart should appear on the
    right side of the screen as follows:![Figure 12.27: Donut chart for the top movie-producing
    countries'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`title`字段拖放到`Arc`通道中，并选择`COUNT`选项作为`聚合`下拉菜单的选项。圆形图表应出现在屏幕右侧，如下所示：![图12.27：顶部电影制片国家的环形图表
- en: '](img/B15507_12_27.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_27.jpg)'
- en: 'Figure 12.27: Donut chart for the top movie-producing countries'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.27：顶部电影制片国家的环形图表
- en: This exercise walked you through the few simple steps needed to build a donut
    or pie chart. Almost any presentation or dashboard contains at least one pie chart
    because of how attractive they look. But attractiveness is not the only reason
    donut charts are so popular. The donut chart is also a powerful tool to represent
    ratios and proportions in visual graphs. The following section will take a look
    at another type of chart, that is, geospatial charts.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 这个练习带您完成了构建环形图或饼图所需的几个简单步骤。几乎任何演示文稿或仪表板都包含至少一个饼图，因为它们看起来很吸引人。但吸引力并不是环形图如此受欢迎的唯一原因。环形图也是在视觉图表中表示比率和比例的强大工具。接下来的部分将介绍另一种类型的图表，即地理空间图表。
- en: Geospatial Charts
  id: totrans-202
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 地理空间图表
- en: Geospatial charts are a special category of charts wherein geographical data
    is the main ingredient for building the graph. The simplest definition of geographical
    (or geospatial) data is that it contains information about a specific location
    on the planet. The location details are pinpointed on a map to build a geospatial
    chart.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 地理空间图表是一种特殊类别的图表，其中地理数据是构建图表的主要成分。地理（或地理空间）数据的最简单定义是它包含有关地球上特定位置的信息。位置细节被标在地图上以构建地理空间图表。
- en: 'Geospatial information can be specific or more general. The following are a
    few examples of geospatial data that can be mapped easily using a map engine,
    such as Google Maps:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 地理空间信息可以是具体的或更一般的。以下是一些可以使用地图引擎（如Google Maps）轻松映射的地理空间数据的示例：
- en: Precise longitude and latitude coordinates
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 精确的经度和纬度坐标
- en: An address that can be mapped using a map engine
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以使用地图引擎映射的地址
- en: Broader locations such as cities, regions, or countries
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更广泛的位置，如城市、地区或国家
- en: For example, say that we have a database that contains information about cars.
    The main database collection contains millions of documents about cars, such as
    the model, odometer details, and other attributes. A few other attributes will
    also describe the physical address where the vehicle is registered. That information
    can then be used to build a geospatial chart using a city map.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设我们有一个包含有关汽车信息的数据库。主数据库集合包含数百万个关于汽车的文档，如型号、里程表细节和其他属性。还有一些其他属性将描述车辆注册的物理地址。然后可以使用该信息构建使用城市地图的地理空间图表。
- en: 'There are a few chart sub-types for geospatial charts as follows:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 地理空间图表有几种子类型，如下所示：
- en: '`Choropleth` charts: This chart shows colored geographical areas, such as regions
    and countries. This type of chart is less specific and, in general, is useful
    for high-level aggregations—for example, a chart that displays the total number
    of COVID-19 cases per country.'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Choropleth`图表：此图表显示着色的地理区域，如地区和国家。这种类型的图表不太具体，通常用于高级别的聚合，例如显示每个国家的COVID-19病例总数的图表。'
- en: '`Scatter` charts: This chart requires a precise address or location. The chart
    marks the location with a dot or a small circle on the map. This chart is useful
    if we want to display a chart with a relatively small number of precise locations.'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`散点`图表：此图表需要精确的地址或位置。图表在地图上用一个点或一个小圆圈标记位置。如果我们想要显示具有相对较少的精确位置的图表，这个图表是有用的。'
- en: '`Heatmap` charts: A heatmap displays colors with different intensities on a
    map. A higher intensity corresponds to a higher density of database entities in
    that location. Heatmap charts are useful to display large numbers of objects on
    a map, where users are more interested in density rather than a precise location.'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`热力图`图表：热力图在地图上显示不同强度的颜色。更高的强度对应于该位置的数据库实体的更高密度。热力图图表适用于在地图上显示大量对象的情况，用户更关注密度而不是精确位置。'
- en: In the next section, you will complete an exercise using the `sample_mflix`
    database, which contains sample geospatial information to further practice using
    geo-point information in a new geospatial chart.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，您将完成一个练习，使用包含样本地理空间信息的`sample_mflix`数据库，以进一步练习在新的地理空间图表中使用地理点信息。
- en: 'Exercise 12.04: Creating a Geospatial Chart'
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12.04：创建地理空间图表
- en: 'The purpose of this exercise is to create a geospatial chart that represents
    a map of all movie theaters located in the United States of America. You will
    use the `theaters` collection to map geographical data:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 本练习的目的是创建一个地理空间图表，代表美利坚合众国所有电影院的地图。您将使用`theaters`集合来映射地理数据：
- en: 'For `Data Source`, choose `sample_mflix.theaters`:![Figure 12.28: Selecting
    sample_mflix.theaters as the data source'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于`数据源`，选择`sample_mflix.theaters`：![图12.28：选择sample_mflix.theaters作为数据源
- en: '](img/B15507_12_28.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_28.jpg)'
- en: 'Figure 12.28: Selecting sample_mflix.theaters as the data source'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.28：选择sample_mflix.theaters作为数据源
- en: 'Select the `Geospatial` chart and, from the sub-type categories, select `Heatmap`:![Figure
    12.29: Selecting Heatmap from the list of geospatial chart sub-types'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择`地理空间`图表，并从子类型类别中选择`热力图`：![图12.29：从地理空间图表子类型列表中选择热力图
- en: '](img/B15507_12_29.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_29.jpg)'
- en: 'Figure 12.29: Selecting Heatmap from the list of geospatial chart sub-types'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.29：从地理空间图表子类型列表中选择热力图
- en: 'Click on the `geo` field and drag it into the `Coordinates` encoding channel:![Figure
    12.30: Dragging the geo field into the Coordinates encoding channel'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“geo”字段，将其拖放到“坐标”编码通道中：![图12.30：将geo字段拖放到坐标编码通道中
- en: '](img/B15507_12_30.jpg)'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_30.jpg)'
- en: 'Figure 12.30: Dragging the geo field into the Coordinates encoding channel'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.30：将geo字段拖放到坐标编码通道中
- en: 'Next, click on the `theatreId` field and drag it into the `Intensity` channel:![Figure
    12.31: Dragging theatreId field into the Intensity channel'
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击“theatreId”字段，将其拖放到“强度”通道中：![图12.31：将theatreId字段拖放到强度通道中
- en: '](img/B15507_12_31.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_31.jpg)'
- en: 'Figure 12.31: Dragging theatreId field into the Intensity channel'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.31：将theatreId字段拖放到强度通道中
- en: When switching to the `Heatmap` chart type, you should notice an immediate chart
    update with color areas, instead of dots—with red intensity around large US cities.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 切换到`热力图`图表类型时，您应该注意到立即出现的彩色区域图表更新，而不是点状图表——在美国大城市周围的红色强度。
- en: 'The USA map should appear on the right side of the window and will show the
    theaters'' density using different color gradients. The color coding is displayed
    on the right side of the chart. The highest density of movie theaters (around
    New York City) will appear in red on the map (see *Figure 12.32*):'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 美国地图应该出现在窗口的右侧，并将使用不同的颜色渐变显示剧院的密度。颜色编码显示在图表的右侧。电影院的最高密度（大约在纽约市附近）将显示为地图上的红色（见*图12.32*）：
- en: '![Figure 12.32: Heatmap chart'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.32：热力图图表'
- en: '](img/B15507_12_32.jpg)'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_32.jpg)'
- en: 'Figure 12.32: Heatmap chart'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.32：热力图图表
- en: In this exercise, you practiced building a geospatial chart of all movie theaters
    in the USA. You started with data analysis to see whether the database information
    was suitable for presenting via a geospatial chart. Once data is available in
    the MongoDB database, building a chart is relatively easy.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您练习了构建美国所有电影院的地理空间图表。您首先进行数据分析，以查看数据库信息是否适合通过地理空间图表进行呈现。一旦数据在MongoDB数据库中可用，构建图表就相对容易。
- en: Complex Charts
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 复杂图表
- en: In previous sections, you saw how easy it is to use MongoDB Charts in Atlas.
    While the user interface is very intuitive and easy to use, it is also very powerful.
    There are many options available in MongoDB Charts so that data from the database
    can be preprocessed, grouped, and displayed in various ways. We'll take a look
    at more advanced configuration topics in this section.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的章节中，您已经看到了在Atlas中使用MongoDB Charts是多么容易。虽然用户界面非常直观和易于使用，但它也非常强大。MongoDB Charts中有许多选项，可以对数据库中的数据进行预处理、分组和以各种方式显示。在本节中，我们将看一些更高级的配置主题。
- en: Preprocessing and Filtering Data
  id: totrans-236
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据预处理和过滤
- en: As discussed previously, charts access the database through data sources that
    are defined in Charts. By default, all documents from a database collection are
    selected to build a new chart. Moreover, the data fields in Charts will inherit
    the original database JSON document data format.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，图表通过在Charts中定义的数据源访问数据库。默认情况下，会选择数据库集合中的所有文档来构建新的图表。此外，Charts中的数据字段将继承原始数据库JSON文档的数据格式。
- en: Also note that a data source cannot alter or modify the database. In a real-life
    scenario, it happens quite often that the data format is not ideal for presenting
    via a chart. The data must be prepared, or the data format needs to be altered
    in some way before it is ready to be used for our chart. This category of data
    preparation for plotting is called preprocessing.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 还要注意，数据源不能改变或修改数据库。在现实生活中，经常发生数据格式不适合通过图表进行呈现的情况。数据必须经过准备，或者数据格式在使用图表之前需要以某种方式进行修改。这种用于绘图的数据准备类别称为预处理。
- en: 'Data preprocessing includes the following:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 数据预处理包括以下内容：
- en: '**Data filtering**: Filtering the data such that only certain documents are
    selected'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据过滤**：过滤数据，只选择某些文档'
- en: '**Data type change**: Modifying the data type so that it fits the Chart Builder
    better'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据类型更改**：修改数据类型，使其更适合图表生成器'
- en: '**Adding new fields**: Adding custom fields that do not exist in the MongoDB database'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加新字段**：添加在MongoDB数据库中不存在的自定义字段'
- en: Filtering Data
  id: totrans-243
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据过滤
- en: Data filtering allows users to select only a subset of documents from a MongoDB
    collection. Sometimes, the database collection is just too large, which makes
    the operation in the Chart Builder slower and less effective. One of the ways
    this can be overcome is to sample the data. Another method is to simply filter
    the data based on some categories so that only a subset of documents is considered
    for the chart.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 数据过滤允许用户仅选择来自MongoDB集合的子集文档。有时，数据库集合太大，这使得图表生成器的操作变得更慢、更不有效。克服这个问题的一种方法是对数据进行抽样。另一种方法是根据某些类别过滤数据，以便仅考虑图表的子集文档。
- en: 'There are a few ways in which a user can control the number of documents processed
    in a chart. These are listed in the following table:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以通过以下表中列出的几种方式控制图表中处理的文档数量。
- en: '![Figure 12.33: Ways in which a user can control the number'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.33：用户可以控制文档数量的方式'
- en: of documents processed in a chart
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 的文档数量
- en: '](img/B15507_12_33.jpg)'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_33.jpg)'
- en: 'Figure 12.33: Ways in which a user can control the number of documents processed
    in a chart'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.33：用户可以控制图表中处理的文档数量的方式
- en: Note
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: It is recommended that you choose one filter method that is the most appropriate
    for the chart's requirements and use just that filter. Mixing two or three filtering
    methods into the same chart could lead to confusion and should be avoided.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 建议选择最适合图表要求的一个过滤器方法，并只使用该过滤器。将两种或三种过滤方法混合到同一个图表中可能会导致混乱，应该避免。
- en: 'Except for the **Filter Tab** method, which is a part of the UI, all other
    methods require JavaScript code to define the filter. The query syntax was presented
    in detail in *Chapter 4*, *Querying Documents*. The same format of querying can
    be used in Charts too. For example, to define a filter for all Italian or French
    movies released after 1999, the following JSON query can be written:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 除了**Filter Tab**方法是UI的一部分外，所有其他方法都需要使用JavaScript代码来定义过滤器。查询语法在*第4章*的*查询文档*中有详细介绍。在Charts中也可以使用相同的查询格式。例如，要为所有在1999年后发布的意大利或法国电影定义过滤器，可以编写以下JSON查询：
- en: '[PRE0]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Once this query is entered into the `Query` bar, the `Apply` button should
    be clicked, as shown in the following screenshot:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦将此查询输入到`Query`栏中，应单击`Apply`按钮，如下截图所示：
- en: '![Figure 12.34: Query bar example screenshot'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.34：查询栏示例截图'
- en: '](img/B15507_12_34.jpg)'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_34.jpg)'
- en: 'Figure 12.34: Query bar example screenshot'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.34：查询栏示例截图
- en: Note
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Filtering documents may lead to a delayed chart response, especially when working
    with large databases. To help with performance, you can create indexes on collection
    fields that are involved in filter expressions, as seen in *Chapter 9*, *Performance*.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 过滤文档可能会导致图表响应延迟，特别是在处理大型数据库时。为了提高性能，可以在涉及过滤表达式的集合字段上创建索引，如*第9章*的*性能*中所示。
- en: Adding Custom Fields
  id: totrans-260
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加自定义字段
- en: Charts allows users to add custom fields that can be used to build charts. Sometimes
    raw data from MongoDB does not offer the right attributes for creating a new chart
    and it becomes important to add custom fields. Most of these custom fields are
    either derived or calculated using the source database values.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: Charts允许用户添加自定义字段，用于构建图表。有时，来自MongoDB的原始数据并不提供创建新图表所需的正确属性，因此添加自定义字段变得很重要。这些自定义字段大多是使用源数据库值派生或计算出来的。
- en: 'Custom fields can be added by clicking the `+ Add Field` button in the `Fields`
    area of the Chart Builder, as shown in the following screenshot:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过单击图表生成器的`Fields`区域中的`+ Add Field`按钮来添加自定义字段，如下截图所示：
- en: '![Figure 12.35: The Add Field button in the Fields area'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.35：字段区域中的添加字段按钮'
- en: '](img/B15507_12_35.jpg)'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_35.jpg)'
- en: 'Figure 12.35: The Add Field button in the Fields area'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.35：字段区域中的添加字段按钮
- en: 'There are two types of fields that can be added:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 可以添加两种类型的字段：
- en: '`MISSED`: This option is used to add a field that is missing from the list
    of fields. For example, imagine a new field has been added to the application
    and only a few documents in the database have the new field. In such a case, MongoDB
    Charts can add the missing field to the initial load.'
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MISSED`：此选项用于添加在字段列表中缺失的字段。例如，想象一下，应用程序中添加了一个新字段，数据库中只有少数文档有这个新字段。在这种情况下，MongoDB
    Charts可以将缺失的字段添加到初始加载中。'
- en: '`CALCULATED`: This is used to add a new field that does not exist in the collection.
    For example, the source database for a ride-sharing app can have fields for the
    number of hours and the tariff per hour. However, the total value (hours multiplied
    by the tariff) might not be in the database. Therefore, we can add a new custom
    field that is calculated from other values in the database.'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CALCULATED`：用于添加集合中不存在的新字段。例如，共享乘车应用程序的源数据库可以有关于小时数和每小时费率的字段。但是，总值（小时数乘以费率）可能不在数据库中。因此，我们可以添加一个从数据库中的其他值计算出来的新自定义字段。'
- en: Note
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: It is not possible to add a `MISSED` field if the field does not exist in any
    collection document. In this case, you need to add/update the collection document
    first.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 如果字段在任何集合文档中不存在，则无法添加`MISSED`字段。在这种情况下，您需要先添加/更新集合文档。
- en: 'To better understand this concept, consider this practical example. In this
    example, you will add a new calculated field in Charts. Perform the following
    steps:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解这个概念，考虑这个实际例子。在这个例子中，您将在Charts中添加一个新的计算字段。执行以下步骤：
- en: 'Click on the `Add Field` button, and then click on the `CALCULATED` button,
    as in the following screenshot:![Figure 12.36: Adding a new field'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击`Add Field`按钮，然后单击`CALCULATED`按钮，如下截图所示：![图12.36：添加新字段
- en: '](img/B15507_12_36.jpg)'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_36.jpg)'
- en: 'Figure 12.36: Adding a new field'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.36：添加新字段
- en: Type the new field name in as `adjusted_rating`.
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`adjusted_rating`中输入新字段名称。
- en: Type in the formula for calculating the total value, that is, `tomatoes.viewer.rating
    * 1.2`.
  id: totrans-276
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入计算总值的公式，即`tomatoes.viewer.rating * 1.2`。
- en: Click on the `Save` button. You should now be able to see the new calculated
    field and use it in charts, just like any other data-type attribute.
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击`Save`按钮。现在应该能够看到新计算字段并在图表中使用它，就像任何其他数据类型属性一样。
- en: Note
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Calculated fields are not saved in the database. Their scope is only within
    the MongoDB Chart Builder. Moreover, a calculated field can be deleted from the
    `Fields` list.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 计算字段不会保存在数据库中。它们的范围仅限于MongoDB图表生成器内。此外，可以从`Fields`列表中删除计算字段。
- en: Changing Fields
  id: totrans-280
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 更改字段
- en: 'Sometimes, the data from the database is not the right data type. In such cases,
    MongoDB Charts allows users to change fields to a data type appropriate for chart
    plotting. For example, a chart channel may require data to be in numeric format
    to aggregate `SUM` or `AVERAGE`. To change a field, drag the mouse pointer over
    the field name in the `Fields` list (on the left side of the `Chart Builder` window):'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，从数据库中获取的数据不是正确的数据类型。在这种情况下，MongoDB图表允许用户将字段更改为适合图表绘制的数据类型。例如，图表通道可能需要数据以数字格式进行聚合“求和”或“平均”。要更改字段，请将鼠标指针拖动到“字段”列表中的字段名称上（在“图表构建器”窗口的左侧）：
- en: '![Figure 12.37: Selecting Convert type from the fullplot field'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.37：从fullplot字段中选择转换类型'
- en: '](img/B15507_12_37.jpg)'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_37.jpg)'
- en: 'Figure 12.37: Selecting Convert type from the fullplot field'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.37：从fullplot字段中选择转换类型
- en: Upon clicking on the `...` menu and selecting the `Convert type` option (the
    only one available), a list of JSON data types will be displayed. Then, you can
    choose the desired data type and click on the `SAVE` button.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 单击“...”菜单并选择“转换类型”选项（唯一可用的选项），将显示JSON数据类型列表。然后，您可以选择所需的数据类型，然后单击“保存”按钮。
- en: 'For example, if you want to change the `metacritic` numerical field (`#`) into
    a string field (`A`), you can click on `metacritic` and a new `Convert type` window
    will appear as shown here:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果要将“metacritic”数字字段（`#`）更改为字符串字段（`A`），可以单击“metacritic”，然后将显示一个新的“转换类型”窗口，如下所示：
- en: '![Figure 12.38: Convert type window'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.38：转换类型窗口'
- en: '](img/B15507_12_38.jpg)'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_38.jpg)'
- en: 'Figure 12.38: Convert type window'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.38：转换类型窗口
- en: Note that changing a field's data type will have an effect only on the current
    chart and will not change the data type in the database.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，更改字段的数据类型只会对当前图表产生影响，并不会更改数据库中的数据类型。
- en: Note
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: In the most recent version of Charts, there is another option in the context
    field menu [`…`], which is called `lookup`. The `lookup` field allows us to build
    a chart by joining a second collection from the same database. More details on
    how to join collections were given in *Chapter 4*, *Querying Documents*.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 在最新版本的图表中，上下文字段菜单[`…`]中还有另一个选项，称为“查找”。 “查找”字段允许我们通过连接同一数据库中的第二个集合来构建图表。有关如何连接集合的详细信息，请参阅*第4章*，*查询文档*。
- en: Channels
  id: totrans-293
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通道
- en: The encoding channels are one of the most important aspects of data visualization.
    The channel decides how the data is visualized in the chart. Users can get confusing
    charts or totally unexpected results if they select the wrong channel type. Therefore,
    a proper understanding of encoding channels is essential for efficient chart building
    and data visualization.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 编码通道是数据可视化中最重要的方面之一。通道决定了数据在图表中的可视化方式。如果选择了错误的通道类型，用户可能会得到混乱的图表或完全意想不到的结果。因此，对编码通道的正确理解对于高效的图表构建和数据可视化至关重要。
- en: 'As shown in previous examples, the encoding channels lie under the `Encode`
    tab in the Chart Builder, just under the chart sub-type selection buttons:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的示例所示，编码通道位于图表构建器的“编码”选项卡下方，就在图表子类型选择按钮的下方：
- en: '![Figure 12.39: Encoding channels'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.39：编码通道'
- en: '](img/B15507_12_39.jpg)'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_39.jpg)'
- en: 'Figure 12.39: Encoding channels'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.39：编码通道
- en: Each encoding channel has a name and a type. The channel name defines the target
    in the graph—that is, the end to which the channel will be used. For example,
    the `X Axis` channel name indicates that the channel is providing the values for
    the horizontal axis of the graph. It is clear in this case that we are going to
    have a Cartesian bi-dimensional chart. The channel type defines what type of data
    is expected as the channel input. Finding the right data type for the channel
    input is important. Also, as you have probably noticed by now, not all data types
    can be accepted as channel input.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 每个编码通道都有一个名称和类型。通道名称定义了图表中的目标，即通道将用于的终点。例如，“X轴”通道名称表示该通道提供了图表的水平轴的值。在这种情况下，我们将会得到一个笛卡尔二维图表是很清楚的。通道类型定义了通道输入所期望的数据类型。找到通道输入的正确数据类型很重要。另外，您现在可能已经注意到，并非所有数据类型都可以被接受为通道输入。
- en: 'There are four channel types available in MongoDB Charts, as listed in the
    following table:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: MongoDB图表中有四种通道类型，如下表所示：
- en: '![Figure 12.40: List of channel types in MongoDB Charts'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.40：MongoDB图表中的通道类型列表'
- en: '](img/B15507_12_40.jpg)'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_40.jpg)'
- en: 'Figure 12.40: List of channel types in MongoDB Charts'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.40：MongoDB图表中的通道类型列表
- en: Note
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: It is possible to assign channel values from sub-documents or array fields in
    a JSON document. In this case, MongoDB charts will ask you to identify the element
    that is considered for the channel encoding—for example, array index `[0]` (which
    points to the first element in the array, for each document).
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 可以从JSON文档中的子文档或数组字段中分配通道值。在这种情况下，MongoDB图表将要求您标识用于通道编码的元素，例如，数组索引`[0]`（指向每个文档中数组的第一个元素）。
- en: Aggregation and Binning
  id: totrans-306
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 聚合和分箱
- en: Data in one channel is often combined with a category data type channel so that
    it can calculate aggregate values for each category. For example, we can `SUM`
    aggregate all awards for French films. In the Chart Builder, when a field is dragged
    and dropped into an aggregation channel, it is assumed that the values will be
    aggregated in the chart. The Chart Builder does this transparently without requiring
    you to write the code for an aggregation pipeline.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 一个通道中的数据通常与类别数据类型通道结合在一起，以便它可以计算每个类别的聚合值。例如，我们可以对法国电影的所有奖项进行“求和”聚合。在图表构建器中，当将字段拖放到聚合通道中时，假定值将在图表中进行聚合。图表构建器会在不需要您编写聚合管道代码的情况下透明地执行此操作。
- en: The aggregation type will depend on the data type that we provide on the channel
    input. For example, it is not possible to `SUM` if the data type provided to the
    channel is text.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 聚合类型将取决于我们在通道输入上提供的数据类型。例如，如果通道提供的数据类型是文本，则不可能进行“求和”操作。
- en: 'There are a few types of aggregations, as listed in the following table:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种聚合类型，如下表所示：
- en: '![Figure 12.41: Types of aggregations'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.41：聚合类型'
- en: '](img/B15507_12_41.jpg)'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_41.jpg)'
- en: 'Figure 12.41: Types of aggregations'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.41：聚合类型
- en: Note
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Some channels can have the `Series` type. This option allows users to add a
    second dimension to a chart, either unique or binning, by grouping data in a range
    of values.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 一些通道可以有“系列”类型。这个选项允许用户向图表添加第二个维度，无论是唯一的还是分组的，都可以通过将数据分组在一系列值中来实现。
- en: 'Exercise 12.05: Binning Values for a Bar Graph'
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12.05：为柱状图分组值
- en: 'In this exercise, you will build another bar chart that shows movies produced
    in Italy. In this graph, you need to aggregate data per movie release year. Also,
    the chart should only consider movies released after 1970\. To build this chart,
    you need to filter the documents and choose the encoding fields for representing
    movies aggregated per year. The following steps will help you complete this exercise:'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将构建另一个柱状图，显示在意大利制作的电影。在这个图表中，您需要按电影发行年份对数据进行聚合。此外，图表应该只考虑1970年后发布的电影。为了构建这个图表，您需要过滤文档并选择编码字段来表示按年份聚合的电影。以下步骤将帮助您完成这个练习：
- en: From the dashboard window, click on `Add Chart`, and then choose the `Bar` chart
    type.
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从仪表板窗口中，单击“添加图表”，然后选择“柱状图”类型。
- en: 'Drag and drop the `year` field to the categorical channel `Y Axis`. The chart
    builder will detect that there are too many categorical distinct values (years)
    and will propose binning them (grouping them in 10-year periods). Now, toggle
    `Binning` on and for `Bin Size`, enter the value `10` (see the following figure):![Figure
    12.42: Entering 10 as the value for Bin Size'
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将“年份”字段拖放到分类通道“Y轴”上。图表生成器将检测到有太多的分类不同值（年份），并建议对它们进行分组（将它们分组为10年期）。现在，切换“分组”并为“分组大小”输入值“10”（见下图）：![图12.42：输入10作为分组大小的值
- en: '](img/B15507_12_42.jpg)'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_42.jpg)'
- en: 'Figure 12.42: Entering 10 as the value for Bin Size'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.42：输入10作为分组大小的值
- en: Drag and drop the `title` field to the categorical channel `X Axis`. Then, choose
    the `AGGREGATE` function option `COUNT` and click the `Filter` tab.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将“标题”字段拖放到分类通道“X轴”上。然后，选择“聚合”函数选项“计数”并单击“筛选”选项卡。
- en: Drag and drop the `countries` field to the chart filter.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将“国家”字段拖放到图表筛选器中。
- en: 'Select `Italy` from the chart filter as follows:![Figure 12.43: Selecting Italy
    from the list of countries'
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如下所示，从图表筛选器中选择“意大利”：![图12.43：从国家列表中选择意大利
- en: '](img/B15507_12_43.jpg)'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_43.jpg)'
- en: 'Figure 12.43: Selecting Italy from the list of countries'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.43：从国家列表中选择意大利
- en: 'Drag and drop the second field, `year`, to the chart filter, and set `Min`
    to `1970` as follows:![Figure 12.44: Selecting 1970 as the Min value for the year
    field'
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将第二个字段“年份”拖放到图表筛选器中，并将“最小值”设置为“1970”，如下所示：![图12.44：选择1970作为年份字段的最小值
- en: '](img/B15507_12_44.jpg)'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_44.jpg)'
- en: 'Figure 12.44: Selecting 1970 as the Min value for the year field'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.44：将1970年作为年份字段的最小值
- en: 'Edit the chart title to `Movies from Italy`, as follows:![Figure 12.45: The
    final Movies from Italy bar chart'
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将图表标题编辑为“意大利电影”，如下所示：![图12.45：最终意大利电影柱状图
- en: '](img/B15507_12_45.jpg)'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_45.jpg)'
- en: 'Figure 12.45: The final Movies from Italy bar chart'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.45：意大利电影最终柱状图
- en: Save the chart.
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存图表。
- en: In this exercise, you created a chart using both filtering and aggregation techniques
    in a simple manner and without writing any JavaScript code. The new chart is saved
    on the dashboard, so it can be loaded and edited later. The MongoDB Chart Builder
    has an efficient web GUI, which helps users to create complex charts. Besides
    being simple to use, the interface also has numerous options and configuration
    items you can choose from.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您以简单的方式使用过滤和聚合技术创建了一个图表，而且没有编写任何JavaScript代码。新图表已保存在仪表板上，因此可以在以后加载和编辑。MongoDB图表生成器具有高效的Web
    GUI，可帮助用户创建复杂的图表。除了易于使用外，界面还有许多选项和配置项可供选择。
- en: Integration
  id: totrans-334
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 集成
- en: So far, the topics in this chapter have focused on describing the functionality
    of MongoDB Charts PaaS. We have learned that users can easily build dashboards
    and charts using data sources from the Atlas cloud database. The last topic of
    this chapter addresses the end result of a MongoDB chart—that is, how the dashboards
    and charts can be used for presentations and applications.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，本章的主题集中在描述MongoDB图表PaaS的功能上。我们已经了解到用户可以轻松地使用来自Atlas云数据库的数据源构建仪表板和图表。本章的最后一个主题涉及MongoDB图表的最终结果，即仪表板和图表如何用于演示和应用程序。
- en: One option is to save the charts as images and integrate them into MS PowerPoint
    presentations or to publish them as web page content. While this option is very
    simple, it has one main disadvantage in that the chart image is static. Therefore,
    the chart is not updated when the database is updated.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 一种选择是将图表保存为图像并将其集成到MS PowerPoint演示文稿中，或将其发布为网页内容。虽然这个选项非常简单，但它有一个主要缺点，即图表图像是静态的。因此，当数据库更新时，图表不会更新。
- en: Another option is to use MongoDB Charts as a presentation tool. This option
    guarantees that charts are refreshed and rendered each time the database is updated.
    Nevertheless, this option is probably not ideal, as the content is limited to
    the MongoDB Charts user interface and cannot be easily integrated.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选择是将MongoDB图表用作演示工具。这个选项保证了图表在数据库更新时会刷新和渲染。然而，这个选项可能不是理想的，因为内容仅限于MongoDB图表用户界面，无法轻松集成。
- en: Fortunately, MongoDB Charts has an option to publish charts as dynamic content
    for web pages and web applications. It can also be easily integrated into an MS
    PowerPoint presentation. This integration feature is called **Embedded Charts**
    and allows charts to be automatically refreshed after a pre-established time interval.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，MongoDB图表有一个选项，可以将图表发布为网页和Web应用程序的动态内容。它也可以轻松集成到MS PowerPoint演示文稿中。这个集成功能称为**嵌入式图表**，允许图表在预先设定的时间间隔后自动刷新。
- en: Embedded Charts
  id: totrans-339
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 嵌入式图表
- en: Embedding charts is an option you can use to share charts outside of the MongoDB
    Charts tool by providing web links that can be used in data presentations and applications.
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 嵌入图表是一种选项，您可以使用它来通过提供可用于数据演示和应用程序的网页链接来共享MongoDB Charts工具之外的图表。
- en: 'There are three methods to share charts:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 有三种方法可以共享图表：
- en: '`Unauthenticated`: With this method, users are not required to authenticate
    themselves to access the chart. They only need to have the access link. This option
    is appropriate for public data or information that is not sensitive.'
  id: totrans-342
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`未经身份验证`：使用此方法，用户无需进行身份验证即可访问图表。他们只需要访问链接。这个选项适用于公共数据或不敏感的信息。'
- en: '`Authenticated`: With this method, users are required to authenticate themselves
    to access the chart. This option is appropriate for charts with non-public data.'
  id: totrans-343
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`已验证`：使用此方法，用户需要进行身份验证才能访问图表。这个选项适用于具有非公开数据的图表。'
- en: '`Verified Signature`: With this method, users are required to provide a signature
    key to access the chart. This option is appropriate for sensitive data and requires
    additional configuration and code to verify the signature.'
  id: totrans-344
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`验证签名`：使用此方法，用户需要提供签名密钥才能访问图表。这个选项适用于敏感数据，需要额外的配置和代码来验证签名。'
- en: Choosing the method depends on data security requirements and policies. The
    `Unauthenticated` method is acceptable for learning or testing with non-sensitive
    data. In applications with real or sensitive data, the `Verified Signature` method
    should always be used for integration with other applications.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 选择方法取决于数据安全要求和政策。`未经身份验证`方法适用于学习或测试非敏感数据。在具有真实或敏感数据的应用程序中，应始终使用`验证签名`方法与其他应用程序集成。
- en: 'There are a few options for embedded charts, as shown in the screenshot here:'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 如此屏幕截图所示，嵌入图表有几个选项：
- en: '![Figure 12.46: Embed Chart window'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.46：嵌入图表窗口'
- en: '](img/B15507_12_46.jpg)'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_46.jpg)'
- en: 'Figure 12.46: Embed Chart window'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.46：嵌入图表窗口
- en: 'For example, say you want to configure `Unauthenticated` access for users.
    After selecting the `Unauthenticated` option, you can specify the following details:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设您想要为用户配置`未经身份验证`访问。选择`未经身份验证`选项后，您可以指定以下详细信息：
- en: '`User Specified Filters (optional)`: You can specify the fields that are not
    visible for sharing.'
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`用户指定的过滤器（可选）`：您可以指定在共享时不可见的字段。'
- en: '`Auto refresh`: You can specify the time interval at which the chart is automatically
    refreshed.'
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`自动刷新`：您可以指定图表自动刷新的时间间隔。'
- en: '`Theme`: You can specify a `Light` or `Dark` chart theme.'
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`主题`：您可以指定`浅色`或`深色`的图表主题。'
- en: The embedded code is automatically generated and can be copied to the application
    code as you can see from *Figure 12.46*.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 嵌入代码会自动生成，并可以像*图12.46*中所示一样复制到应用程序代码中。
- en: 'Exercise 12.06: Adding Charts to HTML pages'
  id: totrans-355
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12.06：将图表添加到HTML页面
- en: 'In this exercise, you will create a simple HTML report containing embedded
    charts created with MongoDB Atlas Charts. Use the saved chart `Movies from Italy`,
    created in *Exercise 12.05*, *Binning Values for a Bar Graph*:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 在本练习中，您将创建一个包含使用MongoDB Atlas Charts创建的嵌入图表的简单HTML报告。使用在*练习12.05*中创建的保存图表`意大利电影`，*为条形图分箱值*：
- en: As you have done in the preceding sections, enable access to the data source
    by navigating to the `Data Source` tab and select the data source `sample_mflix.movies`.
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与前面的部分一样，通过转到`数据源`选项卡并选择数据源`sample_mflix.movies`来启用对数据源的访问。
- en: Click on the right side of the menu (`…`) and choose `External Sharing Options`.
  id: totrans-358
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击菜单右侧的(`…`)，选择`外部共享选项`。
- en: 'Click `Unauthenticated or Authenticated Access`, and then click on `Save`,
    as shown in the following figure:![Figure 12.47: External Sharing Options screenshot'
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`未经身份验证或已验证访问`，然后点击`保存`，如下图所示：![图12.47：外部共享选项截图
- en: '](img/B15507_12_47.jpg)'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_47.jpg)'
- en: 'Figure 12.47: External Sharing Options screenshot'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.47：外部共享选项截图
- en: Go to the `Dashboards` tab and open the `Movies` dashboard. You should be able
    to see charts created and saved, including the `Movies from Italy` bar chart.
  id: totrans-362
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到`仪表板`选项卡，打开`电影`仪表板。您应该能够看到创建和保存的图表，包括`意大利电影`条形图。
- en: 'Click on the right side of the chart (`…`) and then click `Embed Chart` as
    shown in the following figure:![Figure 12.48: Selecting the Embed Chart option'
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击图表右侧的(`…`)，然后点击`嵌入图表`，如下图所示：![图12.48：选择嵌入图表选项
- en: '](img/B15507_12_48.jpg)'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_48.jpg)'
- en: 'Figure 12.48: Selecting the Embed Chart option'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.48：选择嵌入图表选项
- en: 'The `Embed Chart` window will appear as can be seen in the following figure:'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: '`嵌入图表`窗口将如下图所示出现：'
- en: '![Figure 12.49: Embed Chart page'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.49：嵌入图表页面'
- en: '](img/B15507_12_49.jpg)'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_49.jpg)'
- en: 'Figure 12.49: Embed Chart page'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.49：嵌入图表页面
- en: 'Click the `Unauthenticated` tab and change the settings as follows:'
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`未经身份验证`选项卡，并按以下设置更改设置：
- en: '`Auto refresh`: `1 minute`'
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: '`自动刷新`：`1分钟`'
- en: '`Theme`: `Light`'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: '`主题`：`浅色`'
- en: Copy the `EMBED CODE` content that appears at the bottom of the page.
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制出现在页面底部的`嵌入代码`内容。
- en: Notes
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 注
- en: Users can interact with the embedded chart by selecting filters. To activate
    this optional feature, click on `User Specified Filters (optional)` and select
    the field that can be used to determine the chart filters. The JavaScript SDK
    allows integrating MongoDB charts using a coding library. This option is developer-driven,
    and it is not presented in this chapter.
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以通过选择过滤器与嵌入的图表进行交互。要激活此可选功能，请点击`用户指定的过滤器（可选）`，并选择可用于确定图表过滤器的字段。JavaScript
    SDK允许使用编码库集成MongoDB图表。这个选项是由开发人员驱动的，并且在本章中没有介绍。
- en: 'Create a simple HTML page, using a text editor such as Notepad, and save it
    with the `.html` extension:'
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用诸如记事本之类的文本编辑器创建一个简单的HTML页面，并将其保存为`.html`扩展名。
- en: '[PRE1]'
  id: totrans-377
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Now, consider the following line of code:'
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，考虑以下代码行：
- en: '[PRE2]'
  id: totrans-379
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'In its place, add the code copied in *step 7*. The end code result should look
    as follows:'
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在其位置上，添加在*步骤7*中复制的代码。最终代码结果应如下所示：
- en: '[PRE3]'
  id: totrans-381
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Save the Notepad file. Then, open the file using an internet browser, such
    as Google Chrome or Microsoft Edge. The browser should display the page with dynamic
    chart content, as the following screenshot shows:![Figure 12.50: Browser view'
  id: totrans-382
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存记事本文件。然后，使用互联网浏览器（如Google Chrome或Microsoft Edge）打开该文件。浏览器应该显示具有动态图表内容的页面，如下面的屏幕截图所示：![图12.50：浏览器视图
- en: '](img/B15507_12_50.jpg)'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_50.jpg)'
- en: 'Figure 12.50: Browser view'
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.50：浏览器视图
- en: This exercise is a good example of how MongoDB charts can be integrated into
    HTML web pages so that the content is dynamically updated every time the data
    changes. In this case, if the database records are updated and the chart is changed,
    the web page will also be updated after an interval of 1 minute, to reflect the
    changes.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 这个练习是MongoDB图表如何集成到HTML网页中的一个很好的例子，这样内容在数据变化时可以动态更新。在这种情况下，如果数据库记录被更新并且图表被改变，网页也将在1分钟的间隔后更新，以反映这些变化。
- en: In this section, we have discussed the options available for chart presentation
    and integration with external applications. In most business use cases, static
    images are not appropriate for dynamic web content and applications. The `Embed
    Chart` option from MongoDB allows users to integrate charts in presentations and
    web applications. Both secure and non-secure chart publishing options are available.
    However, the secure option should always be used for data-sensitive presentations.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们已经讨论了图表展示和与外部应用集成的选项。在大多数业务用例中，静态图像不适用于动态网页内容和应用程序。MongoDB的`嵌入图表`选项允许用户在演示文稿和Web应用程序中集成图表。安全和非安全的图表发布选项都是可用的。然而，对于数据敏感的演示文稿，应始终使用安全选项。
- en: 'Activity 12.01: Creating a Sales Presentation Dashboard'
  id: totrans-387
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 活动12.01：创建销售演示仪表板
- en: 'In this activity, you will create a new chart with sales statistics from a
    sample database. Specifically, the analysis must help identify sales in Denver,
    Colorado, based on the sales item type. The following steps will help you complete
    this activity:'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个活动中，您将从样本数据库中创建一个新的销售统计图表。具体来说，分析必须帮助确定科罗拉多州丹佛市的销售，基于销售项目类型。以下步骤将帮助您完成此活动：
- en: Create a donut circular chart to plot the top sales aggregated per sales item.
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个甜甜圈图表，以绘制每个销售项目的销售总额。
- en: Create a new data source from the `sample_supplies` database.
  id: totrans-390
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`sample_supplies`数据库创建一个新的数据源。
- en: Filter data so that only documents from Denver stores are considered in the
    report. The chart should display a donut with the top 10 items (by value) and
    should be named `Denver Sales (million $)`.
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 过滤数据，使报告中只考虑来自丹佛商店的文档。图表应显示一个甜甜圈，显示前10个项目（按价值），并应命名为`丹佛销售（百万美元）`。
- en: Use chart label formatting to display the values in millions and interpret the
    data based on the resulting charts.
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用图表标签格式化以显示以百万为单位的值，并根据生成的图表解释数据。
- en: 'The final output should appear as follows:'
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 最终输出应如下所示：
- en: '![Figure 12.51: Sales chart'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: '![图12.51：销售图表'
- en: '](img/B15507_12_51.jpg)'
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15507_12_51.jpg)'
- en: 'Figure 12.51: Sales chart'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.51：销售图表
- en: Note
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The solution for this activity can be found via [this link](B15507_Solution_Final_SZ_ePub.xhtml#_idTextAnchor483).
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 此活动的解决方案可以通过[此链接](B15507_Solution_Final_SZ_ePub.xhtml#_idTextAnchor483)找到。
- en: Summary
  id: totrans-399
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter differed from previous chapters in that it focused on the Charts
    user interface rather than MongoDB programming. The results that can be achieved
    using the Atlas cloud Charts module are impressive, allowing users to focus on
    data rather than programming and presentation.
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 这一章与以往的章节不同，它侧重于图表用户界面而不是MongoDB编程。使用Atlas云图表模块可以实现令人印象深刻的结果，使用户能够专注于数据而不是编程和演示。
- en: There are various chart types and sub-types to choose from, which makes Charts
    both more effective and easier to work with. MongoDB Charts can also be easily
    integrated with other web applications using the `EMBED CODE` option, which is
    an advantage for developers because they do not need to deal with another programming
    module to plot graphs in their applications. In the next chapter, we will look
    at a business use case in which MongoDB will be used for managing the backend.
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 有各种图表类型和子类型可供选择，这使得图表更加有效且更易于使用。MongoDB图表还可以很容易地使用`EMBED CODE`选项与其他Web应用程序集成，这对开发人员来说是一个优势，因为他们不需要处理另一个编程模块来在他们的应用程序中绘制图表。在下一章中，我们将看一个业务用例，其中MongoDB将用于管理后端。
