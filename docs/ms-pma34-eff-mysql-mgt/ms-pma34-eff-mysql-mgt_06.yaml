- en: Chapter 6. Exporting Structure and Data (Backup)
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章。导出结构和数据（备份）
- en: Keeping good backups is crucial to a project. Backups consist of up-to-date
    backups and intermediary snapshots taken during development and production phases.
    The export feature of phpMyAdmin can generate backups, and can also be used to
    send data to other applications.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 保持良好的备份对于项目至关重要。备份包括最新的备份和在开发和生产阶段进行的中间快照。phpMyAdmin的导出功能可以生成备份，并且还可以用于将数据发送到其他应用程序。
- en: Note
  id: totrans-2
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Please note that phpMyAdmin's export feature produces backups on demand and
    it is highly recommended to implement an automatic and scripted backup solution
    which takes backups on a regular schedule. The precise way to implement such a
    solution depends on the server's OS.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，phpMyAdmin的导出功能可以按需生成备份，强烈建议实施自动和脚本化的备份解决方案，定期进行备份。实施这样的解决方案的确切方式取决于服务器的操作系统。
- en: Dumps, backups, and exports
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 转储，备份和导出
- en: Let us first clarify some vocabulary. In MySQL documentation, you will encounter
    the term **dump**, and in other applications, **backup** or **export**. All these
    terms have the same meaning in the phpMyAdmin context.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先澄清一些词汇。在MySQL文档中，您会遇到术语**dump**，在其他应用程序中是**备份**或**导出**。在phpMyAdmin上下文中，所有这些术语都具有相同的含义。
- en: MySQL includes **mysqldump** —a command-line utility that can be used to generate
    export files. But the shell access needed for command-line utilities is not offered
    by every host provider. Also, access to the export feature from within the web
    interface is more convenient. This is why phpMyAdmin offers the export feature
    with more export formats than mysqldump. This chapter will focus on phpMyAdmin's
    export features.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL包括**mysqldump**-一个命令行实用程序，可用于生成导出文件。但并非每个主机提供商都提供命令行实用程序所需的shell访问权限。此外，从Web界面中访问导出功能更加方便。这就是为什么phpMyAdmin提供了比mysqldump更多导出格式的导出功能。本章将重点介绍phpMyAdmin的导出功能。
- en: 'Before starting an export, we must have a clear picture of the intended goal
    of the export. The following questions may be of help:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始导出之前，我们必须清楚地了解导出的预期目标。以下问题可能有所帮助：
- en: Do we need the complete database or just some tables?
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们需要完整的数据库还是只需要一些表？
- en: Do we need just the structure, just the data, or both?
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们只需要结构，只需要数据，还是两者都需要？
- en: Which utility will be used to import back the data?
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将使用哪个实用程序来导入数据？
- en: Do we want only a subset of the data?
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们只需要数据的子集吗？
- en: What is the size of the intended export, and what is the link speed between
    us and the server?
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预期导出的大小是多少，我们和服务器之间的链接速度是多少？
- en: Scope of the export
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 导出的范围
- en: When we click an **Export** link from phpMyAdmin, we can be in one of these
    views or contexts—`Database` view, `Table` view, or `Server` view (more on this
    later in [Chapter 19)](ch19.html "Chapter 19. Administrating the MySQL Server").
    According to the current context, the resulting export's scope will be a complete
    database, a single table, or even a multi-database as in the case of `Server`
    view. We will first explain database exports and all the relevant export types.
    Then we will go on with table and multi-database exports, underlining the difference
    for these modes of exporting.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们从phpMyAdmin点击**导出**链接时，我们可能处于以下视图或上下文之一-`数据库`视图，`表`视图或`服务器`视图（稍后在[第19章]中更多了解此内容））。根据当前上下文，导出的范围将是完整的数据库，单个表，甚至是多个数据库，如`服务器`视图的情况。我们将首先解释数据库导出和所有相关的导出类型。然后我们将继续表和多数据库导出，强调这些导出模式的区别。
- en: Exporting a database
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导出数据库
- en: 'In the `Database` view, click on the **Export** link. Since version 3.4.0,
    the default export panel appears as shown in the following screenshot:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在`数据库`视图中，点击**导出**链接。自3.4.0版本以来，默认的导出面板如下截图所示：
- en: '![Exporting a database](img/7782_06_01.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![导出数据库](img/7782_06_01.jpg)'
- en: By default, `$cfg['Export']['method']` is set to`'quick'` and `$cfg['Export']['format']`
    is set to`'sql'`. Usability tests show that the most common goal of exporting
    is to produce a complete backup in SQL format and save it on our workstation;
    this is accomplished by just clicking on **Go**.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，`$cfg['Export']['method']`设置为`'quick'`，`$cfg['Export']['format']`设置为`'sql'`。可用性测试表明，导出的最常见目标是以SQL格式生成完整的备份并将其保存在我们的工作站上；只需点击**Go**即可完成。
- en: Other values for `$cfg['Export']['method']` are`'custom'`, which would show
    the detailed export options, and `'custom-no-form'` which would also show the
    detailed options but without the possibility of selecting a quick export—this
    being the behavior of versions prior to 3.4.0.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '`$cfg[''Export''][''method'']`的其他值是`''custom''`，它将显示详细的导出选项，以及`''custom-no-form''`，它也会显示详细选项，但不会显示选择快速导出的可能性-这是3.4.0版本之前的行为。'
- en: 'In custom mode, sub-panels are shown. The **Table(s), Output**, and **Format**
    sub-panels occupy the top part of the page. The **Format-specific options** sub-panel
    varies in order to show the options for the export format chosen. Following screenshot
    shows the SQL format panel:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在自定义模式下，会显示子面板。**表，输出**和**格式**子面板占据页面顶部。**特定格式选项**子面板会变化，以显示所选择的导出格式的选项。以下截图显示了SQL格式面板：
- en: '![Exporting a database](img/7782_06_02.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![导出数据库](img/7782_06_02.jpg)'
- en: The Table(s) sub-panel
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 表子面板
- en: This sub-panel contains a table selector, from which we choose the tables that
    we want. By default, all tables are selected and we can use the **Select All /
    Unselect All** links to change our choice.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 该子面板包含一个表选择器，我们可以从中选择要导出的表。默认情况下，所有表都被选中，我们可以使用**全选/取消全选**链接来更改我们的选择。
- en: The Output sub-panel
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 输出子面板
- en: The default behavior is to transmit the export file via HTTP (the **Save output
    to a file** radio button being selected). This triggers a **Save** dialog into
    the browser, which ultimately saves the file on our local machine. An alternative
    option would have been to select **View output as text**, which can be done as
    a testing procedure, provided that the exported data is of a reasonable size.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 默认行为是通过HTTP传输导出文件（选择**将输出保存到文件**单选按钮）。这会触发浏览器中的**保存**对话框，最终将文件保存在我们的本地机器上。另一种选择是选择**以文本形式查看输出**，这可以作为测试过程，前提是导出的数据是合理大小。
- en: File name template
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文件名模板
- en: 'The name of the proposed file will obey the **File name template** field. In
    this template, we can use the special **@SERVER@, @DATABASE@**, and **@TABLE@**
    placeholders. These placeholders will be replaced by the current server, database,
    or table name (for a single-table export). Note that there is one "at sign" character
    before and after the words. We can also use any special character from the PHP
    `strftime` function; this is useful for generating an export file based on the
    current date or hour. Finally, we can put any other string of characters (not
    part of the `strftime` special characters), which will be used literally. The
    file extension is generated according to the type of export. In this case, it
    will be `.sql`. Following are some examples for the template:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 建议文件的名称将遵循**文件名模板**字段。在此模板中，我们可以使用特殊的**@SERVER@、@DATABASE@**和**@TABLE@**占位符。这些占位符将被当前服务器、数据库或表名（对于单表导出）替换。请注意，在这些单词之前和之后都有一个"at
    sign"字符。我们还可以使用PHP `strftime`函数中的任何特殊字符；这对于根据当前日期或小时生成导出文件非常有用。最后，我们可以放置任何其他字符串（不是`strftime`特殊字符的一部分），这些字符串将被文字使用。文件扩展名根据导出类型生成。在这种情况下，它将是`.sql`。以下是模板的一些示例：
- en: '`@DATABASE@` would generate `marc_book.sql`'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@DATABASE@`将生成`marc_book.sql`'
- en: '`@DATABASE@-%Y%m%d` would give `marc_book-20110920.sql`'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@DATABASE@-%Y%m%d`将给出`marc_book-20110920.sql`'
- en: The **use this for future exports** option, when activated, stores the entered
    template settings into cookies (for database, table, or server exports) and brings
    them back the next time we use the same kind of export.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 激活**将来用于导出**选项会将输入的模板设置存储到cookie中（用于数据库、表或服务器导出），并在下次使用相同类型的导出时将它们带回来。
- en: 'The default templates are configurable, via the following parameters:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 默认模板是可配置的，通过以下参数：
- en: '[PRE0]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The possible placeholders such as `@DATABASE@` are the same as those that can
    be used for the window title and are described in `Documentation.html`, FAQ 6.27.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 可能的占位符，如`@DATABASE@`与窗口标题中使用的占位符相同，并在`Documentation.html`，FAQ 6.27中描述。
- en: Choosing a character set
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 选择字符集
- en: It is possible to choose the exact character set for our exported file. phpMyAdmin
    verifies that the conditions for recoding are met. For the actual recoding of
    data, the PHP component of the web server must support the `iconv` or the `recode`
    module. The `$cfg['RecodingEngine']` parameter specifies the actual recoding engine—the
    choices being `none, auto, iconv`, and `recode`. If it is set to `auto`, phpMyAdmin
    will first try the `iconv` module and then the `recode` module. If set to `none`,
    the character set dialog is not shown.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以为导出的文件选择确切的字符集。phpMyAdmin会验证重新编码的条件是否满足。对于实际的数据重新编码，Web服务器的PHP组件必须支持`iconv`或`recode`模块。`$cfg['RecodingEngine']`参数指定实际的重新编码引擎，选择包括`none,
    auto, iconv`和`recode`。如果设置为`auto`，phpMyAdmin将首先尝试`iconv`模块，然后尝试`recode`模块。如果设置为`none`，字符集对话框将不会显示。
- en: Kanji support
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 汉字支持
- en: If phpMyAdmin detects the use of the Japanese language, it checks whether PHP
    supports the `mb_convert_encoding()` multibyte string function. If it does, additional
    radio buttons are displayed on the export and import pages and on the query box,
    so that we can choose between the `EUC-JP` and `SJIS` Japanese encodings.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如果phpMyAdmin检测到使用日语，它会检查PHP是否支持`mb_convert_encoding()`多字节字符串函数。如果支持，导出和导入页面以及查询框上会显示额外的单选按钮，这样我们就可以在`EUC-JP`和`SJIS`日语编码之间进行选择。
- en: 'Here is an example taken from the **Export** page:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是从**导出**页面中获取的示例：
- en: '![Kanji support](img/7782_06_03.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![Kanji support](img/7782_06_03.jpg)'
- en: Compression
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 压缩
- en: 'To save transmission time and get a smaller export file, phpMyAdmin can compress
    to ZIP, GZIP, or BZIP2 formats. These formats are offered only if the PHP server
    has been compiled with the `--with-zlib` (for ZIP and GZIP) or `--with-bz2` (for
    BZ2) configuration option respectively. The following parameters control which
    compression choices are presented in the panel:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 为了节省传输时间并获得更小的导出文件，phpMyAdmin可以压缩为ZIP、GZIP或BZIP2格式。只有在PHP服务器编译时分别使用了`--with-zlib`（用于ZIP和GZIP）或`--with-bz2`（用于BZ2）配置选项，才会提供这些格式。以下参数控制在面板中呈现哪些压缩选项：
- en: '[PRE1]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: A system administrator installing phpMyAdmin for a number of users could choose
    to set all these parameters to `FALSE`, so as to avoid the potential overhead
    incurred by a lot of users compressing their exports at the same time. This situation
    usually causes more overhead than if all the users were transmitting their uncompressed
    files at the same time.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 安装phpMyAdmin的系统管理员可以选择将所有这些参数设置为`FALSE`，以避免大量用户同时压缩其导出所带来的潜在开销。这种情况通常比所有用户同时传输未压缩文件带来更多的开销。
- en: 'In older phpMyAdmin versions, the compression file was built in the web server
    memory. Some problems caused by this were:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在较旧的phpMyAdmin版本中，压缩文件是在Web服务器内存中构建的。由此引起的一些问题包括：
- en: File generation depended on the memory limits assigned to running PHP scripts.
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件生成取决于分配给运行PHP脚本的内存限制。
- en: During the time the file was generated and compressed, no transmission occurred.
    Hence, users were inclined to think that the operation was not working and that
    something had crashed.
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在生成和压缩文件的过程中，没有传输发生。因此，用户倾向于认为操作没有进行，或者发生了崩溃。
- en: Compression of large databases was impossible to achieve.
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大型数据库的压缩是不可能实现的。
- en: The `$cfg['CompressOnFly']` parameter (set to `TRUE` by default) was added to
    generate (for GZIP AND BZIP2 formats) a compressed file containing more headers.
    Now, the transmission starts almost immediately. The file is sent in smaller chunks
    so that the whole process consumes much less memory. The downside of this is a
    slightly larger resulting file.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '`$cfg[''CompressOnFly'']`参数（默认设置为`TRUE`）被添加以生成（对于GZIP和BZIP2格式）一个包含更多标头的压缩文件。现在，传输几乎立即开始。文件以较小的块发送，因此整个过程消耗的内存要少得多。这样做的缺点是生成的文件稍微更大。'
- en: Export formats
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 导出格式
- en: We shall now discuss the formats (and the options available once they have been
    chosen) that can be selected with the **Format** sub-panel.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将讨论可以在**格式**子面板中选择的格式（以及选择后可用的选项）。
- en: Note
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Even if we can export into many formats, only some of these formats can be imported
    back using phpMyAdmin.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 即使我们可以导出多种格式，但只有其中一些格式可以使用phpMyAdmin导入。
- en: SQL
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SQL
- en: The SQL format is useful, as it creates standard SQL commands that would work
    on any SQL server.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: SQL格式很有用，因为它创建了标准的SQL命令，可以在任何SQL服务器上运行。
- en: If the **Display comments** checkbox is selected, comments are included in the
    export file. The first part of the export comprises comments (starting with the
    `--` characters) that detail the utility (and version) that created the file,
    the date, and other environment information. We then see the `CREATE` and `INSERT`
    queries for each table.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如果选中**显示注释**复选框，则导出文件中将包含注释。导出的第一部分包括注释（以`--`字符开头），详细说明了创建文件的实用程序（和版本），日期和其他环境信息。然后我们看到每个表的`CREATE`和`INSERT`查询。
- en: phpMyAdmin generates ANSI-compatible comments in the export file. These comments
    start with `--`. They help with importing the file back on other ANSI SQL-compatible
    systems.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: phpMyAdmin在导出文件中生成与ANSI兼容的注释。这些注释以`--`开头。它们有助于在其他ANSI SQL兼容系统上重新导入文件。
- en: 'SQL options are used to define exactly what information the export will contain.
    The following screenshot depicts the general SQL options:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: SQL选项用于定义导出将包含的确切信息。下面的屏幕截图显示了一般的SQL选项：
- en: '![SQL](img/7782_06_04.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![SQL](img/7782_06_04.jpg)'
- en: 'The general SQL options are:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 一般的SQL选项有：
- en: '**Additional custom header comment:** We can add our own comments for this
    export (for example, **Monthly backup)**, which will show in the export headers
    (after the PHP version number). If the comment has more than one line, we must
    use the special character `\n` to separate each line.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**附加自定义头注释：**我们可以为此导出添加自己的注释（例如，**每月备份**），这些注释将显示在导出标头中（在PHP版本号之后）。如果注释有多行，我们必须使用特殊字符`\n`来分隔每一行。'
- en: '**Display foreign key relationships:** In [Chapter 10](ch10.html "Chapter 10. Benefiting
    from the Relational System"), we will see that it''s possible to define relations
    even for tables under the `MyISAM` storage engine; this option would export these
    relationship''s definition as comments. These cannot be directly imported, but
    nonetheless are valuable as human-readable table information.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**显示外键关系：**在[第10章](ch10.html "第10章。从关系系统中受益")中，我们将看到即使是在`MyISAM`存储引擎下的表，也可以定义关系；此选项将导出这些关系的定义作为注释。这些不能直接导入，但作为可读的表信息仍然很有价值。'
- en: '**Display MIME types:** This adds information (in the form of SQL comments),
    to describe which MIME type has been associated to columns. [Chapter 16](ch16.html
    "Chapter 16. Transforming Data using MIME") explains this further.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**显示MIME类型：**这会添加信息（以SQL注释的形式），描述哪些MIME类型已与列关联。[第16章](ch16.html "第16章。使用MIME转换数据")进一步解释了这一点。'
- en: '**Enclose export in a transaction:** Starting with MySQL 4.0.11, we can use
    the `START TRANSACTION` statement. This command, combined with `SET AUTOCOMMIT=0`
    at the beginning and `COMMIT` at the end, asks MySQL to execute the import (when
    we will re-import this file) in one transaction, ensuring that all the changes
    are done as a whole.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**将导出封装在事务中：**从MySQL 4.0.11开始，我们可以使用`START TRANSACTION`语句。这个命令与在开头使用`SET AUTOCOMMIT=0`和在结尾使用`COMMIT`结合在一起，要求MySQL在一个事务中执行导入（当我们重新导入此文件时），确保所有更改都作为一个整体完成。'
- en: '**Disable foreign key checks:** In the export file, we can add `DROP TABLE`
    statements. However, normally a table cannot be dropped if it is referenced in
    a foreign key constraint. This option overrides the verification by adding `SET
    FOREIGN_KEY_CHECKS=0` to the export file. This override only lasts for the duration
    of the import.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**禁用外键检查：**在导出文件中，我们可以添加`DROP TABLE`语句。但是，通常如果表在外键约束中被引用，就无法删除该表。此选项通过在导出文件中添加`SET
    FOREIGN_KEY_CHECKS=0`来覆盖验证。此覆盖仅在导入的持续时间内有效。'
- en: '**Database system or older MySQL server to maximize output compatibility with:**
    This lets us choose the flavor of SQL that we export. We must know about the system
    onto which we intend to import this file. Among the choices are **MySQL 3.23,
    MySQL 4.0, ORACLE**, and **ANSI**.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库系统或旧的MySQL服务器以最大化输出兼容性：**这让我们选择要导出的SQL的类型。我们必须了解我们打算导入此文件的系统。选择包括**MySQL
    3.23，MySQL 4.0，ORACLE**和**ANSI**。'
- en: We may want to export the structure, the data, or both; this is performed with
    the **Dump table** option. Selecting **Structure** generates the section with
    `CREATE` queries, and selecting **Data** produces `INSERT` queries.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能想要导出结构、数据或两者；这是通过**转储表**选项执行的。选择**结构**会生成包含`CREATE`查询的部分，选择**数据**会生成`INSERT`查询。
- en: 'If we select **Structure**, the **Object creation options** sub-panel appears,
    as depicted in the following screenshot:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们选择**结构**，则会出现**对象创建选项**子面板，如下面的屏幕截图所示：
- en: '![SQL](img/7782_06_05.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![SQL](img/7782_06_05.jpg)'
- en: 'The structure options are:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 结构选项有：
- en: '**Add DROP TABLE / VIEW / PROCEDURE / FUNCTION / EVENT:** Adds a `DROP ...
    IF EXISTS` statement before each `CREATE` statement, for example, `DROP TABLE
    IF EXISTS `author``;. This way, we can ensure that the export file is executed
    on a database in which the same element already exists, updating its structure
    but destroying the previous element''s contents.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加DROP TABLE / VIEW / PROCEDURE / FUNCTION / EVENT：** 在每个`CREATE`语句之前添加`DROP
    ... IF EXISTS`语句，例如`DROP TABLE IF EXISTS `author``;。这样，我们可以确保导出文件在已经存在相同元素的数据库上执行，更新其结构但销毁先前元素的内容。'
- en: '**Add CREATE PROCEDURE / FUNCTION / EVENT:** This includes all procedures,
    functions, and event definitions found in this database, in the export.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加CREATE PROCEDURE / FUNCTION / EVENT：** 这包括在此数据库中找到的所有存储过程、函数和事件定义，在导出中包含它们。'
- en: '**CREATE TABLE OPTIONS / IF NOT EXISTS:** Adds the `IF NOT EXISTS` modifier
    to `CREATE TABLE` statements, avoiding an error during import if the table already
    exists.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**创建表选项/如果不存在：** 将`IF NOT EXISTS`修饰符添加到`CREATE TABLE`语句中，避免在表已经存在时导入时出现错误。'
- en: '**CREATE TABLE OPTIONS / AUTO_INCREMENT:** Puts auto-increment information
    from the tables into the export, ensuring that the inserted rows in the tables
    will receive the next exact auto-increment ID value.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**创建表选项/自动增量：** 将表中的自动增量信息放入导出中，确保表中插入的行将获得下一个确切的自动增量ID值。'
- en: '**Enclose table and field names with backquotes:** In the MySQL world, backquotes
    are the normal way of protecting table and column names that may contain special
    characters. In most cases, it is useful to have them. However, backquotes are
    not recommended if the target server (where the export file will be imported)
    is running a SQL engine that does not support backquotes.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用反引号括起表名和字段名：** 在MySQL世界中，反引号是保护可能包含特殊字符的表和列名的常规方式。在大多数情况下，这是有用的。但是，如果目标服务器（导出文件将被导入的地方）运行不支持反引号的SQL引擎，则不建议使用反引号。'
- en: 'The following screenshot displays options relevant to a **Data** export:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了与**数据**导出相关的选项：
- en: '![SQL](img/7782_06_06.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![SQL](img/7782_06_06.jpg)'
- en: 'The options available in the **Data** section are:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据**部分提供的选项包括：'
- en: '**INSERT DELAYED statements:** Adds the `DELAYED` modifier to `INSERT` statements.
    This accelerates the `INSERT` operation as it is queued to the server, which will
    execute it when the table is not in use. This is a MySQL non-standard extension,
    available only for `MyISAM, MEMORY`, and `ARCHIVE` tables.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**INSERT DELAYED语句：** 将`DELAYED`修饰符添加到`INSERT`语句中。这会加速`INSERT`操作，因为它被排队到服务器，服务器在表不在使用时执行它。这是MySQL的非标准扩展，仅适用于`MyISAM，MEMORY`和`ARCHIVE`表。'
- en: '**INSERT IGNORE statements:** Normally, at import time, we cannot insert duplicate
    values for unique keys, as this would abort the insert operation. This option
    adds the `IGNORE` modifier to `INSERT` and `UPDATE` statements, thus skipping
    the rows that generate duplicate key errors.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**INSERT IGNORE语句：** 通常，在导入时，我们不能为唯一键插入重复的值，因为这会中止插入操作。此选项将`IGNORE`修饰符添加到`INSERT`和`UPDATE`语句中，从而跳过生成重复键错误的行。'
- en: '**Function to use when dumping data:** The choices are **INSERT, UPDATE**,
    and **REPLACE**. The most well-known of these types is the default **INSERT**—using
    `INSERT` statements to import back our data. At import time, however, we could
    be in a situation where a table already exists and contains valuable data, and
    we just want to update the columns that are in the current table we are exporting.
    **UPDATE** generates statements, such as the following line of code, updating
    a row when the same primary or unique key is found:'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在转储数据时使用的函数：** 选择有**INSERT，UPDATE**和**REPLACE**。其中最著名的是默认的**INSERT**—使用`INSERT`语句导入我们的数据。但是，在导入时，我们可能会遇到这样的情况：表已经存在并包含有价值的数据，我们只想更新当前导出表中的列。**UPDATE**生成类似下面这行代码的语句，在找到相同的主键或唯一键时更新一行：'
- en: '[PRE2]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The third possibility, **REPLACE**, produces statements such as `REPLACE INTO
    `author` VALUES (1, 'John Smith', '111-1111');` These act similar to an INSERT
    statement for new rows and update existing rows, based on primary or unique keys.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 第三种可能性，**REPLACE**，生成诸如`REPLACE INTO `author` VALUES (1, 'John Smith', '111-1111');`的语句。这类似于对新行进行插入操作，并根据主键或唯一键更新现有行。
- en: '**Syntax to use when inserting data:** There are several choices here. By including
    column names in every statement, the resulting file is bigger, but will prove
    more portable on various SQL systems with the added benefit of being better documented.
    Inserting multiple rows with a statement is faster than using multiple `INSERT`
    statements, but is less convenient as it makes reading the resultant file harder.
    It also produces a smaller file, but each line of this file is not executable
    in itself as each line does not have an `INSERT` statement. If you cannot import
    the complete file in one operation, you cannot split the file with a text editor
    and import it chunk by chunk.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**插入数据时使用的语法：** 这里有几种选择。在每个语句中包含列名会使生成的文件更大，但在各种SQL系统上更具可移植性，并且更易于文档化。使用一个语句插入多行比使用多个`INSERT`语句更快，但不太方便，因为它使得读取结果文件更加困难。它还会生成一个较小的文件，但是该文件的每一行本身都不可执行，因为每一行都没有`INSERT`语句。如果无法在一次操作中导入完整的文件，则无法使用文本编辑器拆分文件并逐块导入。'
- en: '**Maximal length of created query:** The single `INSERT` statement generated
    for **Extended inserts** might become too big and could cause problems. Hence,
    we set a limit to the number of characters for the length of this statement.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**创建查询的最大长度：** 为**扩展插入**生成的单个`INSERT`语句可能会变得太大并引起问题。因此，我们为此语句的长度设置了字符数的限制。'
- en: '**Dump binary columns in hexadecimal notation:** This option makes phpMyAdmin
    encode the contents of `BLOB` columns in `0x` format. Such a format is useful
    as, depending on the software that will be used to manipulate the export file
    (for example a text editor or mail program), handling a file containing 8-bit
    data can be problematic. However, using this option will produce an export of
    `BLOB` column type that is twice the size.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**以十六进制表示法转储二进制列：**此选项使phpMyAdmin以`0x`格式对`BLOB`列的内容进行编码。这种格式很有用，因为根据将用于处理导出文件的软件（例如文本编辑器或邮件程序），处理包含8位数据的文件可能会有问题。但是，使用此选项将产生大小为原始大小两倍的`BLOB`列类型的导出。'
- en: '**Dump TIMESTAMP columns in UTC:** This is useful if the export file is to
    be imported back on a server located in a different time zone.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在UTC中转储时间戳列：**如果导出文件将被导入到位于不同时区的服务器上，则这将很有用。'
- en: CSV
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CSV
- en: This format is understood by a lot of programs, and you may find it useful for
    exchanging data. Note that it is a data-only format—no SQL structure here.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这种格式被许多程序理解，您可能会发现它在交换数据时很有用。请注意，这是一种仅包含数据的格式——这里没有SQL结构。
- en: '![CSV](img/7782_06_07.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![CSV](img/7782_06_07.jpg)'
- en: 'The available options are:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 可用的选项有：
- en: '**Columns separated with:** We put a comma here, which means that a comma will
    be placed after each column. The default value comes from `$cfg[''Export''][''csv_separator'']`.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用逗号分隔的列：**我们在这里放一个逗号，这意味着每个列后面都会放一个逗号。默认值来自`$cfg[''Export''][''csv_separator'']`。'
- en: '**Columns enclosed with:** We place an enclosing character here (double quotes)
    to ensure that a column containing the terminating character (comma) is not taken
    for two columns. The default value comes from `$cfg[''Export''][''csv_enclosed'']`.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用以下字符包围的列：**我们在这里放一个包围字符（双引号），以确保不会将包含终止字符（逗号）的列视为两列。默认值来自`$cfg[''Export''][''csv_enclosed'']`。'
- en: '**Columns escaped with:** If the export generator finds the **Columns enclosed
    with** character inside a column, this character will be placed before it in order
    to protect it. For example,`"John \"The Great\"Smith"`. The default value comes
    from `$cfg[''Export''][''csv_escaped'']`.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用以下字符转义的列：**如果导出生成器在列中找到**用以下字符包围**字符，那么该字符将被放在它之前以保护它。例如，`"John \"The Great\"Smith"`。默认值来自`$cfg[''Export''][''csv_escaped'']`。'
- en: '**Lines terminated with:** This decides the character that ends each line.
    We should use a proper line delimiter here depending on the operating system on
    which we will manipulate the resulting export file. The default value of this
    option comes from the `$cfg[''Export''][''csv_terminated'']` parameter, which
    contains`''AUTO''` by default. The`''AUTO''` value produces a value of `\r\n`
    if the browser''s OS is Windows, and `\n` otherwise. However, this might not be
    the best choice if the export file is intended for a machine with a different
    OS.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**以以下字符结尾的行：**这决定了每行的结束字符。我们应该根据将操作结果导出文件的操作系统使用适当的行分隔符。此选项的默认值来自`$cfg[''Export''][''csv_terminated'']`参数，默认情况下包含`''AUTO''`。`''AUTO''`值会在浏览器的操作系统为Windows时产生值`\r\n`，否则产生值`\n`。但是，如果导出文件打算用于具有不同操作系统的机器，则这可能不是最佳选择。'
- en: '**Replace NULL with:** This determines which string occupies the place in the
    export file of any `NULL` value found in a column.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用以下字符串替换NULL：**这确定了在导出文件中找到任何`NULL`值的列中占据位置的字符串。'
- en: '**Remove carriage return/line feed characters within columns:** As a column
    can contain carriage return or line feed characters, this determines if such characters
    should be removed from the exported data.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**删除列中的回车/换行字符：**由于列可能包含回车或换行字符，这将确定是否应从导出的数据中删除这些字符。'
- en: '**Put column names in the first row:** This gets some information about the
    meaning of each column. Some programs will use this information to name the column.
    For the exercise, we select this option.'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**将列名放在第一行：**这会获取有关每列含义的一些信息。一些程序将使用此信息来命名列。在这个练习中，我们选择了这个选项。'
- en: Finally, we select the `author` table.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们选择`author`表。
- en: 'Clicking on **Go** produces a file containing the following lines:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**Go**会生成一个包含以下行的文件：
- en: '[PRE3]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: CSV for Microsoft Excel
  id: totrans-101
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Microsoft Excel的CSV
- en: 'This export mode produces a CSV file specially formatted for Microsoft Excel
    (using semicolons instead of commas). We can select the exact Microsoft Excel
    edition as shown in the following screenshot:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这种导出模式生成了一个专门为Microsoft Excel格式化的CSV文件（使用分号而不是逗号）。我们可以选择确切的Microsoft Excel版本，如下面的屏幕截图所示：
- en: '![CSV for Microsoft Excel](img/7782_06_08.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![Microsoft Excel的CSV](img/7782_06_08.jpg)'
- en: PDF
  id: totrans-104
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PDF
- en: It's possible to create a PDF report of a table by exporting in PDF. This feature
    always produces a file. Since phpMyAdmin 3.4.7, we can also export a complete
    database or multiple tables in one sweep. We can add a title for this report,
    and it also gets automatically paginated. Non-textual `(BLOB)` data as in the
    `book` table is discarded from this export format.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 通过导出为PDF，可以创建表的PDF报告。此功能始终会生成一个文件。自phpMyAdmin 3.4.7以来，我们还可以一次性导出完整数据库或多个表。我们可以为此报告添加标题，并且它也会自动分页。在这种导出格式中，`book`表中的非文本`(BLOB)`数据将被丢弃。
- en: 'Here, we test it on the `author` table, asking to use "The authors" as a title.
    PDF is interesting because of its inherent vectorial nature—the results can be
    zoomed. Let us have a look at the generated report, as seen from the Adobe Reader:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们在`author`表上进行测试，要求使用"The authors"作为标题。PDF很有趣，因为它固有的矢量性质——结果可以被放大。让我们来看一下从Adobe
    Reader中看到的生成的报告：
- en: '![PDF](img/7782_06_09.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![PDF](img/7782_06_09.jpg)'
- en: Microsoft Word 2000
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Microsoft Word 2000
- en: This export format directly produces a `.doc` file suitable for all software
    that understands the Word 2000 format. We find options similar to those in the
    Microsoft Excel export, and a few more. We can independently export the table's
    **Structure** and **Data**.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 这种导出格式直接生成一个适用于所有理解Word 2000格式的软件的`.doc`文件。我们发现与Microsoft Excel导出中类似的选项，还有一些其他选项。我们可以独立导出表的**结构**和**数据**。
- en: '![Microsoft Word 2000](img/7782_06_10.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![Microsoft Word 2000](img/7782_06_10.jpg)'
- en: 'Note that, for this format and the Excel format, we can choose many tables
    for one export. However, unpleasant results happen if one of these tables has
    non-textual data. Here are the results for the `author` table:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，对于这种格式和Excel格式，我们可以选择多个表进行一次导出。但是，如果其中一个表具有非文本数据，将会出现不愉快的结果。以下是`author`表格的结果：
- en: '![Microsoft Word 2000](img/7782_06_11.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![Microsoft Word 2000](img/7782_06_11.jpg)'
- en: LaTeX
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: LaTeX
- en: '**LaTeX** is a typesetting language. phpMyAdmin can generate a `.tex` file
    that represents the table''s structure and/or data in a sideways tabular format.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '**LaTeX**是一种排版语言。phpMyAdmin可以生成一个代表表的结构和/或数据的`.tex`文件，以横向表格的形式呈现。'
- en: Note
  id: totrans-115
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that this file is not directly viewable, and must be processed further
    or converted for the intended final media.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，这个文件不能直接查看，必须进一步处理或转换为预期的最终媒体。
- en: 'The available options are:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 可用的选项有：
- en: '| Option | Description |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| 选项 | 描述 |'
- en: '| --- | --- |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| **Include table caption** | Displays captions in the tabular output |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| **包括表标题** | 在表格输出中显示标题 |'
- en: '| **Structure** and **Data** | The familiar choice to request structure, data,
    or both |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| **结构** 和 **数据** | 请求结构、数据或两者的熟悉选择 |'
- en: '| **Table caption** | The caption to go on the first page |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| **表标题** | 要放在第一页上的标题 |'
- en: '| **Table caption (continued)** | The caption to go on, page after page |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| **表标题（继续）** | 要放在每一页上的标题 |'
- en: '| **Display foreign key relationships, comments, MIME types** | Other structure
    information we want as output. These choices are available if the phpMyAdmin configuration
    storage is in place |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| **显示外键关系、注释、MIME类型** | 我们希望作为输出的其他结构信息。如果phpMyAdmin配置存储已经就位，这些选择是可用的 |'
- en: XML
  id: totrans-125
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: XML
- en: This format is very popular these days for data exchange. We can choose which
    data definition elements (such as functions, procedures, tables, triggers, or
    views) we want exported. What follows is the output for the `author` table.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 这种格式在数据交换中非常流行。我们可以选择要导出的数据定义元素（如函数、过程、表、触发器或视图）。接下来是`author`表格的输出。
- en: '[PRE4]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Open document spreadsheet
  id: totrans-128
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 打开文档电子表格
- en: 'This spreadsheet format is a subset of the open document ([http://en.wikipedia.org/wiki/OpenDocument](http://en.wikipedia.org/wiki/OpenDocument)),
    which was made popular with the `OpenOffice.org` office suite. We need to choose
    only one table to be exported in order to have a coherent spreadsheet. The following
    screenshot shows our `author` table, exported into a file named `author.ods`,
    and subsequently looked at from OpenOffice:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 这种电子表格格式是开放文档（[http://en.wikipedia.org/wiki/OpenDocument](http://en.wikipedia.org/wiki/OpenDocument)）的一个子集，它在`OpenOffice.org`办公套件中非常流行。我们需要选择一个要导出的表，以便有一个连贯的电子表格。以下截图显示了我们的`author`表格，导出为名为`author.ods`的文件，并随后在OpenOffice中查看：
- en: '![Open document spreadsheet](img/7782_06_12.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![打开文档电子表格](img/7782_06_12.jpg)'
- en: Open document text
  id: totrans-131
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 打开文档文本
- en: This is another subset of the open document standard, this time oriented towards
    text processing. Our `author` table is now exported and viewed from OpenOffice.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 这是开放文档标准的另一个子集，这次是面向文本处理的。我们的`author`表格现在已经从OpenOffice中导出并查看。
- en: '![Open document text](img/7782_06_13.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![打开文档文本](img/7782_06_13.jpg)'
- en: YAML
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: YAML
- en: '**YAML** stands for **YAML Ain''t Markup Language**. YAML is a human-readable
    data serialization format; its official site is [http://www.yaml.org](http://www.yaml.org).
    This format has no option that we can choose from within phpMyAdmin. Here is the
    YAML export for the `author` table:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '**YAML**代表**YAML不是标记语言**。YAML是一种人类可读的数据序列化格式；它的官方网站是[http://www.yaml.org](http://www.yaml.org)。这种格式在phpMyAdmin中没有我们可以选择的选项。以下是`author`表格的YAML导出：'
- en: '[PRE5]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: CodeGen
  id: totrans-137
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CodeGen
- en: This choice might some day support many formats related to code development.
    Currently, it can export in NHibernate **Object-relation mapping (ORM)** format.
    For more details, please refer to [http://en.wikipedia.org/wiki/Nhibernate](http://en.wikipedia.org/wiki/Nhibernate).
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 这个选择可能有一天会支持与代码开发相关的许多格式。目前，它可以导出NHibernate **对象关系映射（ORM）**格式。更多详情，请参阅[http://en.wikipedia.org/wiki/Nhibernate](http://en.wikipedia.org/wiki/Nhibernate)。
- en: Texy! text
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Texy!文本
- en: '**Texy!** is a formatting tool ([http://texy.info/en/](http://texy.info/en/))
    with its own simplified syntax. The following block of code is an example of export
    in this format:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '**Texy!**是一个带有自己简化语法的格式化工具（[http://texy.info/en/](http://texy.info/en/)）。以下是以这种格式导出的示例代码：'
- en: '[PRE6]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: PHP array
  id: totrans-142
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PHP数组
- en: 'In PHP, associative arrays can hold text data; therefore, a PHP-array export
    format is available. The following is a PHP array export of the `author` table:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在PHP中，关联数组可以保存文本数据；因此，可以使用PHP数组导出格式。以下是`author`表格的PHP数组导出：
- en: '[PRE7]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: MediaWiki table
  id: totrans-145
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: MediaWiki表格
- en: MediaWiki ([http://www.mediawiki.org/wiki/MediaWiki](http://www.mediawiki.org/wiki/MediaWiki))
    is a popular wiki package, which supports the ubiquitous Wikipedia. This wiki
    software implements a formatting language in which it's possible to describe data
    in tabular format. Choosing this export format in phpMyAdmin produces a file which
    can be pasted on a wiki page we are editing.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: MediaWiki（[http://www.mediawiki.org/wiki/MediaWiki](http://www.mediawiki.org/wiki/MediaWiki)）是一个流行的维基包，支持广泛使用的维基百科。这个维基软件实现了一种格式化语言，可以用表格格式描述数据。在phpMyAdmin中选择这种导出格式会产生一个文件，可以粘贴到我们正在编辑的维基页面上。
- en: JSON
  id: totrans-147
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: JSON
- en: 'The JavaScript Object Notation ([http://json.org](http://json.org)) is a data-interchange
    format popular in the web world. Exporting the `author` table in this format is
    shown in the following block of code:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: JavaScript对象表示法（[http://json.org](http://json.org)）是一种在网络世界中流行的数据交换格式。以这种格式导出`author`表格的代码如下所示：
- en: '[PRE8]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Exporting a table
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导出表格
- en: 'The **Export** link in the `Table` view brings up the export sub-panel for
    a specific table. It is similar to the database export panel, but there is no
    table selector. However, there is an additional section for split exports (Rows)
    before the **Output** sub-panel, as depicted here:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '`表`视图中的**导出**链接会显示特定表的导出子面板。它类似于数据库导出面板，但没有表选择器。然而，在**输出**子面板之前，还有一个用于分割导出（行）的额外部分，如下所示：'
- en: '![Exporting a table](img/7782_06_14.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![导出表格](img/7782_06_14.jpg)'
- en: Split-file exports
  id: totrans-153
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分割文件导出
- en: The part of the dialog containing **Number of rows** and **Row to begin at**
    enables us to split the table into chunks. Depending on the exact row size, we
    can experiment with various values for the number of rows to find and how many
    rows can be put in a single export file before the memory or execution time limits
    are hit in the web server. We could then use names such as `book00.sql` and `book01.sql`
    for our export files. Should we decide to export all rows, we just select the
    **Dump all rows** radio button.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 对话框中包含的**行数**和**开始行**部分使我们能够将表分成多个部分。根据确切的行大小，我们可以尝试各种值来找到要查找的行数以及在Web服务器中达到内存或执行时间限制之前可以放入单个导出文件中的行数。然后，我们可以为我们的导出文件使用名称，例如`book00.sql`和`book01.sql`。如果我们决定导出所有行，我们只需选择**转储所有行**单选按钮。
- en: Exporting selectively
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 有选择地导出
- en: At various places in phpMyAdmin's interface, we can export the results that
    we see, or select the rows that we want to export. We will examine the various
    ways of exporting a selected portion of a table.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在phpMyAdmin界面的各个位置，我们可以导出我们看到的结果，或者选择要导出的行。我们将研究导出表的选定部分的各种方法。
- en: Exporting partial query results
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 导出部分查询结果
- en: When results are displayed from phpMyAdmin (here, the results of a query asking
    for the books from **author_id 2)**, an **Export** link appears at the bottom
    of the page.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 当从phpMyAdmin显示结果（这里是查询要求显示**作者ID为2**的书籍结果）时，页面底部会出现一个**导出**链接。
- en: '![Exporting partial query results](img/7782_06_15.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![导出部分查询结果](img/7782_06_15.jpg)'
- en: Clicking on this link brings up a special export panel containing the query
    on the top, along with the other table export options. An export produced via
    this panel would contain only the data from this result set.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 单击此链接会弹出一个特殊的导出面板，其中包含顶部的查询以及其他表导出选项。通过此面板生成的导出将仅包含此结果集中的数据。
- en: Note
  id: totrans-161
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The results of single-table queries can be exported in all the available formats,
    while the results of multi-table queries can be exported in all the formats except
    SQL.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 单表查询的结果可以以所有可用格式导出，而多表查询的结果可以以除SQL之外的所有格式导出。
- en: Exporting and checkboxes
  id: totrans-163
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 导出和复选框
- en: 'Anytime we see the results (when browsing or searching, for example), we can
    check the boxes beside the rows that we want, and use the **With selected: Export**
    icon or link to generate a partial export file with just those rows.'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 每当我们看到结果（例如浏览或搜索时），我们可以勾选我们想要的行旁边的复选框，然后使用**选择的内容：导出**图标或链接生成一个仅包含这些行的部分导出文件。
- en: '![Exporting and checkboxes](img/7782_06_16.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![导出和复选框](img/7782_06_16.jpg)'
- en: Exporting multiple databases
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导出多个数据库
- en: Any user can export the databases to which he/she has access, in one operation.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 任何用户都可以在一次操作中导出他/她有权限访问的数据库。
- en: On the home page, the **Export** link brings us to the screen shown in the following
    screenshot. This has the same structure as the other export pages, except for
    the databases list.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在主页上，**导出**链接将我们带到下面截图所示的屏幕。除了数据库列表之外，它的结构与其他导出页面相同。
- en: '![Exporting multiple databases](img/7782_06_17.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![导出多个数据库](img/7782_06_17.jpg)'
- en: Note
  id: totrans-170
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Exporting large databases may or may not work. It depends on their size, the
    options chosen, and the web server's PHP component settings (especially memory
    size and maximum execution time).
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 导出大型数据库可能有效，也可能无效。这取决于它们的大小，所选择的选项，以及Web服务器的PHP组件设置（特别是内存大小和最大执行时间）。
- en: Saving the export file on the server
  id: totrans-172
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在服务器上保存导出文件
- en: Instead of transmitting the export file over the network with HTTP, it is possible
    to save it directly on the file system of the web server. This could be quicker
    and less sensitive to execution time limits as the entire transfer from the server
    to the client browser is bypassed. Eventually, a file transfer protocol such as
    FTP or SFTP can be used to retrieve the file, as leaving it on the same machine
    would not provide good backup protection.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 与通过HTTP传输导出文件不同，可以直接将其保存在Web服务器的文件系统上。这可能会更快，而且不太受执行时间限制的影响，因为从服务器到客户端浏览器的整个传输被绕过了。最终，可以使用文件传输协议（如FTP或SFTP）来检索文件，因为将其留在同一台机器上不会提供良好的备份保护。
- en: A special directory has to be created on the web server before saving an export
    file on it. Usually, this is a sub-directory of the main `phpMyAdmin` directory.
    We will use `save_dir` as an example. This directory must have the correct permissions.
    First, the web server must have write permissions for this directory. Also, if
    the web server's PHP component is running on safe mode, the owner of the phpMyAdmin
    scripts must be the same as that of `save_dir`.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在保存导出文件之前，必须在Web服务器上创建一个特殊目录。通常，这是主`phpMyAdmin`目录的子目录。我们将使用`save_dir`作为示例。此目录必须具有正确的权限。首先，Web服务器必须对此目录具有写权限。此外，如果Web服务器的PHP组件正在安全模式下运行，则phpMyAdmin脚本的所有者必须与`save_dir`的所有者相同。
- en: 'On a Linux system, assuming that the web server is running as `group apache`,
    the following commands would do the trick:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在Linux系统上，假设Web服务器以`group apache`运行，以下命令可以解决问题：
- en: '[PRE9]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Note
  id: totrans-177
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The proper ownership and permissions depends highly on the chosen web server
    and the **SAPI (Server Application Programming Interface)** (refer to [http://en.wikipedia.org/wiki/Server_Application_Programming_Interface)](http://en.wikipedia.org/wiki/Server_Application_Programming_Interface))
    used, which influences how directories and files are created and accessed. PHP
    could be using the scripts' owner as the accessing user, or the web server's user/group
    itself.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 适当的所有权和权限高度取决于所选择的Web服务器和**SAPI（服务器应用程序编程接口）**（参见[http://en.wikipedia.org/wiki/Server_Application_Programming_Interface)](http://en.wikipedia.org/wiki/Server_Application_Programming_Interface))，它影响目录和文件的创建和访问方式。PHP可能使用脚本所有者作为访问用户，也可能使用Web服务器的用户/组本身。
- en: We also have to define the`'./save_dir'` directory name in `$cfg['SaveDir'].We`
    are using a path relative to the `phpMyAdmin` directory here, but an absolute
    path would work just as well.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还必须在`$cfg['SaveDir']`中定义`'./save_dir'`目录名称。我们在这里使用相对于`phpMyAdmin`目录的路径，但绝对路径同样有效。
- en: 'The **Output** section will appear with a new **Save on server..**. section:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '**输出**部分将出现一个新的**在服务器上保存..**部分。'
- en: '![Saving the export file on the server](img/7782_06_18.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![在服务器上保存导出文件](img/7782_06_18.jpg)'
- en: After clicking on **Go**, we will get a confirmation message or an error message
    (if the web server does not have the required permissions to save the file).
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**Go**后，我们将收到确认消息或错误消息（如果Web服务器没有所需的权限来保存文件）。
- en: Note
  id: totrans-183
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For saving a file again using the same file name, check the **Overwrite existing
    file(s)** box.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 要再次使用相同的文件名保存文件，请勾选**覆盖现有文件**框。
- en: User-specific save directories
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用户特定的保存目录
- en: 'We can use the special string, `%u`, in the `$cfg[''SaveDir'']` parameter.
    This string will be replaced by the logged-in username. For example, as shown
    in the following line of code:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在`$cfg['SaveDir']`参数中使用特殊字符串`%u`。这个字符串将被登录的用户名替换。例如，如下行代码所示：
- en: '[PRE10]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: This would give us an on-screen choice, **Save on server in the directory ./save_dir/marc/**.
    These directories (one per potential user) must exist and must bear the proper
    permissions, as already seen in the previous section.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 这将给我们一个屏幕选择，在目录./save_dir/marc/中保存在服务器上。这些目录（每个潜在用户一个）必须存在，并且必须具有适当的权限，如前一节所示。
- en: Memory limits
  id: totrans-189
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 内存限制
- en: Generating an export file uses a certain amount of memory, depending on the
    size of the tables and on the chosen options. The `$cfg['MemoryLimit']` parameter
    can contain a limit (in bytes) for the amount of memory used by PHP scripts in
    phpMyAdmin—the exporting/importing scripts and other scripts. By default, the
    parameter is set to `0`, meaning that there is no limit. We could set here a limit
    of 20 MiB by using a value of `20M` (the `M` suffix here is very important, to
    avoid setting a limit of 20 bytes!).
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 生成导出文件会使用一定量的内存，取决于表的大小和选择的选项。`$cfg['MemoryLimit']`参数可以包含PHP脚本在phpMyAdmin中使用的内存量的限制（以字节为单位）-导出/导入脚本和其他脚本。默认情况下，该参数设置为`0`，表示没有限制。我们可以通过使用`20M`的值来设置20
    MiB的限制（这里的`M`后缀非常重要，以避免设置20字节的限制！）。
- en: Note
  id: totrans-191
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that, if PHP has its safe mode activated, changing `$cfg['MemoryLimit']`
    has no effect. Instead, the enforced limit comes from the `memory_limit` directive
    in `php.ini`.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，如果PHP启用了安全模式，更改`$cfg['MemoryLimit']`将不起作用。相反，强制限制来自`php.ini`中的`memory_limit`指令。
- en: In addition to memory limits, the execution time limit has an effect on exporting
    and can be controlled via the `$cfg['ExecTimeLimit']` parameter.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 除了内存限制，执行时间限制对导出有影响，并且可以通过`$cfg['ExecTimeLimit']`参数进行控制。
- en: Summary
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we examined the various ways to trigger an export—from the
    `Database` view, the `Table` view, or a results page. We also listed the various
    available export formats, their options, the possibility of compressing the export
    file, and the various places where it might be sent.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们研究了触发导出的各种方式-从`数据库`视图，`表`视图或结果页面。我们还列出了各种可用的导出格式，它们的选项，压缩导出文件的可能性以及可能发送的各种地方。
- en: In the next chapter, we will have the opportunity of importing back our structure
    and data, provided the chosen format is supported by phpMyAdmin.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将有机会导入我们的结构和数据，前提是所选的格式得到phpMyAdmin支持。
