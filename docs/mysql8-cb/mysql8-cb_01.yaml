- en: MySQL 8 - Installing and Upgrading
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MySQL 8-安装和升级
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下配方：
- en: Installing MySQL using YUM/APT
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用YUM/APT安装MySQL
- en: Installing MySQL 8.0 using RPM or DEB files
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用RPM或DEB文件安装MySQL 8.0
- en: Installing MySQL on Linux using Generic Binaries
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用通用二进制文件在Linux上安装MySQL
- en: Starting or Stopping MySQL 8
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动或停止MySQL 8
- en: Uninstalling MySQL 8
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 卸载MySQL 8
- en: Managing MySQL Server with systemd
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用systemd管理MySQL服务器
- en: Downgrading from MySQL 8.0
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从MySQL 8.0降级
- en: Upgrading to MySQL 8.0
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 升级到MySQL 8.0
- en: Installing MySQL utilities
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装MySQL实用程序
- en: Introduction
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: 'In this chapter, you will learn about the installing, upgrading, and downgrading
    steps of MySQL 8\. There are five different ways to install or upgrade; the three
    most widely-used installation methods are covered in this chapter:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将了解MySQL 8安装、升级和降级步骤。有五种不同的安装或升级方式；本章涵盖了三种最常用的安装方法：
- en: Software repositories (YUM or APT)
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 软件存储库（YUM或APT）
- en: RPM or DEB files
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RPM或DEB文件
- en: Generic Binaries
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通用二进制文件
- en: Docker (not covered)
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Docker（未涵盖）
- en: Source code compilation (not covered)
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 源代码编译（未涵盖）
- en: If you have already installed MySQL and want to upgrade, go through the upgrade
    steps in the *Upgrade to MySQL 8* section. If your installation is corrupt, go
    through the uninstallation steps also in the *Upgrade to MySQL 8* section.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经安装了MySQL并希望升级，请查看“升级到MySQL 8”部分中的升级步骤。如果您的安装损坏，请查看“升级到MySQL 8”部分中的卸载步骤。
- en: 'Before installation, make a note of OS and CPU architecture. The convention
    followed is as follows:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 安装之前，请记下操作系统和CPU架构。遵循的约定如下：
- en: '**MySQL Linux RPM package distribution identifiers**'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**MySQL Linux RPM包分发标识符**'
- en: '| **Distribution value** | **Intended use** |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| **分发值** | **预期的用途** |'
- en: '| --- | --- |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| el6, el7 | Red Hat Enterprise Linux, Oracle Linux, CentOS 6 or 7 |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| el6, el7 | Red Hat企业Linux，Oracle Linux，CentOS 6或7 |'
- en: '| fc23, fc24, fc25 | Fedora 23, 24, or 25 |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| fc23, fc24, fc25 | Fedora 23, 24或25 |'
- en: '| sles12 | SUSE Linux Enterprise Server 12 |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| sles12 | SUSE Linux企业服务器12 |'
- en: '**MySQL Linux RPM package CPU identifiers**'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**MySQL Linux RPM包CPU标识符**'
- en: '| **CPU value** | **Intended processor type or family** |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| **CPU值** | **预期的处理器类型或系列** |'
- en: '| --- | --- |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| i386, i586, i686 | Pentium processor or better, 32-bit |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| i386, i586, i686 | 奔腾处理器或更高，32位 |'
- en: '| x86_64 | 64-bit x86 processor |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| x86_64 | 64位x86处理器 |'
- en: '| ia64 | Itanium (IA-64) processor |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: '| ia64 | Itanium（IA-64）处理器 |'
- en: '**MySQL Debian and Ubuntu 7 and 8 installation packages CPU identifiers**'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**MySQL Debian和Ubuntu 7和8安装包CPU标识符**'
- en: '| **CPU value** | **Intended processor type or family** |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| **CPU值** | **预期的处理器类型或系列** |'
- en: '| i386 | Pentium processor or better, 32-bit |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| i386 | 奔腾处理器或更高，32位 |'
- en: '| amd64 | 64-bit x86 processor |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| amd64 | 64位x86处理器 |'
- en: '**MySQL Debian 6 Installation package CPU identifiers**'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**MySQL Debian 6安装包CPU标识符**'
- en: '| **CPU value** | **Intended processor type or family** |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| **CPU值** | **预期的处理器类型或系列** |'
- en: '| --- | --- |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| i686 | Pentium processor or better, 32-bit |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| i686 | 奔腾处理器或更高，32位 |'
- en: '| x86_64 | 64-bit x86 processor |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| x86_64 | 64位x86处理器 |'
- en: Installing MySQL using YUM/APT
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM/APT安装MySQL
- en: The most common and easiest way of installation is through software repositories
    where you add official Oracle MySQL repositories to your list and install MySQL
    through package management software.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 最常见和最简单的安装方式是通过软件存储库，您可以将官方的Oracle MySQL存储库添加到列表中，并通过软件包管理软件安装MySQL。
- en: 'There are mainly two types of repository software:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 主要有两种类型的存储库软件：
- en: YUM (Centos, Red Hat, Fedora and Oracle Linux)
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: YUM（Centos，Red Hat，Fedora和Oracle Linux）
- en: APT (Debian, Ubuntu)
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: APT（Debian，Ubuntu）
- en: How to do it...
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Let''s look at steps for installing MySQL 8 in the following ways:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看以下安装MySQL 8的步骤：
- en: Using YUM repositories
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM存储库
- en: 'Find the Red Hat or CentOS version:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查找Red Hat或CentOS版本：
- en: '[PRE0]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Add the MySQL Yum repository to your system's repository list. This is a one-time
    operation that can be performed by installing an RPM provided by MySQL.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将MySQL Yum存储库添加到系统的存储库列表中。这是一个一次性操作，可以通过安装MySQL提供的RPM来执行。
- en: You can download the MySQL YUM Repository from [http://dev.mysql.com/downloads/repo/yum/](http://dev.mysql.com/downloads/repo/yum/)
    and choose the file depending on your OS.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://dev.mysql.com/downloads/repo/yum/](http://dev.mysql.com/downloads/repo/yum/)下载MySQL
    YUM存储库，并根据您的操作系统选择文件。
- en: 'Install the downloaded release package with the following command, replacing
    the name with the platform- and version-specific package name of the downloaded
    RPM package:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下命令安装下载的发布包，将名称替换为下载的RPM包的特定于平台和版本的包名称：
- en: '[PRE1]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Or you can copy the link location and install directly using RPM (you can skip
    the next step after installing):'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 或者您可以复制链接位置并直接使用RPM进行安装（安装后可以跳过下一步）：
- en: '[PRE2]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Verify the installation:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证安装：
- en: '[PRE3]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Set the release series. At the time of writing this book, MySQL 8 is not a **general
    availability** (**GA**) release. So MySQL 5.7 will be selected as the default
    release series. To install MySQL 8, you have to set the release series to 8:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置发布系列。在撰写本书时，MySQL 8不是**一般可用性**（**GA**）版本。因此，MySQL 5.7将被选为默认发布系列。要安装MySQL 8，您必须将发布系列设置为8：
- en: '[PRE4]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Disable `mysql57-community` and enable `mysql80-community`:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 禁用`mysql57-community`并启用`mysql80-community`：
- en: '[PRE5]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Verify that `mysql80-community` is enabled:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证`mysql80-community`是否已启用：
- en: '[PRE6]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Install MySQL 8:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装MySQL 8：
- en: '[PRE7]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'You can check the installed packages using the following:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以使用以下命令检查已安装的软件包：
- en: '[PRE8]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Using APT repositories
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用APT存储库
- en: Add the MySQL APT repository to your system's repository list. This is a one-time
    operation that can be performed by installing a `.deb` file provided by MySQL
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将MySQL APT存储库添加到系统的存储库列表中。这是一个一次性操作，可以通过安装MySQL提供的`.deb`文件来执行
- en: You can download the MySQL APT repository from [http://dev.mysql.com/downloads/repo/apt/](http://dev.mysql.com/downloads/repo/apt/).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://dev.mysql.com/downloads/repo/apt/](http://dev.mysql.com/downloads/repo/apt/)下载MySQL
    APT存储库。
- en: 'Or you can copy the link location and use `wget` to download directly on to
    the server. You might need to install `wget` (`sudo apt-get install wget`):'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 或者您可以复制链接位置并使用`wget`直接在服务器上下载。您可能需要安装`wget`（`sudo apt-get install wget`）：
- en: '[PRE9]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Install the downloaded release package with the following command, replacing 
    the name with platform- and version-specific package name of the downloaded APT
    package:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令安装下载的发布软件包，替换为下载的APT软件包的特定平台和版本的软件包名称：
- en: '[PRE10]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: During the installation of the package, you will be asked to choose the versions
    of the MySQL server and other components. Press *Enter* for selecting and the
    Up and Down keys for navigating.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装软件包时，将要求您选择MySQL服务器和其他组件的版本。按*Enter*进行选择，使用上下键进行导航。
- en: 'Select MySQL Server and Cluster (Currently selected: mysql-5.7).'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 选择MySQL服务器和集群（当前选择：mysql-5.7）。
- en: Select mysql-8.0 preview (At the time of writing, MySQL 8.0 is not GA). You
    might get a warning such as MySQL 8.0-RC Note that MySQL 8.0 is currently an RC.
    It should only be installed to preview upcoming features of MySQL, and is not
    recommended for use in production environments. (**RC** is short for **release
    candidate**).
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 选择mysql-8.0预览（在撰写本文时，MySQL 8.0尚未GA）。您可能会收到警告，例如MySQL 8.0-RC请注意，MySQL 8.0目前是一个RC。它应该只安装以预览MySQL即将推出的功能，并不建议在生产环境中使用。
    （**RC**是**发布候选**的缩写）。
- en: 'If you want to change the release version, execute the following:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 如果要更改发布版本，请执行以下操作：
- en: '[PRE11]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Update package information from the MySQL APT repository with the following
    command (this step is mandatory):'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令从MySQL APT存储库更新软件包信息（此步骤是强制性的）：
- en: '[PRE12]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Install MySQL. During installation, you''ll need to provide a password for
    the root user for your MySQL installation. Remember the password; if you forget
    it, you''ll have to reset the root password (refer to the *Resetting root password* section).
    This installs the package for the MySQL server, as well as the packages for the
    client and for the database common files:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装MySQL。在安装过程中，您需要为MySQL安装的root用户提供密码。记住密码；如果忘记了，您将不得不重置root密码（参考*重置root密码*部分）。这将安装MySQL服务器的软件包，以及客户端和数据库公共文件的软件包：
- en: '[PRE13]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Verify packages. `ii` indicates that the package is installed:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证软件包。`ii`表示软件包已安装：
- en: '[PRE14]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Installing MySQL 8.0 using RPM or DEB files
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM包安装MySQL 8.0
- en: Installing MySQL using repositories requires access to public internet. As a
    security measure, most of the production machines are not connected to the internet.
    In that case, you can download the RPM or DEB files on the system administration
    and copy them to the production machine.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 使用存储库安装MySQL需要访问公共互联网。出于安全考虑，大多数生产机器不连接到互联网。在这种情况下，您可以在系统管理上下载RPM或DEB文件，并将其复制到生产机器。
- en: 'There are mainly two types of installation files:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 主要有两种类型的安装文件：
- en: RPM (CentOS, Red Hat, Fedora, and Oracle Linux)
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RPM（CentOS，Red Hat，Fedora和Oracle Linux）
- en: DEB (Debian, Ubuntu)
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DEB（Debian，Ubuntu）
- en: 'There are multiple packages that you need to install. Here is a list and short
    description of each one:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 有多个软件包需要安装。以下是每个软件包的列表和简要描述：
- en: '`mysql-community-server`: Database server and related tools.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql-community-server`：数据库服务器和相关工具。'
- en: '`mysql-community-client`: MySQL client applications and tools.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql-community-client`：MySQL客户端应用程序和工具。'
- en: '`mysql-community-common`: Common files for server and client libraries.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql-community-common`：服务器和客户端库的公共文件。'
- en: '`mysql-community-devel`: Development header files and libraries for MySQL database
    client applications, such as the Perl MySQL module.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql-community-devel`：MySQL数据库客户端应用程序的开发头文件和库，例如Perl MySQL模块。'
- en: '`mysql-community-libs`: The shared libraries (`libmysqlclient.so*`) that certain
    languages and applications need to dynamically load and use MySQL.'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql-community-libs`：某些语言和应用程序需要动态加载和使用MySQL的共享库（`libmysqlclient.so*`）。'
- en: '`mysql-community-libs-compat`: The shared libraries for older releases. Install
    this package if you have applications installed that are dynamically linked against
    older versions of MySQL but you want to upgrade to the current version without
    breaking the library dependencies.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mysql-community-libs-compat`：旧版本的共享库。如果您安装了针对旧版本MySQL动态链接的应用程序，但希望升级到当前版本而不破坏库依赖关系，请安装此软件包。'
- en: How to do it...
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s look at how to do it using the following types of bundles:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何使用以下类型的包：
- en: Using the RPM bundle
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM包
- en: 'Download the MySQL RPM tar bundle from the MySQL Downloads page, [http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/),
    choosing your OS and CPU architecture. At the time of writing,  MySQL 8.0 is not
    GA. If it is still in the development series, select the Development Releases
    tab for getting MySQL 8.0 and the choose the OS and version:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从MySQL下载页面[http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/)下载MySQL
    RPM tar包，选择您的操作系统和CPU架构。在撰写本文时，MySQL 8.0尚未GA。如果它仍处于开发系列中，请选择Development Releases选项卡以获取MySQL
    8.0，然后选择操作系统和版本：
- en: '[PRE15]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Untar the package:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压软件包：
- en: '[PRE16]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Install MySQL:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装MySQL：
- en: '[PRE17]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'RPM cannot solve the dependency issues and the installation process might run
    issues. If you are facing such issues, use the `yum` command listed here (you
    should have access to dependent packages):'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: RPM无法解决依赖关系问题，安装过程可能会出现问题。如果遇到此类问题，请使用此处列出的`yum`命令（您应该可以访问依赖软件包）：
- en: '[PRE18]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Verify the installation:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证安装：
- en: '[PRE19]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Using the APT bundle
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用APT包
- en: 'Download the MySQL APT TAR from the MySQL Downloads page, [http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/):'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从MySQL下载页面[http://dev.mysql.com/downloads/mysql/](http://dev.mysql.com/downloads/mysql/)下载MySQL
    APT TAR：
- en: '[PRE20]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Untar the packages:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压软件包：
- en: '[PRE21]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Install the dependencies. You may need to install the `libaio1` package if
    it is not already installed:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装依赖项。如果尚未安装，您可能需要安装`libaio1`软件包：
- en: '[PRE22]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Upgrade `libstdc++6` to the latest:'
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 升级`libstdc++6`到最新版本：
- en: '[PRE23]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Upgrade `libmecab2` to the latest. If `universe` is not included, then add
    the following line to the end of the file (for example, `zesty`):'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`libmecab2`升级到最新版本。如果未包括`universe`，则在文件末尾添加以下行（例如，`zesty`）：
- en: '[PRE24]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Preconfigure the MySQL server package with the following command. It asks you
    to set the root password:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令预配置MySQL服务器包。它会要求您设置root密码：
- en: '[PRE25]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Install the database common files package, the client package, the client metapackage,
    the server package, and the server metapackage (in that order); you can do that
    with a single command:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装数据库公共文件包、客户端包、客户端元包、服务器包和服务器元包（按顺序）；您可以使用单个命令完成：
- en: '[PRE26]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Install the shared libraries:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装共享库：
- en: '[PRE27]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Verify the installation:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证安装：
- en: '[PRE28]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Installing MySQL on Linux using Generic Binaries
  id: totrans-131
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用通用二进制文件在Linux上安装MySQL
- en: Installing using the software packages requires some dependencies to be installed
    first and can conflict with other packages. In that case, you can install MySQL
    using the generic binaries available on the downloads page. Binaries are precompiled
    using advanced compilers and are built with the best possible options for optimal
    performance.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 使用软件包安装需要先安装一些依赖项，并可能与其他软件包冲突。在这种情况下，您可以使用下载页面上提供的通用二进制文件安装MySQL。二进制文件是使用先进的编译器预编译的，并使用最佳选项构建以获得最佳性能。
- en: How to do it...
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到...
- en: MySQL has a dependency on the `libaio` library. The `data directory` initialization,
    and subsequent server startup steps, will fail if this library is not installed
    locally.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL依赖于`libaio`库。如果未在本地安装此库，`数据目录`初始化和随后的服务器启动步骤将失败。
- en: 'On YUM-based systems:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在基于YUM的系统上：
- en: '[PRE29]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'On APT-based systems:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在基于APT的系统上：
- en: '[PRE30]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Download the TAR binary from the MySQL Downloads page, at [https://dev.mysql.com/downloads/mysql/](https://dev.mysql.com/downloads/mysql/),
    then choose Linux - Generic as the OS and select the version. You can download
    directly onto your server directly using the `wget` command:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 从MySQL下载页面下载TAR二进制文件，网址为[https://dev.mysql.com/downloads/mysql/](https://dev.mysql.com/downloads/mysql/)，然后选择Linux
    - 通用作为操作系统并选择版本。您可以直接使用`wget`命令直接在服务器上下载：
- en: '[PRE31]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Install MySQL using the following steps:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤安装MySQL：
- en: 'Add the `mysql` group and the `mysql` user. All the files and directories should
    be under the `mysql` user:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加`mysql`组和`mysql`用户。所有文件和目录都应该在`mysql`用户下：
- en: '[PRE32]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'This is the installation location (you can change it to another location):'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这是安装位置（您可以将其更改为另一个位置）：
- en: '[PRE33]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Untar the binary file. Keep the untarred binary file at the same location and
    symlink it to the installation location. In this way, you can keep multiple versions
    and it is very easy to upgrade. For example, you can download another version
    and untar it to a different location; while upgrading, all you need to do is to
    change the symlink:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压二进制文件。将解压后的二进制文件保留在相同位置，并将其符号链接到安装位置。通过这种方式，您可以保留多个版本，并且非常容易升级。例如，您可以下载另一个版本并将其解压到不同的位置；在升级时，您只需要更改符号链接：
- en: '[PRE34]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[PRE35]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Make the symlink:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建符号链接：
- en: '[PRE36]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Create the necessary directories and change the ownership to `mysql`:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建必要的目录并将所有权更改为`mysql`：
- en: '[PRE37]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Initialize `mysql`, which generates a temporary password:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初始化`mysql`，生成临时密码：
- en: '[PRE38]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Set up the RSA for SSL. Refer to Chapter 14, *Setting up Encrypted Connections
    using X509 Section*, for more details on SSL. Note that a temporary password is
    generated for `root@localhost: eJQdj8C*qVMq`:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为SSL设置RSA。有关SSL的更多详细信息，请参阅第14章“使用X509部分设置加密连接”。请注意，为`root@localhost`生成了一个临时密码：eJQdj8C*qVMq
- en: '[PRE39]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Change the ownership of binaries to `root` and `data` files to `mysql`:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更改二进制文件的所有权为`root`，将数据文件的所有权更改为`mysql`：
- en: '[PRE40]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Copy the startup script to `init.d`:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将启动脚本复制到`init.d`：
- en: '[PRE41]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'Export the binary of `mysql` to the `PATH` environment variable:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`mysql`的二进制文件导出到`PATH`环境变量：
- en: '[PRE42]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: Refer to *Starting or Stopping MySQL 8* section to start MySQL.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 参考*启动或停止MySQL 8*部分来启动MySQL。
- en: 'After installation, you will get the following directories inside `/usr/local/mysql`:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 安装后，您将在`/usr/local/mysql`内获得以下目录：
- en: '| **Directory** | **Contents of directory** |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| **目录** | **目录内容** |'
- en: '| `bin` | `mysqld` server, client, and utility programs |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| `bin` | `mysqld`服务器、客户端和实用程序 |'
- en: '| `data` | Log files, databases |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '| `data` | 日志文件、数据库 |'
- en: '| `docs` | MySQL manual in info format |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| `docs` | 以info格式的MySQL手册 |'
- en: '| `man` | Unix manual pages |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '| `man` | Unix手册页 |'
- en: '| `include` | Include (header) files |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '| `include` | 包括（头）文件 |'
- en: '| `lib` | Libraries |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '| `lib` | 库 |'
- en: '| `share` | Miscellaneous support files, including error messages, sample configuration
    files, SQL for database installation |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| `share` | 其他支持文件，包括错误消息、示例配置文件、用于数据库安装的SQL |'
- en: There's more...
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'There are other installation methods, such as:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他安装方法，例如：
- en: Compiling from the source code. You can compile and build MySQL from the source
    code provided by Oracle where you have the flexibility to customize build parameters,
    compiler optimizations, and the installation location. It is highly recommended
    to use precompiled binaries provided by Oracle, unless you want specific compiler
    options or you are debugging MySQL.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从源代码编译。您可以从Oracle提供的源代码中编译和构建MySQL，从而可以灵活定制构建参数、编译器优化和安装位置。强烈建议使用Oracle提供的预编译二进制文件，除非您需要特定的编译器选项或者您正在调试MySQL。
- en: This method is not covered as it is used very rarely and it requires several
    development tools, which is beyond the scope of this book. For installation through
    source code, you can refer to the reference manual, at [https://dev.mysql.com/doc/refman/8.0/en/source-installation.html](https://dev.mysql.com/doc/refman/8.0/en/source-installation.html).
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法很少使用，需要几个开发工具，超出了本书的范围。有关通过源代码安装的安装方法，您可以参考参考手册，网址为[https://dev.mysql.com/doc/refman/8.0/en/source-installation.html](https://dev.mysql.com/doc/refman/8.0/en/source-installation.html)。
- en: Using Docker. The MySQL server can also be installed and managed using Docker
    image. Refer to [https://hub.docker.com/r/mysql/mysql-server/](https://hub.docker.com/r/mysql/mysql-server/)
    for installation, configuration, and also how to use MySQL under Docker.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用Docker。MySQL服务器也可以使用Docker镜像安装和管理。有关安装、配置以及如何在Docker下使用MySQL，请参阅[https://hub.docker.com/r/mysql/mysql-server/](https://hub.docker.com/r/mysql/mysql-server/)。
- en: Starting or Stopping MySQL 8
  id: totrans-178
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 启动或停止MySQL 8
- en: After the installation is completed, you can start/stop MySQL using the following
    commands, which vary from different platforms and installation methods. `mysqld`
    is the `mysql` server process. All the startup methods invoke the `mysqld` script.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，您可以使用以下命令启动/停止MySQL，这些命令因不同平台和安装方法而异。`mysqld`是`mysql`服务器进程。所有启动方法都调用`mysqld`脚本。
- en: How to do it...
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: Let's look at it in detail. Along with the starting and stopping, we will also
    learn something about checking the status of the server. Let's see how.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们详细看看。除了启动和停止之外，我们还将了解有关检查服务器状态的一些内容。让我们看看如何。
- en: Starting the MySQL 8.0 server
  id: totrans-182
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 启动MySQL 8.0服务器
- en: 'You can start the server with the following commands:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用以下命令启动服务器：
- en: 'Using `service`:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`service`：
- en: '[PRE43]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'Using `init.d`:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`init.d`：
- en: '[PRE44]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: If you do not find the startup script (when you are doing binary installation),
    you can copy from the location where you untarred.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果找不到启动脚本（在进行二进制安装时），可以从解压位置复制。
- en: '[PRE45]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'If your installation includes `systemd` support:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您的安装包括`systemd`支持：
- en: '[PRE46]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'If the `systemd` support is not there, MySQL can be started using `mysqld_safe`.
    `mysqld_safe` is the launcher script for `mysqld` that safeguards the `mysqld`
    process. If `mysqld` is killed, `mysqld_safe` attempts to start the process again:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果没有`systemd`支持，可以使用`mysqld_safe`启动MySQL。`mysqld_safe`是`mysqld`的启动脚本，用于保护`mysqld`进程。如果`mysqld`被杀死，`mysqld_safe`会尝试重新启动进程：
- en: '[PRE47]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: After start,
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 启动后，
- en: The server is initialized.
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务器已初始化。
- en: The SSL certificate and key files are generated in the `data directory`.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SSL证书和密钥文件在`数据目录`中生成。
- en: The `validate_password` plugin is installed and enabled.
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装并启用了`validate_password`插件。
- en: 'A superuser account, `root''@''localhost`, is created. A password for the superuser
    is set and stored in the error log file (not for binary installation). To reveal
    it, use the following command:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建了一个超级用户帐户，`root'@'localhost`。为超级用户设置了密码，并将其存储在错误日志文件中（不适用于二进制安装）。要显示它，请使用以下命令：
- en: '[PRE48]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: You can connect to MySQL using that temporary password.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用临时密码连接到MySQL。
- en: '[PRE49]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Change the root password as soon as possible by logging in with the generated
    temporary password and setting a custom password for the superuser account:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尽快使用生成的临时密码登录并为超级用户帐户设置自定义密码更改根密码：
- en: '[PRE50]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: Stopping the MySQL 8.0 server
  id: totrans-204
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 停止MySQL 8.0服务器
- en: 'Stopping MySQL and checking the status are similar to starting it, except for
    the change of one word:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 停止MySQL并检查状态与启动它类似，只是一个单词的变化：
- en: 'Using `service`:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`service`：
- en: '[PRE51]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Using `init.d`:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`init.d`：
- en: '[PRE52]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'If your installation includes the `systemd` support (refer to the *Managing
    MySQL Server* *with systemd* section):'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您的安装包括`systemd`支持（参见*使用systemd管理MySQL服务器*部分）：
- en: '[PRE53]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Using `mysqladmin`:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`mysqladmin`：
- en: '[PRE54]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: Checking the status of the MySQL 8.0 server
  id: totrans-214
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检查MySQL 8.0服务器的状态
- en: 'Using `service`:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`service`：
- en: '[PRE55]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Using `init.d`:'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`init.d`：
- en: '[PRE56]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'If your installation includes the `systemd` support (refer to the *Managing
    MySQL Server with systemd* section):'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您的安装包括`systemd`支持（参见*使用systemd管理MySQL服务器*部分）：
- en: '[PRE57]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: Uninstalling MySQL 8
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 卸载MySQL 8
- en: If you have messed up with installation or you do not want MySQL 8 version,
    you can uninstall using the following steps. Before uninstalling, make sure to
    make backup files (refer to Chapter 7, *Backups*), if required, and stop MySQL.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在安装过程中出现问题或不想要MySQL 8版本，则可以使用以下步骤卸载。在卸载之前，请确保备份文件（参见第7章*备份*），如果需要，请停止MySQL。
- en: How to do it...
  id: totrans-223
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: Uninstalling will be dealt in a different way on different systems. Let's look
    at how.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 在不同系统上，卸载将以不同的方式处理。让我们看看如何。
- en: On YUM-based systems
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在基于YUM的系统上
- en: 'Check whether there are any existing packages:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查是否存在任何现有软件包：
- en: '[PRE58]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Remove the packages. You may be notified that there are other packages dependent
    on MySQL. If you plan on installing MySQL again, you can ignore the warning by
    passing the `--nodeps` option:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除软件包。您可能会收到通知，有其他软件包依赖于MySQL。如果您打算再次安装MySQL，可以通过传递`--nodeps`选项忽略警告：
- en: '[PRE59]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'For example:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 例如：
- en: '[PRE60]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'To remove all packages:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要删除所有软件包：
- en: '[PRE61]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: On APT-based systems
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在基于APT的系统上
- en: 'Check whether there are any existing packages:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查是否存在任何现有软件包：
- en: '[PRE62]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Remove the packages using the following:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令删除软件包：
- en: '[PRE63]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'Or remove them using:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 或使用以下命令删除它们：
- en: '[PRE64]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Verify that the packages are uninstalled:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证软件包是否已卸载：
- en: '[PRE65]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: '`rc` indicates that the packages have been removed (`r`), and only config files
    (`c`) have been kept.'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '`rc`表示软件包已被删除（`r`），只保留了配置文件（`c`）。'
- en: Uninstalling Binaries
  id: totrans-244
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 卸载二进制文件
- en: 'It is very simple to uninstall a binary installation. All you need to do is
    to remove the symlink:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 卸载二进制安装非常简单。您只需要删除符号链接：
- en: 'Change the directory to the installation path:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更改目录到安装路径：
- en: '[PRE66]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'Check where `mysql` is pointing to, which will show the path it is referencing
    to:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查`mysql`指向的位置，这将显示它引用的路径：
- en: '[PRE67]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Remove `mysql`:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除`mysql`：
- en: '[PRE68]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Remove the binaries (optional):'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除二进制文件（可选）：
- en: '[PRE69]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: Managing the MySQL Server with systemd
  id: totrans-254
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用`systemd`管理MySQL服务器
- en: If you install MySQL using an RPM or Debian package server, startup and shutdown
    is managed by `systemd`. On platforms for which the `systemd` support for MySQL
    is installed, `mysqld_safe`, `mysqld_multi`, and `mysqld_multi.server` are not
    installed. MySQL server startup and shutdown is managed by `systemd` using the `systemctl`
    command. You need to configure `systemd` as follows.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用RPM或Debian软件包服务器安装MySQL，则启动和关闭由`systemd`管理。对于安装了MySQL的平台，不会安装`mysqld_safe`，`mysqld_multi`和`mysqld_multi.server`。MySQL服务器的启动和关闭由`systemd`使用`systemctl`命令进行管理。您需要配置`systemd`如下。
- en: RPM-based systems use the `mysqld.service` files, and APT-based systems use
    the `mysql.server` files.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 基于RPM的系统使用`mysqld.service`文件，基于APT的系统使用`mysql.server`文件。
- en: How to do it...
  id: totrans-257
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Create a localized `systemd` configuration file:'
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建本地化的`systemd`配置文件：
- en: '[PRE70]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'Create/open the `conf` file:'
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建/打开`conf`文件：
- en: '[PRE71]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'Enter the following:'
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下内容：
- en: '[PRE72]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'Reload `systemd`:'
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新加载`systemd`：
- en: '[PRE73]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'For temporary changes, you can reload without editing the `conf` file:'
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于临时更改，您可以在不编辑`conf`文件的情况下重新加载：
- en: '[PRE74]'
  id: totrans-267
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: After modifying the `systemd` environment, restart the server to make the changes
    effective.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 修改`systemd`环境后，重新启动服务器以使更改生效。
- en: 'Enable `mysql.serviceshell> sudo systemctl`, and enable `mysql.service`:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 启用`mysql.serviceshell> sudo systemctl`，并启用`mysql.service`：
- en: '[PRE75]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'Restart `mysql`:'
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动`mysql`：
- en: 'On RPM platforms:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 在RPM平台上：
- en: '[PRE76]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'On Debian platforms:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 在Debian平台上：
- en: '[PRE77]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: Downgrading from MySQL 8.0
  id: totrans-276
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从MySQL 8.0降级
- en: If your application is not performing as expected, you can always downgrade
    to a previous GA release (MySQL 5.7). Before downgrading, it is recommended to
    take a logical backup (refer to Chapter 7, *Backups*). Note that you can downgrade
    by only one previous release. Suppose that you want to downgrade from MySQL 8.0
    to MySQL 5.6, you have to downgrade to MySQL 5.7, and then from MySQL 5.7 to MySQL
    5.6.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的应用程序表现不如预期，您可以随时降级到以前的GA版本（MySQL 5.7）。在降级之前，建议进行逻辑备份（参考第7章*备份*）。请注意，您只能降级一个先前的版本。假设您想要从MySQL
    8.0降级到MySQL 5.6，您必须先降级到MySQL 5.7，然后从MySQL 5.7降级到MySQL 5.6。
- en: 'You can do it in two ways:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过两种方式完成：
- en: In-place downgrade (downgrades within MySQL 8)
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 原地降级（在MySQL 8内部降级）
- en: Logical downgrade
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 逻辑降级
- en: How to do it...
  id: totrans-281
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: In the following subsections, you will be learning how to handle the installation/uninstallation/upgrade/downgrade
    using various repositories, bundles, and so on.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下小节中，您将学习如何使用各种存储库、捆绑包等处理安装/卸载/升级/降级。
- en: In-place Downgrades
  id: totrans-283
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 原地降级
- en: 'For downgrades between the GA status releases within MySQL 8.0 (note that you
    cannot downgrade to MySQL 5.7 using this method):'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 在MySQL 8.0中的GA状态发布之间进行降级（请注意，您不能使用此方法降级到MySQL 5.7）：
- en: Shut down the old MySQL version
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭旧的MySQL版本
- en: Replace the MySQL 8.0 binaries or older binaries
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 替换MySQL 8.0二进制文件或旧的二进制文件
- en: Restart MySQL on the existing `data directory`
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在现有的`数据目录`上重新启动MySQL
- en: Run the `mysql_upgrade` utility
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`mysql_upgrade`实用程序
- en: Using YUM repositories
  id: totrans-289
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM存储库
- en: 'Prepare MySQL for a slow shutdown, which ensures that the undo logs are empty
    and data files are fully prepared in case of file format differences between releases:'
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 准备MySQL进行缓慢关闭，以确保撤消日志为空，并且数据文件在不同版本之间的文件格式差异的情况下已完全准备好：
- en: '[PRE78]'
  id: totrans-291
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'Shut down the `mysql` server as described in the *Stopping MySQL 8.0 Server* section:'
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照*停止MySQL 8.0服务器*部分中的说明关闭`mysql`服务器：
- en: '[PRE79]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'Remove the `InnoDB` redo log files (the `ib_logfile*` files) from the `data
    directory` to avoid downgrade issues related to redo log file format changes that
    may have occurred between releases:'
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`数据目录`中删除`InnoDB`重做日志文件（`ib_logfile*`文件），以避免降级问题与重做日志文件格式更改之间的关联，这些更改可能发生在版本之间：
- en: '[PRE80]'
  id: totrans-295
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: Downgrade MySQL. To downgrade the server, you need to uninstall MySQL 8.0, as
    described in the *Uninstalling MySQL 8* section. The configuration files are automatically
    stored as backup.
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 降级MySQL。要降级服务器，您需要卸载MySQL 8.0，如*卸载MySQL 8*部分中所述。配置文件将自动存储为备份。
- en: 'List the available versions:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 列出可用版本：
- en: '[PRE81]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'Downgrades are tricky; it is better to remove the existing packages before
    downgrading:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 降级很棘手；最好在降级之前删除现有的软件包：
- en: '[PRE82]'
  id: totrans-300
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'Install the older version:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 安装旧版本：
- en: '[PRE83]'
  id: totrans-302
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: Using APT Repositories
  id: totrans-303
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用APT存储库
- en: 'Reconfigure MySQL and choose the older version:'
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新配置MySQL并选择旧版本：
- en: '[PRE84]'
  id: totrans-305
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'Run `apt-get update`:'
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`apt-get update`：
- en: '[PRE85]'
  id: totrans-307
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'Remove the current version:'
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除当前版本：
- en: '[PRE86]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'Install the older version (autoselected since you have reconfigured):'
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装旧版本（自动选择，因为您已经重新配置）：
- en: '[PRE87]'
  id: totrans-311
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: Using the RPM or APT bundle
  id: totrans-312
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM或APT捆绑包
- en: Uninstall the existing packages (refer to the *Uninstalling MySQL 8* section)
    and install the new packages, which can be downloaded from the MySQL Downloads
    (refer to the *Installing MySQL 8.0 using RPMs or DEB files* section).
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 卸载现有的软件包（参考*卸载MySQL 8*部分）并安装新的软件包，可以从MySQL下载（参考*使用RPM或DEB文件安装MySQL 8.0*部分）。
- en: Using Generic Binaries
  id: totrans-314
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用通用二进制文件
- en: 'If you have installed MySQL through binaries, you have to remove the symlink
    to the old version (refer to the *Uninstalling MySQL 8* section) and do a fresh
    installation (refer to the *Installing MySQL on Linux Using Generic Binaries*
    section):'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您通过二进制文件安装了MySQL，您必须删除到旧版本的符号链接（参考*卸载MySQL 8*部分），然后进行新安装（参考*使用通用二进制文件在Linux上安装MySQL*部分）：
- en: Start the server as described in the *Starting or Stopping MySQL 8* section.
    Please note that the start procedure is the same for all the versions.
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照*启动或停止MySQL 8*部分中的说明启动服务器。请注意，所有版本的启动过程相同。
- en: 'Run the `mysql_upgrade` utility:'
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`mysql_upgrade`实用程序：
- en: '[PRE88]'
  id: totrans-318
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'Restart the MySQL server to ensure that any changes made to the system tables
    take effect:'
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动MySQL服务器，以确保对系统表所做的任何更改生效：
- en: '[PRE89]'
  id: totrans-320
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: Logical Downgrades
  id: totrans-321
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 逻辑降级
- en: 'Here is an outline of the steps:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是步骤概述：
- en: Export existing data from the MySQL 8.0 version using logical backup (refer
    to Chapter 7*, Backups* for logical backup methods)
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用逻辑备份从MySQL 8.0版本中导出现有数据（参考第7章*备份*中的逻辑备份方法）
- en: Install MySQL 5.7
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装MySQL 5.7
- en: Load the dump file into the MySQL 5.7 version (refer to Chapter 8, *Restoring
    Data* for restoring methods)
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将转储文件加载到MySQL 5.7版本中（参考*恢复数据*章节中的恢复方法）
- en: Run the `mysql_upgrade` utility
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`mysql_upgrade`实用程序
- en: 'Here are the detailed steps:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是详细步骤：
- en: 'You need to take logical backup of the database. (refer to [Chapter 7](part0250.html#7EDCK0-faa69fe6f4c04957afca3568dcd9cd83),
    *Backups* for a quicker backup called `mydumper`):'
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要对数据库进行逻辑备份。（参考[第7章](part0250.html#7EDCK0-faa69fe6f4c04957afca3568dcd9cd83)，*备份*中的`mydumper`进行更快的备份）：
- en: '[PRE90]'
  id: totrans-329
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: Shut down the MySQL server as described in the *Starting or Stopping MySQL 8*
    section.
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照*启动或停止MySQL 8*部分中的说明关闭MySQL服务器。
- en: 'Move the `data directory`. Instead of restoring the SQL backup (in step 1),
    we can move back the `data directory` if you want to keep MySQL 8:'
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移动`数据目录`。如果要保留MySQL 8，可以将`数据目录`移回（在步骤1中不需要恢复SQL备份）：
- en: '[PRE91]'
  id: totrans-332
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: Downgrade MySQL. To downgrade the server, we need to uninstall MySQL 8\. The
    configuration files are automatically backed up.
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 降级MySQL。要降级服务器，我们需要卸载MySQL 8。配置文件会自动备份。
- en: Using YUM Repositories
  id: totrans-334
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM存储库
- en: 'After the uninstallation, install the older version:'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 卸载后，安装旧版本：
- en: 'Switch the repositories:'
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换存储库：
- en: '[PRE92]'
  id: totrans-337
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'Verify that `mysql57-community` is enabled:'
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证`mysql57-community`已启用：
- en: '[PRE93]'
  id: totrans-339
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'Downgrades are tricky; it is better to remove the existing packages before
    downgrading:'
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 降级很棘手；最好在降级之前删除现有的软件包：
- en: '[PRE94]'
  id: totrans-341
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'List the available versions:'
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 列出可用版本：
- en: '[PRE95]'
  id: totrans-343
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: 'Install MySQL 5.7:'
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装MySQL 5.7：
- en: '[PRE96]'
  id: totrans-345
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: Using APT Repositories
  id: totrans-346
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用APT存储库
- en: 'Reconfigure `apt` to switch to MySQL 5.7:'
  id: totrans-347
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新配置`apt`以切换到MySQL 5.7：
- en: '[PRE97]'
  id: totrans-348
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'Run `apt-get update`:'
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`apt-get update`：
- en: '[PRE98]'
  id: totrans-350
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: 'Remove the current version:'
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除当前版本：
- en: '[PRE99]'
  id: totrans-352
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'Install MySQL 5.7:'
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装MySQL 5.7：
- en: '[PRE100]'
  id: totrans-354
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: Using RPM or APT bundles
  id: totrans-355
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM或APT捆绑包
- en: Uninstall the existing packages (refer to the *Uninstalling MySQL 8* section)
    and install the new packages, which can be downloaded from MySQL Downloads (refer
    to the *Installing MySQL 8 using RPM or DEB files* section).
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 卸载现有的软件包（参考*卸载MySQL 8*部分）并安装新的软件包，可以从MySQL下载（参考*使用RPM或DEB文件安装MySQL 8*部分）下载。
- en: Using Generic Binaries
  id: totrans-357
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用通用二进制文件
- en: If you have installed MySQL through binaries, you have to remove the symlink
    to the old version (refer to the *Uninstalling MySQL 8* section) and do a fresh
    installation (refer to the *Installing MySQL on Linux using Generic Binaries*
    section).
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 如果通过二进制文件安装了MySQL，必须删除到旧版本的符号链接（参考*卸载MySQL 8*部分），然后进行新安装（参考*在Linux上使用通用二进制文件安装MySQL*部分）。
- en: 'Once you have downgraded MySQL, you have to restore the backup and run the `mysql_upgrade`
    utility:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 降级MySQL后，必须恢复备份并运行`mysql_upgrade`实用程序：
- en: Start MySQL (refer to the *Starting or Stopping MySQL 8* section). You need
    to reset the password again.
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动MySQL（参考*启动或停止MySQL 8*部分）。您需要再次重置密码。
- en: 'Restore the backup (this may take a long time, depending up on the size of
    backup). Refer to [Chapter 8](part0296.html#8Q96G0-faa69fe6f4c04957afca3568dcd9cd83),
    *Restoring Data*, for a quick restoration method called `myloader`:'
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 恢复备份（这可能需要很长时间，具体取决于备份的大小）。参考[第8章](part0296.html#8Q96G0-faa69fe6f4c04957afca3568dcd9cd83)，*恢复数据*，了解名为`myloader`的快速恢复方法：
- en: '[PRE101]'
  id: totrans-362
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: 'Run `mysql_upgrade`:'
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`mysql_upgrade`：
- en: '[PRE102]'
  id: totrans-364
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: 'Restart the MySQL server to ensure that any changes made to the system tables
    take effect. Refer to the *Starting or Stopping MySQL 8* section:'
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动MySQL服务器，以确保对系统表所做的任何更改生效。参考*启动或停止MySQL 8*部分：
- en: '[PRE103]'
  id: totrans-366
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: Upgrading to MySQL 8.0
  id: totrans-367
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 升级到MySQL 8.0
- en: MySQL 8 uses a global `data dictionary` containing information about database
    objects in transactional tables. In previous versions, the dictionary data was
    stored in metadata files and non-transactional system tables. You need to upgrade
    your `data directory`  from the file-based structure to the data-dictionary structure.
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL 8使用包含事务表中数据库对象信息的全局`数据字典`。在以前的版本中，字典数据存储在元数据文件和非事务系统表中。您需要将`数据目录`从基于文件的结构升级到数据字典结构。
- en: 'Just like a downgrade, you can upgrade using two methods:'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 与降级一样，可以使用两种方法进行升级：
- en: In-place upgrade
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 原地升级
- en: Logical upgrade
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 逻辑升级
- en: You also should check a few prerequisites before the upgrade.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 在升级之前，您还应该检查一些先决条件。
- en: Getting ready
  id: totrans-373
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Check for obsolete datatypes or triggers that have a missing or empty definer
    or an invalid creation context:'
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查过时的数据类型或触发器，其缺少或空的定义者或无效的创建上下文：
- en: '[PRE104]'
  id: totrans-375
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: 'There must be no partitioned tables that use a storage engine that does not
    have native partitioning support. To identify these tables, execute this query:'
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不能有使用不支持本机分区的存储引擎的分区表。要识别这些表，执行此查询：
- en: '[PRE105]'
  id: totrans-377
  prefs: []
  type: TYPE_PRE
  zh: '[PRE105]'
- en: 'If there are any of these tables, change them to `InnoDB`:'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有这些表，请将它们更改为`InnoDB`：
- en: '[PRE106]'
  id: totrans-379
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: 'Or remove the partitioning:'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 或删除分区：
- en: '[PRE107]'
  id: totrans-381
  prefs: []
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'There must be no tables in the MySQL 5.7 `mysql` system database that have
    the same name as a table used by the MySQL 8.0 `data dictionary`. To identify
    tables with those names, execute this query:'
  id: totrans-382
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: MySQL 5.7 `mysql`系统数据库中不能有与MySQL 8.0 `数据字典`使用的表同名的表。要识别具有这些名称的表，执行此查询：
- en: '[PRE108]'
  id: totrans-383
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: 'There must be no tables that have foreign key constraint names longer than
    64 characters. To identify tables with constraint names that are too long, execute
    this query:'
  id: totrans-384
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 表中不能有外键约束名称超过64个字符。要识别约束名称过长的表，执行此查询：
- en: '[PRE109]'
  id: totrans-385
  prefs: []
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'Tables not supported by MySQL 8.0, such as `ndb`, should be moved to `InnoDB`:'
  id: totrans-386
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不受MySQL 8.0支持的表，如`ndb`，应移至`InnoDB`：
- en: '[PRE110]'
  id: totrans-387
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: How to do it...
  id: totrans-388
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: Just like the previous recipe, the following subsections will take you through
    the details with various systems, bundles, and so on.
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 与以前的方法一样，以下各小节将带您了解各种系统、捆绑包等的详细信息。
- en: In-place upgrades
  id: totrans-390
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 原地升级
- en: 'Here is an outline of the steps:'
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是步骤概述：
- en: Shut down the old MySQL version.
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭旧的MySQL版本。
- en: Replace the old MySQL binaries or packages with the new ones (detailed steps
    for different types of installation methods are covered).
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用新的MySQL二进制文件或软件包替换旧的（详细步骤涵盖了不同类型安装方法）。
- en: Restart MySQL on the existing `data directory`.
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在现有的`数据目录`上重新启动MySQL。
- en: Run the `mysql_upgrade` utility.
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`mysql_upgrade`实用程序。
- en: 'In the MySQL 5.7 server, if there are encrypted `InnoDB` tablespaces**,** rotate
    the `keyring` master key by executing this statement:'
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在MySQL 5.7服务器上，如果有加密的`InnoDB`表空间，通过执行此语句来旋转`keyring`主密钥：
- en: '[PRE111]'
  id: totrans-397
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: 'Here are the detailed steps:'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是详细步骤：
- en: Configure your MySQL 5.7 server to perform a slow shutdown. With a slow shutdown,
    `InnoDB` performs a full purge and change buffer merge before shutting down, which
    ensures that the undo logs are empty and the data files are fully prepared in
    case of file format differences between releases.
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置您的MySQL 5.7服务器以执行慢关闭。通过慢关闭，`InnoDB`在关闭之前执行完整的清除和更改缓冲区合并，以确保撤消日志为空，并且数据文件在发布之间的文件格式差异的情况下已经准备就绪。
- en: 'This step is the most important because, without it, you will end up with the
    following error:'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 这一步是最重要的，因为如果没有进行这一步，您将遇到以下错误：
- en: '[PRE112]'
  id: totrans-401
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: 'This redo log was created with MySQL 5.7.18\. Please follow the instructions
    at [http://dev.mysql.com/doc/refman/8.0/en/upgrading.html](http://dev.mysql.com/doc/refman/8.0/en/upgrading.html):'
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 此重做日志是使用MySQL 5.7.18创建的。请按照[http://dev.mysql.com/doc/refman/8.0/en/upgrading.html](http://dev.mysql.com/doc/refman/8.0/en/upgrading.html)上的说明进行操作：
- en: '[PRE113]'
  id: totrans-403
  prefs: []
  type: TYPE_PRE
  zh: '[PRE113]'
- en: Shut down the MySQL server as described in the *Starting or Stopping MySQL 8*
    section.
  id: totrans-404
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照*启动或停止MySQL 8*部分中的描述关闭MySQL服务器。
- en: Upgrade the MySQL binaries or packages.
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 升级MySQL二进制文件或软件包。
- en: YUM-based systems
  id: totrans-406
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于YUM的系统
- en: 'Switch the repositories:'
  id: totrans-407
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换存储库：
- en: '[PRE114]'
  id: totrans-408
  prefs: []
  type: TYPE_PRE
  zh: '[PRE114]'
- en: 'Verify that `mysql80-community` is enabled:'
  id: totrans-409
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证`mysql80-community`是否已启用：
- en: '[PRE115]'
  id: totrans-410
  prefs: []
  type: TYPE_PRE
  zh: '[PRE115]'
- en: 'Run the yum update:'
  id: totrans-411
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行yum update：
- en: '[PRE116]'
  id: totrans-412
  prefs: []
  type: TYPE_PRE
  zh: '[PRE116]'
- en: APT-based systems
  id: totrans-413
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于APT的系统
- en: 'Reconfigure the `apt` to switch to MySQl 8.0:'
  id: totrans-414
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新配置`apt`以切换到MySQL 8.0：
- en: '[PRE117]'
  id: totrans-415
  prefs: []
  type: TYPE_PRE
  zh: '[PRE117]'
- en: 'Run `apt-get update`:'
  id: totrans-416
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`apt-get update`：
- en: '[PRE118]'
  id: totrans-417
  prefs: []
  type: TYPE_PRE
  zh: '[PRE118]'
- en: 'Remove the current version:'
  id: totrans-418
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除当前版本：
- en: '[PRE119]'
  id: totrans-419
  prefs: []
  type: TYPE_PRE
  zh: '[PRE119]'
- en: 'Install MySQL 8:'
  id: totrans-420
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装MySQL 8：
- en: '[PRE120]'
  id: totrans-421
  prefs: []
  type: TYPE_PRE
  zh: '[PRE120]'
- en: Using RPM or APT bundles
  id: totrans-422
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM或APT捆绑包
- en: Uninstall the existing packages (refer to the *Uninstalling MySQL 8* section)
    and install the new packages, which can be downloaded from MySQL Downloads (refer
    to the *Installing MySQL 8.0 using RPM or DEB files* section).
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: 卸载现有的软件包（参考*卸载MySQL 8*部分），并安装新的软件包，可以从MySQL下载（参考*使用RPM或DEB文件安装MySQL 8.0*部分）。
- en: Using Generic Binaries
  id: totrans-424
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用通用二进制文件
- en: If you have installed MySQL through binaries, you have to remove the symlink
    to the old version (refer to the *Uninstalling MySQL 8* section) and do a fresh
    installation (refer to the *Installing MySQL on Linux using generic binaries*
    section).
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您通过二进制文件安装了MySQL，则必须删除到旧版本的符号链接（参考*卸载MySQL 8*部分），并进行新安装（参考*使用通用二进制文件在Linux上安装MySQL*部分）。
- en: Start the MySQL 8.0 server (refer to the *Starting or Stopping MySQL 8 to start
    MySQL* section). If there are encrypted `InnoDB` tablespaces, use the `--early-plugin-load`
    option to load the `keyring` plugin.
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 启动MySQL 8.0服务器（参考*启动或停止MySQL 8以启动MySQL*部分）。如果有加密的`InnoDB`表空间，请使用`--early-plugin-load`选项加载`keyring`插件。
- en: The server automatically detects whether `data dictionary` tables are present.
    If not, the server creates them in the `data directory` , populates them with
    metadata, and then proceeds with its normal startup sequence. During this process,
    the server upgrades metadata for all database objects, including databases, tablespaces,
    system and user tables, views, and stored programs (stored procedures and functions,
    triggers, event scheduler events). The server also removes files that previously
    were used for metadata storage. For example, after upgrading, you will notice
    that your tables no longer have `.frm` files.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器会自动检测`数据字典`表是否存在。如果没有，服务器将在`数据目录`中创建它们，填充它们的元数据，然后继续其正常的启动顺序。在此过程中，服务器将升级所有数据库对象的元数据，包括数据库、表空间、系统和用户表、视图和存储程序（存储过程和函数、触发器、事件调度器事件）。服务器还会删除以前用于存储元数据的文件。例如，升级后，您会注意到您的表不再有`.frm`文件。
- en: The server creates a directory named `backup_metadata_57` and moves the files
    used by MySQL 5.7 into it. The server renames the `event` and `proc` tables to
    `event_backup_57` and `proc_backup_57`. If this upgrade fails, the server reverts
    all changes to the `data directory`. In this case, you should remove all redo
    log files, start your MySQL 5.7 server on the same `data directory`, and fix the
    cause of any errors. Then, perform another slow shutdown of the 5.7 server and
    start the MySQL 8.0 server to try again.
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器创建一个名为`backup_metadata_57`的目录，并将MySQL 5.7使用的文件移入其中。服务器将`event`和`proc`表重命名为`event_backup_57`和`proc_backup_57`。如果升级失败，服务器将所有更改恢复到`数据目录`。在这种情况下，您应该删除所有重做日志文件，在相同的`数据目录`上启动您的MySQL
    5.7服务器，并修复任何错误的原因。然后，执行另一个MySQL 5.7服务器的慢关闭，并启动MySQL 8.0服务器再次尝试。
- en: 'Run the `mysql_upgrade` utility:'
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 运行`mysql_upgrade`实用程序：
- en: '[PRE121]'
  id: totrans-430
  prefs: []
  type: TYPE_PRE
  zh: '[PRE121]'
- en: '`mysql_upgrade` examines all tables in all databases for incompatibilities
    with the current version of MySQL. It makes any remaining changes required in
    the `mysql` system database between MySQL 5.7 and MySQL 8.0, so that you can take
    advantage of new privileges or capabilities. `mysql_upgrade` also brings the performance
    schema, `INFORMATION_SCHEMA`, and `sys schema` objects up to date for MySQL 8.0.'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: '`mysql_upgrade`检查所有数据库中的所有表与当前版本的MySQL的不兼容性。它在MySQL 5.7和MySQL 8.0之间的`mysql`系统数据库中进行任何剩余的更改，以便您可以利用新的权限或功能。`mysql_upgrade`还将性能模式、`INFORMATION_SCHEMA`和`sys
    schema`对象更新到MySQL 8.0的最新状态。'
- en: Restart the MySQL server (refer to the *Starting or Stopping MySQL 8 to start
    MySQL* section).
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 重新启动MySQL服务器（参考*启动或停止MySQL 8以启动MySQL*部分）。
- en: Logical Upgrades
  id: totrans-433
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 逻辑升级
- en: 'Here is an outline of the steps:'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是步骤概述：
- en: Export existing data from the old MySQL version using `mysqldump`
  id: totrans-435
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`mysqldump`从旧的MySQL版本中导出现有数据
- en: Install the new MySQL version
  id: totrans-436
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装新的MySQL版本
- en: Load the dump file into the new MySQL version
  id: totrans-437
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将转储文件加载到新的MySQL版本中
- en: Run the `mysql_upgrade` utility
  id: totrans-438
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`mysql_upgrade`实用程序
- en: 'Here are the detailed steps:'
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是详细步骤：
- en: 'You need to take a logical backup of the database (refer to [Chapter 7](part0250.html#7EDCK0-faa69fe6f4c04957afca3568dcd9cd83),
    *Backups* for a quicker backup called `mydumper`):'
  id: totrans-440
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要对数据库进行逻辑备份（参考[第7章](part0250.html#7EDCK0-faa69fe6f4c04957afca3568dcd9cd83)，*备份*中的`mydumper`进行更快的备份）：
- en: '[PRE122]'
  id: totrans-441
  prefs: []
  type: TYPE_PRE
  zh: '[PRE122]'
- en: Shut down the MySQL server (refer to the *Starting or Stopping MySQL 8* section).
  id: totrans-442
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭MySQL服务器（参考*启动或停止MySQL 8*部分）。
- en: Install the new MySQL version (refer to the methods mentioned in the *In-place
    upgrades* section).
  id: totrans-443
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装新的MySQL版本（参考*就地升级*部分）。
- en: Start the MySQL server (refer to the *Starting or Stopping MySQL 8* section).
  id: totrans-444
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动MySQL服务器（参考“启动或停止MySQL 8”部分）。
- en: 'Reset the temporary `root` password:'
  id: totrans-445
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重置临时`root`密码：
- en: '[PRE123]'
  id: totrans-446
  prefs: []
  type: TYPE_PRE
  zh: '[PRE123]'
- en: 'Restore the backup (this may take a long time depending up on the size of the
    backup). Refer to [Chapter 8](part0296.html#8Q96G0-faa69fe6f4c04957afca3568dcd9cd83),
    *Restoring Data* for a quick restoration method called `myloader`:'
  id: totrans-447
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 恢复备份（这可能需要很长时间，具体取决于备份的大小）。参考第8章“恢复数据”中的`myloader`快速恢复方法：
- en: '[PRE124]'
  id: totrans-448
  prefs: []
  type: TYPE_PRE
  zh: '[PRE124]'
- en: 'Run the `mysql_upgrade` utility:'
  id: totrans-449
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行`mysql_upgrade`实用程序：
- en: '[PRE125]'
  id: totrans-450
  prefs: []
  type: TYPE_PRE
  zh: '[PRE125]'
- en: Restart the MySQL server (refer to the *Starting or Stopping MySQL 8* section).
  id: totrans-451
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动MySQL服务器（参考“启动或停止MySQL 8”部分）。
- en: Installing MySQL utilities
  id: totrans-452
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装MySQL实用工具
- en: MySQL utilities gives you very handy tools to smoothly carry out day-to-day
    operations without much manual effort.
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: MySQL实用工具为您提供非常方便的工具，可以在没有太多手动操作的情况下顺利进行日常操作。
- en: How to do it...
  id: totrans-454
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: It can be installed on YUM-based and APT-based systems in the following manner.
    Let's take a look.
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过以下方式在基于YUM和APT的系统上安装。让我们来看看。
- en: On YUM-based systems
  id: totrans-456
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在基于YUM的系统上
- en: 'Download the files from the MySQL downloads page, [https://dev.mysql.com/downloads/utilities/](https://dev.mysql.com/downloads/utilities/),
    by selecting Red Hat Enterprise Linux/Oracle Linux, or directly from this link,
    using `wget`:'
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: 从MySQL下载页面[https://dev.mysql.com/downloads/utilities/]下载文件，选择Red Hat Enterprise
    Linux/Oracle Linux，或直接使用`wget`从此链接下载：
- en: '[PRE126]'
  id: totrans-458
  prefs: []
  type: TYPE_PRE
  zh: '[PRE126]'
- en: On APT-based systems
  id: totrans-459
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在基于APT的系统上
- en: 'Download the files from the MySQL Downloads page, [https://dev.mysql.com/downloads/utilities/](https://dev.mysql.com/downloads/utilities/),
    by selecting Ubuntu Linux,  or directly from this link, using `wget`:'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 从MySQL下载页面[https://dev.mysql.com/downloads/utilities/]下载文件，选择Ubuntu Linux，或直接使用`wget`从此链接下载：
- en: '[PRE127]'
  id: totrans-461
  prefs: []
  type: TYPE_PRE
  zh: '[PRE127]'
