# 第二章：使用 MySQL

在本章中，我们将介绍以下内容：

+   使用命令行客户端连接到 MySQL

+   创建数据库

+   创建表

+   插入、更新和删除行

+   加载示例数据

+   选择数据

+   排序结果

+   分组结果（聚合函数）

+   创建用户

+   授予和撤销用户的访问权限

+   将数据选择到文件和表中

+   将数据加载到表中

+   连接表

+   存储过程

+   函数

+   触发器

+   视图

+   事件

+   获取有关数据库和表的信息

# 介绍

在接下来的教程中，我们将学到很多东西。让我们详细看看每一个。

# 使用命令行客户端连接到 MySQL

到目前为止，您已经学会了如何在各种平台上安装 MySQL 8.0。除了安装之外，您还将获得名为`mysql`的命令行客户端实用程序，我们将用它来连接到任何 MySQL 服务器。

# 准备工作

首先，您需要知道要连接到哪个服务器。如果您在一个主机上安装了 MySQL 服务器，并且正在尝试从不同的主机（通常称为客户端）连接到服务器，则应指定服务器的主机名或 IP 地址，并且客户端上应安装`mysql-client`软件包。在上一章中，您安装了 MySQL 服务器和客户端软件包。如果您已经在服务器上（通过 SSH），可以指定`localhost`、`127.0.0.1`或`::1`。

其次，由于您已连接到服务器，下一步需要指定要连接到服务器的端口。默认情况下，MySQL 在端口`3306`上运行。因此，您应该指定`3306`。

现在您知道要连接到哪里了。下一个明显的事情是用户名和密码以登录服务器。您还没有创建任何用户，因此使用 root 用户进行连接。在安装时，您可能已经提供了密码，请使用该密码进行连接。如果更改了密码，请使用新密码。

# 如何做...

可以使用以下任何命令连接到 MySQL 客户端：

[PRE0]

[PRE1]

[PRE2]

强烈建议不要在命令行中提供密码，而是可以将字段留空；系统会提示您输入密码：

[PRE3]

1.  传递`-P`参数（大写）以指定端口。

1.  传递`-p`参数（小写）以指定密码。

1.  在`-p`参数后没有空格。

1.  对于密码，在`=`后没有空格。

默认情况下，主机被视为`localhost`，端口被视为`3306`，用户被视为当前 shell 用户。

1.  要知道当前用户：

[PRE4]

1.  要断开连接，请按*Ctrl *+ *D*或输入`exit`：

[PRE5]

或使用：

[PRE6]

1.  连接到`mysql`提示后，您可以执行后跟分隔符的语句。默认分隔符是分号（`;`）：

[PRE7]

1.  要取消命令，请按*Ctrl *+ *C*或输入`\c`：

[PRE8]

不建议使用 root 用户连接到 MySQL。您可以创建用户并通过授予适当的权限来限制用户，这将在*创建用户*和*授予和撤销用户的访问权限*部分中讨论。在那之前，您可以使用 root 用户连接到 MySQL。

# 另请参阅

连接后，您可能会注意到一个警告：

[PRE9]

要了解安全连接的安全方式，请参阅第十四章，*安全*。

一旦连接到命令行提示符，您可以执行 SQL 语句，这些语句可以由`;`、`\g`或`\G`终止。

`;`或`\g`—输出水平显示，`\G`—输出垂直显示。

# 创建数据库

好了，您已经安装了 MySQL 8.0 并连接到了它。现在是时候在其中存储一些数据了，毕竟这就是数据库的用途。在任何**关系数据库管理系统**（**RDBMS**）中，数据存储在行中，这是数据库的基本构建块。行包含列，我们可以在其中存储多组值。

例如，如果您想在数据库中存储有关客户的信息。

这是数据集：

[PRE10]

你应该将它们保存为行：`(1, 'Mike', 'Christensen', 'USA')`, `(2, 'Andy', 'Hollands', 'Australia')`, `(3, 'Ravi', 'Vedantam', 'India')`, `(4, 'Rajiv', 'Perera', 'Sri Lanka')`。对于这个数据集，有三列描述的四行（id，first_name，last_name 和 country），它们存储在一个表中。表可以容纳的列数应该在创建表的时候定义，这是关系数据库管理系统的主要限制。但是，我们可以随时更改表的定义，但在这样做时应该重建整个表。在某些情况下，更改表时表将不可用。表的更改将在第九章中详细讨论，*表维护*。

数据库是许多表的集合，数据库服务器可以容纳许多这些数据库。流程如下：

数据库服务器—>数据库—>表（由列定义）—>行

数据库和表被称为数据库对象。任何操作，如创建、修改或删除数据库对象，都称为**数据定义语言**（**DDL**）。

数据的组织作为数据库构建的蓝图（分为数据库和表）称为**模式**。

# 如何做...

连接到 MySQL 服务器：

[PRE11]

反引号字符（`` ` ``）用于引用标识符，如数据库和表名。当数据库名称包含特殊字符，如点(`.`)时，您需要使用它。

[PRE180]

或者您可以执行`SHOW PROCESSLIST;`以获得相同的输出。

**其他表**：`ROUTINES`包含函数和存储过程的定义。`TRIGGERS`包含触发器的定义。`VIEWS`包含视图的定义。

# 另请参阅

要了解`INFORMATION_SCHEMA`的改进，请参阅[`mysqlserverteam.com/mysql-8-0-improvements-to-information_schema/`](http://mysqlserverteam.com/mysql-8-0-improvements-to-information_schema/)。
