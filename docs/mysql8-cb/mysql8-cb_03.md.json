["```go\nCREATE TABLE emp_details( \n  emp_no int primary key, \n  details json \n);\n```", "```go\nINSERT INTO emp_details(emp_no, details)\nVALUES ('1',\n'{ \"location\": \"IN\", \"phone\": \"+11800000000\", \"email\": \"abc@example.com\", \"address\": { \"line1\": \"abc\", \"line2\": \"xyz street\", \"city\": \"Bangalore\", \"pin\": \"560103\"} }'\n);\n```", "```go\nmysql> SELECT emp_no, details->'$.address.pin' pin FROM emp_details;\n+--------+----------+\n| emp_no | pin      |\n+--------+----------+\n| 1      | \"560103\" |\n+--------+----------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> SELECT emp_no, details->>'$.address.pin' pin FROM emp_details;\n+--------+--------+\n| emp_no | pin    |\n+--------+--------+\n| 1      | 560103 |\n+--------+--------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> SELECT emp_no, JSON_PRETTY(details) FROM emp_details \\G\n*************************** 1\\. row ***************************\n emp_no: 1\nJSON_PRETTY(details): {\n \"email\": \"abc@example.com\",\n \"phone\": \"+11800000000\",\n \"address\": {\n \"pin\": \"560103\",\n \"city\": \"Bangalore\",\n \"line1\": \"abc\",\n \"line2\": \"xyz street\"\n },\n \"location\": \"IN\"\n}\n1 row in set (0.00 sec)\n```", "```go\nmysql> SELECT emp_no, details FROM emp_details \\G\n*************************** 1\\. row ***************************\n emp_no: 1\ndetails: {\"email\": \"abc@example.com\", \"phone\": \"+11800000000\", \"address\": {\"pin\": \"560100\", \"city\": \"Bangalore\", \"line1\": \"abc\", \"line2\": \"xyz street\"}, \"location\": \"IN\"}\n1 row in set (0.00 sec)\n```", "```go\nmysql> SELECT emp_no FROM emp_details WHERE details->>'$.address.pin'=\"560103\";\n+--------+\n| emp_no |\n+--------+\n| 1      |\n+--------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> SELECT JSON_CONTAINS(details->>'$.address.pin', \"560103\") FROM emp_details;\n+----------------------------------------------------+\n| JSON_CONTAINS(details->>'$.address.pin', \"560103\") |\n+----------------------------------------------------+\n| 1                                                  |\n+----------------------------------------------------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> SELECT JSON_CONTAINS_PATH(details, 'one', \"$.address.line1\") FROM emp_details;\n+--------------------------------------------------------------------------+\n| JSON_CONTAINS_PATH(details, 'one', \"$.address.line1\")                    |\n+--------------------------------------------------------------------------+\n| 1                                                                        |\n+--------------------------------------------------------------------------+\n1 row in set (0.01 sec)\n```", "```go\nmysql> SELECT JSON_CONTAINS_PATH(details, 'one', \"$.address.line1\", \"$.address.line5\") FROM emp_details;\n+--------------------------------------------------------------------------+\n| JSON_CONTAINS_PATH(details, 'one', \"$.address.line1\", \"$.address.line2\") |\n+--------------------------------------------------------------------------+\n| 1                                                                        |\n+--------------------------------------------------------------------------+\n```", "```go\nmysql> SELECT JSON_CONTAINS_PATH(details, 'all', \"$.address.line1\", \"$.address.line5\") FROM emp_details;\n+--------------------------------------------------------------------------+\n| JSON_CONTAINS_PATH(details, 'all', \"$.address.line1\", \"$.address.line5\") |\n+--------------------------------------------------------------------------+\n| 0                                                                        |\n+--------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> UPDATE \n    emp_details \nSET \n    details = JSON_SET(details, \"$.address.pin\", \"560100\", \"$.nickname\", \"kai\")\nWHERE \n    emp_no = 1;\nQuery OK, 1 row affected (0.03 sec)\nRows matched: 1 Changed: 1 Warnings: 0\n```", "```go\nmysql> UPDATE emp_details SET details=JSON_INSERT(details, \"$.address.pin\", \"560132\", \"$.address.line4\", \"A Wing\") WHERE emp_no = 1;\nQuery OK, 1 row affected (0.00 sec)\nRows matched: 1 Changed: 1 Warnings: 0\n```", "```go\nmysql> UPDATE emp_details SET details=JSON_REPLACE(details, \"$.address.pin\", \"560132\", \"$.address.line5\", \"Landmark\") WHERE \nemp_no = 1;\nQuery OK, 1 row affected (0.04 sec)\nRows matched: 1 Changed: 1 Warnings: 0\n```", "```go\nmysql> UPDATE emp_details SET details=JSON_REMOVE(details, \"$.address.line5\") WHERE emp_no = 1;\nQuery OK, 1 row affected (0.04 sec)\nRows matched: 1 Changed: 1 Warnings: 0\n```", "```go\nmysql> SELECT JSON_KEYS(details) FROM emp_details WHERE emp_no = 1;\n*************************** 1\\. row ***************************\nJSON_KEYS(details): [\"email\", \"phone\", \"address\", \"nickname\", \"locatation\"]\n```", "```go\nmysql> SELECT JSON_LENGTH(details) FROM emp_details WHERE emp_no = 1;\n*************************** 1\\. row ***************************\nJSON_LENGTH(details): 5\n```", "```go\nSELECT... FROM (subquery) AS derived, t1 ...\n```", "```go\nSELECT... WITH derived AS (subquery) SELECT ... FROM derived, t1 ...\n```", "```go\nDELETE FROM t1 WHERE t1.a IN (SELECT b FROM derived);\n```", "```go\nmysql> SELECT \n    q1.year, \n    q2.year AS next_year, \n    q1.sum, \n    q2.sum AS next_sum, \n    100*(q2.sum-q1.sum)/q1.sum AS pct \nFROM \n    (SELECT year(from_date) as year, sum(salary) as sum FROM salaries GROUP BY year) AS q1,             (SELECT year(from_date) as year, sum(salary) as sum FROM salaries GROUP BY year) AS q2 \nWHERE q1.year = q2.year-1;\n+------+-----------+-------------+-------------+----------+\n| year | next_year | sum         | next_sum    | pct      |\n+------+-----------+-------------+-------------+----------+\n| 1985 |      1986 | 972864875   | 2052895941  | 111.0155 |\n| 1986 |      1987 | 2052895941  | 3156881054  | 53.7770  |\n| 1987 |      1988 | 3156881054  | 4295598688  | 36.0710  |\n| 1988 |      1989 | 4295598688  | 5454260439  | 26.9732  |\n| 1989 |      1990 | 5454260439  | 6626146391  | 21.4857  |\n| 1990 |      1991 | 6626146391  | 7798804412  | 17.6974  |\n| 1991 |      1992 | 7798804412  | 9027872610  | 15.7597  |\n| 1992 |      1993 | 9027872610  | 10215059054 | 13.1502  |\n| 1993 |      1994 | 10215059054 | 11429450113 | 11.8882  |\n| 1994 |      1995 | 11429450113 | 12638817464 | 10.5812  |\n| 1995 |      1996 | 12638817464 | 13888587737 | 9.8883   |\n| 1996 |      1997 | 13888587737 | 15056011781 | 8.4056   |\n| 1997 |      1998 | 15056011781 | 16220495471 | 7.7343   |\n| 1998 |      1999 | 16220495471 | 17360258862 | 7.0267   |\n| 1999 |      2000 | 17360258862 | 17535667603 | 1.0104   |\n| 2000 |      2001 | 17535667603 | 17507737308 | -0.1593  |\n| 2001 |      2002 | 17507737308 | 10243358658 | -41.4924 |\n+------+-----------+-------------+-------------+----------+\n17 rows in set (3.22 sec)\n```", "```go\nmysql> \nWITH CTE AS \n    (SELECT year(from_date) AS year, SUM(salary) AS sum FROM salaries GROUP BY year) \nSELECT \n    q1.year, q2.year as next_year, q1.sum, q2.sum as next_sum, 100*(q2.sum-q1.sum)/q1.sum as pct FROM \n    CTE AS q1, \n    CTE AS q2 \nWHERE \n    q1.year = q2.year-1;\n+------+-----------+-------------+-------------+----------+\n| year | next_year | sum         | next_sum    | pct      |\n+------+-----------+-------------+-------------+----------+\n| 1985 |      1986 | 972864875   | 2052895941  | 111.0155 |\n| 1986 |      1987 | 2052895941  | 3156881054  | 53.7770  |\n| 1987 |      1988 | 3156881054  | 4295598688  | 36.0710  |\n| 1988 |      1989 | 4295598688  | 5454260439  | 26.9732  |\n| 1989 |      1990 | 5454260439  | 6626146391  | 21.4857  |\n| 1990 |      1991 | 6626146391  | 7798804412  | 17.6974  |\n| 1991 |      1992 | 7798804412  | 9027872610  | 15.7597  |\n| 1992 |      1993 | 9027872610  | 10215059054 | 13.1502  |\n| 1993 |      1994 | 10215059054 | 11429450113 | 11.8882  |\n| 1994 |      1995 | 11429450113 | 12638817464 | 10.5812  |\n| 1995 |      1996 | 12638817464 | 13888587737 | 9.8883   |\n| 1996 |      1997 | 13888587737 | 15056011781 | 8.4056   |\n```", "```go\n| 1997 |      1998 | 15056011781 | 16220495471 | 7.7343   |\n| 1998 |      1999 | 16220495471 | 17360258862 | 7.0267   |\n| 1999 |      2000 | 17360258862 | 17535667603 | 1.0104   |\n| 2000 |      2001 | 17535667603 | 17507737308 | -0.1593  |\n| 2001 |      2002 | 17507737308 | 10243358658 | -41.4924 |\n+------+-----------+-------------+-------------+----------+\n17 rows in set (1.63 sec)\n```", "```go\nSELECT ...\n FROM (SELECT ... FROM ...) AS d1, (SELECT ... FROM d1 ...) AS d2 ...\nERROR: 1146 (42S02): Table \u2018db.d1\u2019 doesn\u2019t exist \n```", "```go\nWITH d1 AS (SELECT ... FROM ...), d2 AS (SELECT ... FROM d1 ...) \nSELECT\n FROM d1, d2 ... \n```", "```go\nWITH RECURSIVE cte AS\n(SELECT ... FROM table_name /* seed SELECT */ \nUNION ALL \nSELECT ... FROM cte, table_name) /* \"recursive\" SELECT */ \nSELECT ... FROM cte;\n```", "```go\nmysql> WITH RECURSIVE cte (n) AS \n( SELECT 1 /* seed query */\n  UNION ALL \n  SELECT n + 1 FROM cte WHERE n < 5 /* recursive query */\n) \nSELECT * FROM cte;\n+---+\n| n |\n+---+\n| 1 |\n| 2 |\n| 3 |\n| 4 |\n| 5 |\n+---+\n5 rows in set (0.00 sec)\n```", "```go\nmysql> CREATE TABLE employees_mgr (\n id INT PRIMARY KEY NOT NULL,\n name VARCHAR(100) NOT NULL,\n manager_id INT NULL,\n INDEX (manager_id),\nFOREIGN KEY (manager_id) REFERENCES employees_mgr (id)\n);\n```", "```go\nmysql> INSERT INTO employees_mgr VALUES\n(333, \"Yasmina\", NULL), # Yasmina is the CEO (manager_id is NULL)\n(198, \"John\", 333), # John has ID 198 and reports to 333 (Yasmina)\n(692, \"Tarek\", 333),\n(29, \"Pedro\", 198),\n(4610, \"Sarah\", 29),\n(72, \"Pierre\", 29),\n(123, \"Adil\", 692);\n```", "```go\nmysql> WITH RECURSIVE employee_paths (id, name, path) AS\n(\n SELECT id, name, CAST(id AS CHAR(200))\n FROM employees_mgr\n WHERE manager_id IS NULL\n UNION ALL\n SELECT e.id, e.name, CONCAT(ep.path, ',', e.id)\n FROM employee_paths AS ep JOIN employees_mgr AS e\n ON ep.id = e.manager_id\n)\nSELECT * FROM employee_paths ORDER BY path;\n```", "```go\n+------+---------+-----------------+\n| id   | name    | path            |\n+------+---------+-----------------+\n| 333  | Yasmina | 333             |\n| 198  | John    | 333,198         |\n| 29   | Pedro   | 333,198,29      |\n| 4610 | Sarah   | 333,198,29,4610 |\n| 72   | Pierre  | 333,198,29,72   |\n| 692  | Tarek   | 333,692         |\n| 123  | Adil    | 333,692,123     |\n+------+---------+-----------------+\n7 rows in set (0.00 sec)\n```", "```go\nmysql> CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n `full_name` VARCHAR(30) AS (CONCAT(first_name,' ',last_name)),\n  PRIMARY KEY (`emp_no`),\n  KEY `name` (`first_name`,`last_name`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n```", "```go\nmysql> INSERT INTO employees (emp_no, birth_date, first_name, last_name, gender, hire_date) VALUES (123456, '1987-10-02', 'ABC' , 'XYZ', 'F', '2008-07-28');\n```", "```go\nmysql> INSERT INTO employees (emp_no, birth_date, first_name, last_name, gender, hire_date, full_name) VALUES (123456, '1987-10-02', 'ABC' , 'XYZ', 'F', '2008-07-28', DEFAULT);\n```", "```go\nmysql> SELECT * FROM employees WHERE emp_no=123456;\n+--------+------------+------------+-----------+--------+------------+-----------+\n| emp_no | birth_date | first_name | last_name | gender | hire_date  | full_name |\n+--------+------------+------------+-----------+--------+------------+-----------+\n| 123456 | 1987-10-02 | ABC        | XYZ       | F      | 2017-11-23 | ABC XYZ   |\n+--------+------------+------------+-----------+--------+------------+-----------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> ALTER TABLE employees ADD hire_date_year YEAR AS (YEAR(hire_date)) VIRTUAL;\n```", "```go\nmysql> ALTER TABLE employees ADD hire_date_year YEAR AS (YEAR(hire_date)) VIRTUAL;\n```", "```go\nmysql> SELECT CONCAT(first_name, \" \", last_name) AS full_name, salary, ROW_NUMBER() OVER(ORDER BY salary DESC) AS 'Rank'  FROM employees JOIN salaries ON salaries.emp_no=employees.emp_no LIMIT 10;\n+-------------------+--------+------+\n| full_name         | salary | Rank |\n+-------------------+--------+------+\n| Tokuyasu Pesch    | 158220 |    1 |\n| Tokuyasu Pesch    | 157821 |    2 |\n| Honesty Mukaidono | 156286 |    3 |\n| Xiahua Whitcomb   | 155709 |    4 |\n| Sanjai Luders     | 155513 |    5 |\n| Tsutomu Alameldin | 155377 |    6 |\n| Tsutomu Alameldin | 155190 |    7 |\n| Tsutomu Alameldin | 154888 |    8 |\n| Tsutomu Alameldin | 154885 |    9 |\n| Willard Baca      | 154459 |   10 |\n+-------------------+--------+------+\n10 rows in set (6.24 sec)\n```", "```go\nmysql> SELECT hire_date_year, salary, ROW_NUMBER() OVER(PARTITION BY hire_date_year ORDER BY salary DESC) AS 'Rank' FROM employees JOIN salaries ON salaries.emp_no=employees.emp_no ORDER BY salary DESC LIMIT 10;\n+----------------+--------+------+\n| hire_date_year | salary | Rank |\n+----------------+--------+------+\n|           1985 | 158220 |    1 |\n|           1985 | 157821 |    2 |\n|           1986 | 156286 |    1 |\n|           1985 | 155709 |    3 |\n|           1987 | 155513 |    1 |\n|           1985 | 155377 |    4 |\n|           1985 | 155190 |    5 |\n|           1985 | 154888 |    6 |\n|           1985 | 154885 |    7 |\n|           1985 | 154459 |    8 |\n+----------------+--------+------+\n10 rows in set (8.04 sec)\n```", "```go\nmysql> SELECT hire_date_year, salary, RANK() OVER w AS 'Rank' FROM employees join salaries ON salaries.emp_no=employees.emp_no WINDOW w AS (PARTITION BY hire_date_year ORDER BY salary DESC) ORDER BY salary DESC LIMIT 10;\n+----------------+--------+------+\n| hire_date_year | salary | Rank |\n+----------------+--------+------+\n|           1985 | 158220 |    1 |\n|           1985 | 157821 |    2 |\n|           1986 | 156286 |    1 |\n|           1985 | 155709 |    3 |\n|           1987 | 155513 |    1 |\n|           1985 | 155377 |    4 |\n|           1985 | 155190 |    5 |\n|           1985 | 154888 |    6 |\n|           1985 | 154885 |    7 |\n|           1985 | 154459 |    8 |\n+----------------+--------+------+\n10 rows in set (8.52 sec)\n```", "```go\nmysql> SELECT hire_date_year, salary, RANK() OVER w AS 'Rank', \nFIRST_VALUE(salary) OVER w AS 'first', \nNTH_VALUE(salary, 3) OVER w AS 'third', \nLAST_VALUE(salary) OVER w AS 'last' \nFROM employees join salaries ON salaries.emp_no=employees.emp_no \nWINDOW w AS (PARTITION BY hire_date_year ORDER BY salary DESC) \nORDER BY salary DESC LIMIT 10;\n+----------------+--------+------+--------+--------+--------+\n| hire_date_year | salary | Rank | first  | third  | last   |\n+----------------+--------+------+--------+--------+--------+\n|           1985 | 158220 |    1 | 158220 |   NULL | 158220 |\n|           1985 | 157821 |    2 | 158220 |   NULL | 157821 |\n|           1986 | 156286 |    1 | 156286 |   NULL | 156286 |\n|           1985 | 155709 |    3 | 158220 | 155709 | 155709 |\n|           1987 | 155513 |    1 | 155513 |   NULL | 155513 |\n|           1985 | 155377 |    4 | 158220 | 155709 | 155377 |\n|           1985 | 155190 |    5 | 158220 | 155709 | 155190 |\n|           1985 | 154888 |    6 | 158220 | 155709 | 154888 |\n|           1985 | 154885 |    7 | 158220 | 155709 | 154885 |\n|           1985 | 154459 |    8 | 158220 | 155709 | 154459 |\n+----------------+--------+------+--------+--------+--------+\n10 rows in set (12.88 sec)\n```"]