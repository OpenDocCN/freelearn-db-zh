["```go\nmysql> EXPLAIN SELECT dept_name FROM dept_emp JOIN employees ON dept_emp.emp_no=employees.emp_no JOIN departments ON departments.dept_no=dept_emp.dept_no WHERE employees.first_name='Aamer'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY,name\n          key: name\n      key_len: 58\n          ref: const\n         rows: 228\n     filtered: 100.00\n        Extra: Using index\n*************************** 2\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: dept_emp\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY,dept_no\n          key: PRIMARY\n      key_len: 4\n          ref: employees.employees.emp_no\n         rows: 1\n     filtered: 100.00\n        Extra: Using index\n*************************** 3\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: departments\n   partitions: NULL\n         type: eq_ref\npossible_keys: PRIMARY\n          key: PRIMARY\n      key_len: 16\n          ref: employees.dept_emp.dept_no\n         rows: 1\n     filtered: 100.00\n        Extra: NULL\n3 rows in set, 1 warning (0.00 sec)\n```", "```go\nmysql> EXPLAIN FORMAT=JSON SELECT dept_name FROM dept_emp JOIN employees ON dept_emp.emp_no=employees.emp_no JOIN departments ON departments.dept_no=dept_emp.dept_no WHERE employees.first_name='Aamer'\\G\n*************************** 1\\. row ***************************\nEXPLAIN: {\n  \"query_block\": {\n    \"select_id\": 1,\n    \"cost_info\": {\n      \"query_cost\": \"286.13\"\n    },\n    \"nested_loop\": [\n      {\n        \"table\": {\n          \"table_name\": \"employees\",\n          \"access_type\": \"ref\",\n          \"possible_keys\": [\n            \"PRIMARY\",\n            \"name\"\n          ],\n          \"key\": \"name\",\n          \"used_key_parts\": [\n            \"first_name\"\n          ],\n          \"key_length\": \"58\",\n          \"ref\": [\n            \"const\"\n          ],\n          \"rows_examined_per_scan\": 228,\n          \"rows_produced_per_join\": 228,\n          \"filtered\": \"100.00\",\n          \"using_index\": true,\n          \"cost_info\": {\n            \"read_cost\": \"1.12\",\n            \"eval_cost\": \"22.80\",\n            \"prefix_cost\": \"23.92\",\n            \"data_read_per_join\": \"30K\"\n          },\n          \"used_columns\": [\n            \"emp_no\",\n            \"first_name\"\n          ]\n        }\n      },\n      {\n        \"table\": {\n          \"table_name\": \"dept_emp\",\n          \"access_type\": \"ref\",\n          \"possible_keys\": [\n            \"PRIMARY\",\n            \"dept_no\"\n          ],\n          \"key\": \"PRIMARY\",\n          \"used_key_parts\": [\n            \"emp_no\"\n          ],\n          \"key_length\": \"4\",\n          \"ref\": [\n            \"employees.employees.emp_no\"\n          ],\n          \"rows_examined_per_scan\": 1,\n          \"rows_produced_per_join\": 252,\n          \"filtered\": \"100.00\",\n          \"using_index\": true,\n          \"cost_info\": {\n            \"read_cost\": \"148.78\",\n            \"eval_cost\": \"25.21\",\n            \"prefix_cost\": \"197.91\",\n            \"data_read_per_join\": \"7K\"\n          },\n          \"used_columns\": [\n            \"emp_no\",\n            \"dept_no\"\n          ]\n        }\n      },\n      {\n        \"table\": {\n          \"table_name\": \"departments\",\n          \"access_type\": \"eq_ref\",\n          \"possible_keys\": [\n            \"PRIMARY\"\n          ],\n          \"key\": \"PRIMARY\",\n          \"used_key_parts\": [\n            \"dept_no\"\n          ],\n          \"key_length\": \"16\",\n          \"ref\": [\n            \"employees.dept_emp.dept_no\"\n          ],\n          \"rows_examined_per_scan\": 1,\n          \"rows_produced_per_join\": 252,\n          \"filtered\": \"100.00\",\n          \"cost_info\": {\n            \"read_cost\": \"63.02\",\n            \"eval_cost\": \"25.21\",\n            \"prefix_cost\": \"286.13\",\n            \"data_read_per_join\": \"45K\"\n          },\n          \"used_columns\": [\n            \"dept_no\",\n            \"dept_name\"\n          ]\n        }\n      }\n    ]\n  }\n}\n```", "```go\nmysql> SELECT CONNECTION_ID();\n+-----------------+\n| CONNECTION_ID() |\n+-----------------+\n|             778 |\n+-----------------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> EXPLAIN FORMAT=JSON FOR CONNECTION 778\\G\n*************************** 1\\. row ***************************\nEXPLAIN: {\n  \"query_block\": {\n    \"select_id\": 1,\n    \"cost_info\": {\n      \"query_cost\": \"881.04\"\n    },\n    \"nested_loop\": [\n      {\n        \"table\": {\n          \"table_name\": \"employees\",\n          \"access_type\": \"index\",\n          \"possible_keys\": [\n            \"PRIMARY\"\n          ],\n          \"key\": \"name\",\n          \"used_key_parts\": [\n            \"first_name\",\n            \"last_name\"\n          ],\n          \"key_length\": \"124\",\n          \"rows_examined_per_scan\": 1,\n          \"rows_produced_per_join\": 1,\n          \"filtered\": \"100.00\",\n          \"using_index\": true,\n          \"cost_info\": {\n            \"read_cost\": \"880.24\",\n            \"eval_cost\": \"0.10\",\n            \"prefix_cost\": \"880.34\",\n            \"data_read_per_join\": \"136\"\n          },\n~\n~\n1 row in set (0.00 sec)\n```", "```go\nmysql> EXPLAIN FOR CONNECTION 779;\nERROR 3012 (HY000): EXPLAIN FOR CONNECTION command is supported only for SELECT/UPDATE/INSERT/DELETE/REPLACE\n```", "```go\nmysql> pager grep rows\nPAGER set to 'grep rows'\nmysql> SELECT e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE (first_name='Adam');\n2384 rows in set (0.00 sec)\n```", "```go\nshell> mysqlslap -u <user> -p<pass> --create-schema=employees --query=\"SELECT e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE (first_name='Adam');\" -c 1000 i 100\nmysqlslap: [Warning] Using a password on the command line interface can be insecure.\nBenchmark\n    Average number of seconds to run all queries: 3.216 seconds\n    Minimum number of seconds to run all queries: 3.216 seconds\n    Maximum number of seconds to run all queries: 3.216 seconds\n    Number of clients running queries: 1000\n    Average number of queries per client: 1\n```", "```go\nshell> cat queries.sql\nSELECT e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE (first_name='Adam');\nSELECT * FROM employees WHERE first_name='Adam' OR last_name='Adam';\nSELECT * FROM employees WHERE first_name='Adam';shell> mysqlslap -u <user> -p<pass> --create-schema=employees --concurrency=10 --iterations=10 --query=query.sql --query=queries.sql --delimiter=\";\"\nmysqlslap: [Warning] Using a password on the command line interface can be insecure.\nBenchmark\n    Average number of seconds to run all queries: 5.173 seconds\n    Minimum number of seconds to run all queries: 5.010 seconds\n    Maximum number of seconds to run all queries: 5.257 seconds\n    Number of clients running queries: 10\n    Average number of queries per client: 3\n```", "```go\nshell> mysqlslap -u <user> -p<pass> --concurrency=100 --iterations=10 --number-int-cols=4 --number-char-cols=10  --auto-generate-sql\nmysqlslap: [Warning] Using a password on the command line interface can be insecure.\nBenchmark\n    Average number of seconds to run all queries: 1.640 seconds\n    Minimum number of seconds to run all queries: 1.511 seconds\n    Maximum number of seconds to run all queries: 1.791 seconds\n    Number of clients running queries: 100\n    Average number of queries per client: 0\n```", "```go\nmysql> CREATE TABLE index_example ( \ncol1 int PRIMARY KEY,\ncol2 char(10),\nKEY `col2`(`col2`)\n);\n```", "```go\nmysql> ALTER TABLE employees ADD INDEX name(first_name, last_name);\nQuery OK, 0 rows affected (2.23 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> SHOW CREATE TABLE employees\\G\n*************************** 1\\. row ***************************\n       Table: employees\nCreate Table: CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n  PRIMARY KEY (`emp_no`),\n KEY `name` (`first_name`,`last_name`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n1 row in set (0.00 sec)\n```", "```go\nmysql> ALTER TABLE employees ADD INDEX (last_name);\nQuery OK, 0 rows affected (1.28 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> SHOW CREATE TABLE employees\\G\n*************************** 1\\. row ***************************\n       Table: employees\nCreate Table: CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n  PRIMARY KEY (`emp_no`),\n  KEY `name` (`first_name`,`last_name`),\n KEY `last_name` (`last_name`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n1 row in set (0.01 sec)\n```", "```go\nmysql> ALTER TABLE employees ADD INDEX index_last_name (last_name);\n```", "```go\nmysql> ALTER TABLE employees ADD UNIQUE INDEX unique_name (last_name, first_name);\n# There are few duplicate entries in employees database, the above statement is shown for illustration purpose only.\n```", "```go\n## `last_name` varchar(16) NOT NULL\nmysql> ALTER TABLE employees ADD INDEX (last_name(10));\nQuery OK, 0 rows affected (1.78 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n```", "```go\nmysql> ALTER TABLE employees DROP INDEX last_name;\nQuery OK, 0 rows affected (0.02 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n```", "```go\nmysql> ALTER TABLE employees ADD INDEX(hire_date);\nQuery OK, 0 rows affected (0.93 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n```", "```go\nmysql> EXPLAIN SELECT COUNT(*) FROM employees WHERE hire_date>'2000-01-01'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: range\npossible_keys: hire_date\n          key: hire_date\n      key_len: 3\n          ref: NULL\n         rows: 14\n     filtered: 100.00\n Extra: Using where; Using index\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT COUNT(*) FROM employees WHERE YEAR(hire_date)>=2000\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: index\npossible_keys: NULL\n          key: hire_date\n      key_len: 3\n          ref: NULL\n rows: 291892\n     filtered: 100.00\n        Extra: Using where; Using index\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> ALTER TABLE employees ADD hire_date_year YEAR AS (YEAR(hire_date)) VIRTUAL, ADD INDEX (hire_date_year);\nQuery OK, 0 rows affected (1.16 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> SHOW CREATE TABLE employees\\G\n*************************** 1\\. row ***************************\n       Table: employees\nCreate Table: CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n `hire_date_year` year(4) GENERATED ALWAYS AS (year(`hire_date`)) VIRTUAL,\n  PRIMARY KEY (`emp_no`),\n  KEY `name` (`first_name`,`last_name`),\n  KEY `hire_date` (`hire_date`),\n KEY `hire_date_year` (`hire_date_year`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n1 row in set (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT COUNT(*) FROM employees WHERE hire_date_year>=2000\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: range\npossible_keys: hire_date_year\n key: hire_date_year\n      key_len: 2\n          ref: NULL\n rows: 15\n     filtered: 100.00\n Extra: Using where; Using index\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT COUNT(*) FROM employees WHERE YEAR(hire_date)>=2000\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: range\npossible_keys: hire_date_year\n key: hire_date_year\n      key_len: 2\n          ref: NULL\n         rows: 15\n     filtered: 100.00\n        Extra: Using where\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> ALTER TABLE employees ADD INDEX (last_name);\nQuery OK, 0 rows affected (1.81 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n```", "```go\nmysql> EXPLAIN SELECT * FROM employees WHERE last_name='Aamodt'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: ref\npossible_keys: last_name\n          key: last_name\n      key_len: 66\n          ref: const\n         rows: 205\n     filtered: 100.00\n        Extra: NULL\n1 row in set, 1 warning (0.00 sec)\n\nmysql> ALTER TABLE employees ALTER INDEX last_name INVISIBLE;\nQuery OK, 0 rows affected (0.01 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> EXPLAIN SELECT * FROM employees WHERE last_name='Aamodt'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: ALL\npossible_keys: NULL\n          key: NULL\n      key_len: NULL\n          ref: NULL\n         rows: 299733\n     filtered: 10.00\n        Extra: Using where\n1 row in set, 1 warning (0.00 sec)\n\nmysql> SHOW CREATE TABLE employees\\G\n*************************** 1\\. row ***************************\n       Table: employees\nCreate Table: CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n  PRIMARY KEY (`emp_no`),\n  KEY `name` (`first_name`,`last_name`),\n KEY `last_name` (`last_name`) /*!80000 INVISIBLE */\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n1 row in set (0.00 sec)\n```", "```go\nmysql> ALTER TABLE employees ALTER INDEX last_name VISIBLE;\nQuery OK, 0 rows affected (0.01 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n```", "```go\nmysql> SHOW CREATE TABLE employees\\G\n*************************** 1\\. row ***************************\n       Table: employees\nCreate Table: CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n  PRIMARY KEY (`emp_no`),\n KEY `name` (`first_name`,`last_name`),\n  KEY `last_name` (`last_name`) /*!80000 INVISIBLE */\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n```", "```go\nmysql> EXPLAIN SELECT * FROM employees ORDER BY first_name ASC, last_name DESC LIMIT 10\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: ALL\npossible_keys: NULL\n          key: NULL\n      key_len: NULL\n          ref: NULL\n         rows: 299733\n     filtered: 100.00\n        Extra: Using filesort\n```", "```go\nmysql> ALTER TABLE employees ADD INDEX name_desc(first_name ASC, last_name DESC);\nQuery OK, 0 rows affected (1.61 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n```", "```go\nmysql> EXPLAIN SELECT * FROM employees ORDER BY first_name ASC, last_name DESC LIMIT 10\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: index\npossible_keys: NULL\n key: name_desc\n      key_len: 124\n          ref: NULL\n         rows: 10\n     filtered: 100.00\n        Extra: NULL\n```", "```go\nmysql> EXPLAIN SELECT * FROM employees ORDER BY first_name DESC, last_name ASC LIMIT 10\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: index\npossible_keys: NULL\n          key: name_desc\n      key_len: 124\n          ref: NULL\n         rows: 10\n     filtered: 100.00\n Extra: Backward index scan\n```", "```go\nshell> sudo pt-query-digest /var/lib/mysql/ubuntu-slow.log > query_digest\n```", "```go\n# 286.8s user time, 850ms system time, 232.75M rss, 315.73M vsz\n# Current date: Sat Nov 18 05:16:55 2017\n# Hostname: db1\n# Files: /var/lib/mysql/db1-slow.log\n# Rate limits apply\n# Overall: 638.54k total, 2.06k unique, 0.49 QPS, 0.14x concurrency ______\n# Time range: 2017-11-03 01:02:40 to 2017-11-18 05:16:47\n# Attribute          total     min     max     avg     95%  stddev  median\n# ============     ======= ======= ======= ======= ======= ======= =======\n# Exec time        179486s     3us   2713s   281ms    21ms     15s   176us\n# Lock time          1157s       0     36s     2ms   194us   124ms    49us\n# Rows sent         18.25M       0 753.66k   29.96  212.52   1.63k    0.99\n# Rows examine     157.39G       0   3.30G 258.45k   3.35k  24.78M    0.99\n# Rows affecte       3.66M       0 294.77k    6.01    0.99   1.16k       0\n# Bytes sent         3.08G       0  95.15M   5.05k  13.78k 206.42k  174.84\n# Merge passes       2.84k       0      97    0.00       0    0.16       0\n# Tmp tables       129.02k       0    1009    0.21    0.99    1.43       0\n# Tmp disk tbl      25.20k       0     850    0.04       0    1.09       0\n# Tmp tbl size      26.21G       0 218.27M  43.04k       0   2.06M       0\n# Query size       178.92M       6 452.25k  293.81  592.07   5.26k   72.65\n# InnoDB:\n# IO r bytes        79.06G       0   2.09G 200.37k       0  12.94M       0\n# IO r ops           7.26M       0 233.16k   18.39       0   1.36k       0\n# IO r wait         96525s       0   3452s   233ms       0     18s       0\n# pages distin     526.99M       0 608.33k   1.30k  964.41   9.15k    1.96\n# queue wait             0       0       0       0       0       0       0\n# rec lock wai         46s       0      9s   111us       0    28ms       0\n# Boolean:\n# Filesort       5% yes,  94% no\n# Filesort on    0% yes,  99% no\n# Full join      3% yes,  96% no\n# Full scan     40% yes,  59% no\n# Tmp table     13% yes,  86% no\n# Tmp table on   2% yes,  97% no\n```", "```go\n# Rank Query ID           Response time    Calls  R/Call    V/M   Item\n# ==== ================== ================ ====== ========= ===== ========\n#    1 0x55F499860A034BCB 76560.4220 42.7%     47 1628.9451 18.06 SELECT orders \n#    2 0x3A2F0B98DA39BCB9 10490.4155  5.8%   2680    3.9143 33... SELECT orders order_status \n#    3 0x25119C7C31A24011  7378.8763  4.1%   1534    4.8102 30.11 SELECT orders users \n#    4 0x41106CE92AD9DFED  5412.7326  3.0%  15589    0.3472  2.98 SELECT sessions\n#    5 0x860DCDE7AE0AD554  5187.5257  2.9%    500   10.3751 54.99 SELECT orders sessions \n#    6 0x5DF64920B008AD63  4517.5041  2.5%     58   77.8880 22.23 UPDATE SELECT \n#    7 0xC9F9A31DE77B93A1  4473.0208  2.5%     58   77.1210 96... INSERT SELECT tmpMove \n#    8 0x8BF88451DA989BFF  4036.4413  2.2%     13  310.4955 16... UPDATE SELECT orders tmpDel\n```", "```go\n# Query 1: 0.00 QPS, 0.06x concurrency, ID 0x55F499860A034BCB at byte 249542900\n# This item is included in the report because it matches --limit.\n# Scores: V/M = 18.06\n# Time range: 2017-11-03 01:39:19 to 2017-11-18 01:46:50\n# Attribute    pct   total     min     max     avg     95%  stddev  median\n# ============ === ======= ======= ======= ======= ======= ======= =======\n# Count          0      47\n# Exec time     42  76560s   1182s   1854s   1629s   1819s    172s   1649s\n# Lock time      0      3s   102us   994ms    70ms   293ms   174ms   467us\n# Rows sent      0  78.78k     212   5.66k   1.68k   4.95k   1.71k  652.75\n# Rows examine  85 135.34G   2.11G   3.30G   2.88G   3.17G 303.82M   2.87G\n# Rows affecte   0       0       0       0       0       0       0       0\n# Bytes sent     0   3.22M  10.20k 226.13k  70.14k 201.74k  66.71k  31.59k\n# Merge passes   0       0       0       0       0       0       0       0\n# Tmp tables     0       0       0       0       0       0       0       0\n# Tmp disk tbl   0       0       0       0       0       0       0       0\n# Tmp tbl size   0       0       0       0       0       0       0       0\n# Query size     0  11.66k     254     254     254     254       0     254\n# InnoDB:\n# IO r bytes     1   1.11G       0  53.79M  24.20M  51.29M  21.04M  20.30M\n# IO r ops       1 142.14k       0   6.72k   3.02k   6.63k   2.67k   2.50k\n# IO r wait      0     92s       0     14s      2s      5s      3s      1s\n# pages distin   0 325.46k   6.10k   7.30k   6.92k   6.96k  350.84   6.96k\n# queue wait     0       0       0       0       0       0       0       0\n# rec lock wai   0       0       0       0       0       0       0       0\n# Boolean:\n# Full scan    100% yes,   0% no\n# String:\n# Databases    lashrenew_... (32/68%), betsy_db (15/31%)\n# Hosts        10.37.69.197\n# InnoDB trxID CF22C985 (1/2%), CF23455A (1/2%)... 45 more\n# Last errno   0\n# rate limit   query:100\n# Users        db1_... (32/68%), dba (15/31%)\n# Query_time distribution\n#   1us\n#  10us\n# 100us\n#   1ms\n#  10ms\n# 100ms\n#    1s\n#  10s+  ################################################################\n# Tables\n#    SHOW TABLE STATUS FROM `db1` LIKE 'orders'\\G\n#    SHOW CREATE TABLE `db1`.`orders`\\G\n#    SHOW TABLE STATUS FROM `db1` LIKE 'shipping_tracking_history'\\G\n#    SHOW CREATE TABLE `db1`.`shipping_tracking_history`\\G\n# EXPLAIN /*!50100 PARTITIONS*/\nSELECT  tracking_num, carrier, order_id, userID FROM orders o WHERE tracking_num!=\"\" \nand NOT EXISTS (SELECT 1 FROM shipping_tracking_history sth WHERE sth.order_id=o.order_id AND sth.is_final=1)\nAND o.date_finalized>date_add(curdate(),interval -1 month)\\G\n```", "```go\n shell> sudo pt-query-digest --type genlog /var/lib/mysql/db1.log   > general_query_digest\n```", "```go\n# 400ms user time, 0 system time, 28.84M rss, 99.35M vsz\n# Current date: Sat Nov 18 09:02:08 2017\n# Hostname: db1\n# Files: /var/lib/mysql/db1.log\n# Overall: 511 total, 39 unique, 30.06 QPS, 0x concurrency _______________\n# Time range: 2017-11-18 09:01:09 to 09:01:26\n# Attribute          total     min     max     avg     95%  stddev  median\n# ============     ======= ======= ======= ======= ======= ======= =======\n# Exec time              0       0       0       0       0       0       0\n# Query size        92.18k      10   3.22k  184.71  363.48  348.86  102.22\n```", "```go\n# Profile\n# Rank Query ID           Response time Calls R/Call V/M   Item\n# ==== ================== ============= ===== ====== ===== ===============\n#    1 0x625BF8F82D174492  0.0000  0.0%   130 0.0000  0.00 SELECT facebook_like_details\n#    2 0xAA353644DE4C4CB4  0.0000  0.0%    44 0.0000  0.00 ADMIN QUIT\n#    3 0x5D51E5F01B88B79E  0.0000  0.0%    44 0.0000  0.00 ADMIN CONNECT\n```", "```go\nshell> pt-query-digest --processlist h=localhost  --iterations 10 --run-time 1m -u <user> -p<pass>\n```", "```go\nshell> sudo mysqlbinlog /var/lib/mysql/binlog.000639 > binlog.00063\n\nshell> pt-query-digest --type binlog binlog.000639  > binlog_digest\n```", "```go\nshell> sudo tcpdump -s 65535 -x -nn -q -tttt -i any -c 1000 port 3306 > mysql.tcp.txt\n\nshell> pt-query-digest --type tcpdump mysql.tcp.txt > tcpdump_digest\n```", "```go\nmysql> SELECT user_id, first_name FROM user PROCEDURE ANALYSE(1,100)\\G\n*************************** 1\\. row ***************************\n             Field_name: db1.user.user_id\n              Min_value: 100000@nat.test123.net\n              Max_value: test1234@nat.test123.net\n             Min_length: 22\n             Max_length: 33\n       Empties_or_zeros: 0\n                  Nulls: 0\nAvg_value_or_avg_length: 25.8003\n                    Std: NULL\n      Optimal_fieldtype: VARCHAR(33) NOT NULL\n*************************** 2\\. row ***************************\n             Field_name: db1.user.first_name\n              Min_value: *Alan\n              Max_value: Zuniga 102031\n             Min_length: 3\n             Max_length: 33\n       Empties_or_zeros: 0\n                  Nulls: 0\nAvg_value_or_avg_length: 10.1588\n                    Std: NULL\n      Optimal_fieldtype: VARCHAR(33) NOT NULL\n2 rows in set (0.02 sec)\n```", "```go\nmysql> SHOW CREATE TABLE employees\\G\n*************************** 1\\. row ***************************\n       Table: employees\nCreate Table: CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n  PRIMARY KEY (`emp_no`),\n  KEY `last_name` (`last_name`) /*!80000 INVISIBLE */,\n  KEY `full_name` (`first_name`,`last_name`),\n  KEY `full_name_desc` (`first_name` DESC,`last_name`),\n  KEY `first_name` (`first_name`),\n  KEY `full_name_1` (`first_name`,`last_name`),\n  KEY `first_name_emp_no` (`first_name`,`emp_no`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n```", "```go\nSELECT * FROM employees WHERE first_name='Adam' ORDER BY emp_no;\n```", "```go\nshell> pt-duplicate-key-checker -u <user> -p<pass>\n\n# A software update is available:\n# ########################################################################\n# employees.employees                                                     \n# ########################################################################\n\n# full_name_1 is a duplicate of full_name\n# Key definitions:\n#   KEY `full_name_1` (`first_name`,`last_name`),\n#   KEY `full_name` (`first_name`,`last_name`),\n# Column types:\n#      `first_name` varchar(14) not null\n#      `last_name` varchar(16) not null\n# To remove this duplicate index, execute:\nALTER TABLE `employees`.`employees` DROP INDEX `full_name_1`;\n\n# first_name is a left-prefix of full_name\n# Key definitions:\n#   KEY `first_name` (`first_name`),\n#   KEY `full_name` (`first_name`,`last_name`),\n# Column types:\n#      `first_name` varchar(14) not null\n#      `last_name` varchar(16) not null\n# To remove this duplicate index, execute:\nALTER TABLE `employees`.`employees` DROP INDEX `first_name`;\n\n# Key first_name_emp_no ends with a prefix of the clustered index\n# Key definitions:\n#   KEY `first_name_emp_no` (`first_name`,`emp_no`)\n#   PRIMARY KEY (`emp_no`),\n# Column types:\n#      `first_name` varchar(14) not null\n#      `emp_no` int(11) not null\n# To shorten this duplicate clustered index, execute:\nALTER TABLE `employees`.`employees` DROP INDEX `first_name_emp_no`, ADD INDEX `first_name_emp_no` (`first_name`);\n```", "```go\nshell> pt-duplicate-key-checker -u <user> -p<pass> --database employees\n```", "```go\nshell> pt-duplicate-key-checker -u <user> -p<pass> | mysql -u <user> -p<pass>\n```", "```go\nshell> mysqlindexcheck --server=<user>:<pass>@localhost:3306 employees --show-drops \nWARNING: Using a password on the command line interface can be insecure.\n# Source on localhost: ... connected.\n# The following indexes are duplicates or redundant for table employees.employees:\n#\nCREATE INDEX `full_name_desc` ON `employees`.`employees` (`first_name`, `last_name`) USING BTREE\n#     may be redundant or duplicate of:\nCREATE INDEX `full_name` ON `employees`.`employees` (`first_name`, `last_name`) USING BTREE\n#\nCREATE INDEX `first_name` ON `employees`.`employees` (`first_name`) USING BTREE\n#     may be redundant or duplicate of:\nCREATE INDEX `full_name` ON `employees`.`employees` (`first_name`, `last_name`) USING BTREE\n#\nCREATE INDEX `full_name_1` ON `employees`.`employees` (`first_name`, `last_name`) USING BTREE\n#     may be redundant or duplicate of:\nCREATE INDEX `full_name` ON `employees`.`employees` (`first_name`, `last_name`) USING BTREE\n#\n# DROP statements:\n#\nALTER TABLE `employees`.`employees` DROP INDEX `full_name_desc`;\nALTER TABLE `employees`.`employees` DROP INDEX `first_name`;\nALTER TABLE `employees`.`employees` DROP INDEX `full_name_1`;\n#\n# The following index for table employees.employees contains the clustered index and might be redundant:\n#\nCREATE INDEX `first_name_emp_no` ON `employees`.`employees` (`first_name`, `emp_no`) USING BTREE\n#\n# DROP/ADD statement:\n#\nALTER TABLE `employees`.`employees` DROP INDEX `first_name_emp_no`, ADD INDEX `first_name_emp_no` (first_name);\n#\n```", "```go\nmysql> ALTER TABLE employees DROP PRIMARY KEY, ADD PRIMARY KEY(emp_no, hire_date), ADD INDEX `name` (`first_name`,`last_name`);\n\nmysql> ALTER TABLE salaries ADD INDEX from_date(from_date), ADD INDEX from_date_2(from_date,emp_no);\n```", "```go\nmysql> SHOW CREATE TABLE employees\\G\n*************************** 1\\. row ***************************\n       Table: employees\nCreate Table: CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n  PRIMARY KEY (`emp_no`,`hire_date`),\n  KEY `name` (`first_name`,`last_name`)\n) /*!50100 TABLESPACE `innodb_system` */ ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n\nmysql> SHOW CREATE TABLE salaries\\G\n*************************** 1\\. row ***************************\nCreate Table: CREATE TABLE `salaries` (\n `emp_no` int(11) NOT NULL,\n `salary` int(11) NOT NULL,\n `from_date` date NOT NULL,\n `to_date` date NOT NULL,\n PRIMARY KEY (`emp_no`,`from_date`),\n KEY `from_date` (`from_date`),\n KEY `from_date_2` (`from_date`,`emp_no`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n```", "```go\nmysql> EXPLAIN SELECT e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE from_date='2001-05-23'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: s\n   partitions: NULL\n         type: index_merge\npossible_keys: PRIMARY,from_date_2,from_date\n key: from_date_2,from_date\n      key_len: 3,3\n          ref: NULL\n rows: 1\n     filtered: 100.00\n Extra: Using intersect(from_date_2,from_date); Using where\n*************************** 2\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: e\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY\n          key: PRIMARY\n      key_len: 4\n          ref: employees.s.emp_no\n         rows: 1\n     filtered: 100.00\n        Extra: Using index\n2 rows in set, 1 warning (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE from_date='2001-05-23'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: s\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY,from_date_2\n          key: from_date_2\n      key_len: 3\n ref: const\n         rows: 90\n     filtered: 100.00\n        Extra: NULL\n*************************** 2\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: e\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY\n          key: PRIMARY\n      key_len: 4\n          ref: employees.s.emp_no\n         rows: 1\n     filtered: 100.00\n        Extra: Using index\n2 rows in set, 1 warning (0.00 sec)\n```", "```go\nshell> mysqlslap -u <user> -p<pass> --create-schema='employees' -c 500 -i 100 --query=\"SELECT e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE from_date='2001-05-23'\"\nmysqlslap: [Warning] Using a password on the command line interface can be insecure.\nBenchmark\n    Average number of seconds to run all queries: 0.466 seconds\n    Minimum number of seconds to run all queries: 0.424 seconds\n    Maximum number of seconds to run all queries: 0.568 seconds\n    Number of clients running queries: 500\n    Average number of queries per client: 1\n```", "```go\nshell> mysqlslap -u <user> -p<pass> --create-schema='employees' -c 500 -i 100 --query=\"SELECT e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE from_date='2001-05-23'\"\nmysqlslap: [Warning] Using a password on the command line interface can be insecure.\nBenchmark\n    Average number of seconds to run all queries: 0.435 seconds\n    Minimum number of seconds to run all queries: 0.376 seconds\n    Maximum number of seconds to run all queries: 0.504 seconds\n    Number of clients running queries: 500\n    Average number of queries per client: 1\n```", "```go\nshell> sudo pt-index-usage slow -u <user> -p<password> /var/lib/mysql/db1-slow.log > unused_indexes\n```", "```go\nmysql> CREATE TABLE `employees_index_example` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n  PRIMARY KEY (`emp_no`),\n  KEY `last_name` (`last_name`) /*!80000 INVISIBLE */,\n  KEY `full_name` (`first_name`,`last_name`),\n  KEY `full_name_desc` (`first_name` DESC,`last_name`),\n  KEY `first_name` (`first_name`),\n  KEY `full_name_1` (`first_name`,`last_name`),\n  KEY `first_name_emp_no` (`first_name`,`emp_no`),\n  KEY `last_name_2` (`last_name`(10))\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\nQuery OK, 0 rows affected, 1 warning (0.08 sec)\n\nmysql> SHOW WARNINGS;\n+---------+------+--------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Level   | Code | Message                                                                                                                                                |\n+---------+------+--------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Warning | 1831 | Duplicate index 'full_name_1' defined on the table 'employees.employees_index_example'. This is deprecated and will be disallowed in a future release. |\n+---------+------+--------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\nmysql> INSERT INTO employees_index_example SELECT emp_no,birth_date,first_name,last_name,gender,hire_date FROM employees;\n\nmysql> RENAME TABLE employees TO employees_old;\nmysql> RENAME TABLE employees_index_example TO employees;\n```", "```go\nmysql> EXPLAIN SELECT emp_no FROM employees WHERE first_name='Adam' OR last_name='Adam'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: index_merge\npossible_keys: full_name,full_name_desc,first_name,full_name_1,first_name_emp_no,last_name_2\n          key: first_name,last_name_2\n      key_len: 58,42\n          ref: NULL\n         rows: 252\n     filtered: 100.00\n        Extra: Using sort_union(first_name,last_name_2); Using where\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> SHOW VARIABLES LIKE 'optimizer_search_depth';\n+------------------------+-------+\n| Variable_name          | Value |\n+------------------------+-------+\n| optimizer_search_depth | 62    |\n+------------------------+-------+\n1 row in set (0.00 sec)\n\nmysql> SET @@SESSION.optimizer_search_depth=0;\nQuery OK, 0 rows affected (0.00 sec)\n```", "```go\nmysql> SHOW VARIABLES LIKE 'optimizer_switch'\\G\n*************************** 1\\. row ***************************\nVariable_name: optimizer_switch\n        Value: index_merge=on,index_merge_union=on,index_merge_sort_union=on,index_merge_intersection=on,engine_condition_pushdown=on,index_condition_pushdown=on,mrr=on,mrr_cost_based=on,block_nested_loop=on,batched_key_access=off,materialization=on,semijoin=on,loosescan=on,firstmatch=on,duplicateweedout=on,subquery_materialization_cost_based=on,use_index_extensions=on,condition_fanout_filter=on,derived_merge=on\n1 row in set (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT emp_no FROM employees WHERE first_name='Adam' OR last_name='Adam'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: index_merge\npossible_keys: full_name,full_name_desc,first_name,full_name_1,first_name_emp_no,last_name_2\n          key: first_name,last_name_2\n      key_len: 58,42\n          ref: NULL\n         rows: 252\n     filtered: 100.00\n Extra: Using sort_union(first_name,last_name_2); Using where\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> SET @@SESSION.optimizer_switch=\"index_merge_sort_union=off\";\nQuery OK, 0 rows affected (0.00 sec)\n```", "```go\nmysql>  SHOW VARIABLES LIKE 'optimizer_switch'\\G\n*************************** 1\\. row ***************************\nVariable_name: optimizer_switch\n        Value: index_merge=on,index_merge_union=on,index_merge_sort_union=off,index_merge_intersection=on,engine_condition_pushdown=on,index_condition_pushdown=on,mrr=on,mrr_cost_based=on,block_nested_loop=on,batched_key_access=off,materialization=on,semijoin=on,loosescan=on,firstmatch=on,duplicateweedout=on,subquery_materialization_cost_based=on,use_index_extensions=on,condition_fanout_filter=on,derived_merge=on\n1 row in set (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT emp_no FROM employees WHERE first_name='Adam' OR last_name='Adam'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: index\npossible_keys: full_name,full_name_desc,first_name,full_name_1,first_name_emp_no,last_name_2\n          key: full_name\n      key_len: 124\n          ref: NULL\n         rows: 299379\n     filtered: 19.00\n Extra: Using where; Using index\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT /*+ NO_INDEX_MERGE(employees first_name,last_name_2) */ * FROM employees WHERE first_name='Adam' OR last_name='Adam'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: ALL\npossible_keys: full_name,full_name_desc,first_name,full_name_1,first_name_emp_no,last_name_2\n          key: NULL\n      key_len: NULL\n          ref: NULL\n         rows: 299379\n     filtered: 19.00\n        Extra: Using where\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT /*+ NO_INDEX_MERGE(s from_date,from_date_2) */ e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE from_date='2001-05-23'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: s\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY,from_date,from_date_2\n key: from_date\n      key_len: 3\n ref: const\n         rows: 90\n     filtered: 100.00\n        Extra: NULL\n*************************** 2\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: e\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY\n          key: PRIMARY\n      key_len: 4\n          ref: employees.s.emp_no\n         rows: 1\n     filtered: 100.00\n        Extra: Using index\n2 rows in set, 1 warning (0.00 sec)\n\n```", "```go\nmysql> EXPLAIN SELECT e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE (first_name='Adam' OR last_name='Adam') ORDER BY from_date DESC\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: e\n   partitions: NULL\n         type: index_merge\npossible_keys: PRIMARY,full_name,full_name_desc,first_name,full_name_1,first_name_emp_no,last_name_2\n          key: first_name,last_name_2\n      key_len: 58,42\n          ref: NULL\n         rows: 252\n     filtered: 100.00\n        Extra: Using sort_union(first_name,last_name_2); Using where; Using temporary; Using filesort\n*************************** 2\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: s\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY\n          key: PRIMARY\n      key_len: 4\n          ref: employees.e.emp_no\n         rows: 9\n     filtered: 100.00\n        Extra: NULL\n2 rows in set, 1 warning (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT /*+ JOIN_ORDER(s, e) */ e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE (first_name='Adam' OR last_name='Adam') ORDER BY from_date DESC\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: s\n   partitions: NULL\n         type: ALL\npossible_keys: PRIMARY\n          key: NULL\n      key_len: NULL\n          ref: NULL\n         rows: 2838426\n     filtered: 100.00\n        Extra: Using filesort\n*************************** 2\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: e\n   partitions: NULL\n         type: eq_ref\npossible_keys: PRIMARY,full_name,full_name_desc,first_name,full_name_1,first_name_emp_no,last_name_2\n          key: PRIMARY\n      key_len: 4\n          ref: employees.s.emp_no\n         rows: 1\n     filtered: 19.00\n        Extra: Using where\n2 rows in set, 1 warning (0.00 sec)\n```", "```go\nmysql> SHOW SESSION status LIKE 'sort_merge_passes';\n+-------------------+-------+\n| Variable_name     | Value |\n+-------------------+-------+\n| Sort_merge_passes | 0     |\n+-------------------+-------+\n1 row in set (0.00 sec)\n\nmysql> pager grep \"rows in set\"; SELECT * FROM employees ORDER BY hire_date DESC;nopager;\nPAGER set to 'grep \"rows in set\"'\n300025 rows in set (0.45 sec)\n\nPAGER set to stdout\nmysql> SHOW SESSION status LIKE 'sort_merge_passes';\n+-------------------+-------+\n| Variable_name     | Value |\n+-------------------+-------+\n| Sort_merge_passes | 8     |\n+-------------------+-------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> SHOW SESSION status LIKE 'sort_merge_passes';\n+-------------------+-------+\n| Variable_name     | Value |\n+-------------------+-------+\n| Sort_merge_passes | 0     |\n+-------------------+-------+\n1 row in set (0.00 sec)\n\nmysql> pager grep \"rows in set\"; SELECT /*+ SET_VAR(sort_buffer_size = 16M) */ * FROM employees ORDER BY hire_date DESC;nopager;\nPAGER set to 'grep \"rows in set\"'\n300025 rows in set (0.45 sec)\n\nPAGER set to stdout\nmysql> SHOW SESSION status LIKE 'sort_merge_passes';\n+-------------------+-------+\n| Variable_name     | Value |\n+-------------------+-------+\n| Sort_merge_passes | 0     |\n+-------------------+-------+\n1 row in set (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT /*+ SET_VAR(optimizer_switch = 'index_merge_sort_union=off') */ e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE from_date='2001-05-23'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: e\n   partitions: NULL\n         type: index\npossible_keys: PRIMARY\n          key: name\n      key_len: 124\n          ref: NULL\n         rows: 299379\n     filtered: 100.00\n        Extra: Using index\n*************************** 2\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: s\n   partitions: NULL\n         type: eq_ref\npossible_keys: PRIMARY\n          key: PRIMARY\n      key_len: 7\n          ref: employees.e.emp_no,const\n         rows: 1\n     filtered: 100.00\n        Extra: NULL\n2 rows in set, 1 warning (0.00 sec)\n```", "```go\nmysql> SELECT /*+ MAX_EXECUTION_TIME(100) */ * FROM employees ORDER BY hire_date DESC;\nERROR 1028 (HY000): Sort aborted: Query execution was interrupted, maximum statement execution time exceeded\n```", "```go\nmysql> SELECT * FROM mysql.engine_cost\\G\n*************************** 1\\. row ***************************\n  engine_name: InnoDB\n  device_type: 0\n    cost_name: io_block_read_cost\n cost_value: 1\n  last_update: 2017-11-20 16:24:56\n      comment: NULL\ndefault_value: 1\n*************************** 2\\. row ***************************\n  engine_name: InnoDB\n  device_type: 0\n    cost_name: memory_block_read_cost\n   cost_value: 0.25\n  last_update: 2017-11-19 13:58:32\n      comment: NULL\ndefault_value: 0.25\n2 rows in set (0.00 sec)\n```", "```go\nmysql> UPDATE mysql.engine_cost SET cost_value=0.5 WHERE cost_name='io_block_read_cost';\nQuery OK, 1 row affected (0.08 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\nmysql> FLUSH OPTIMIZER_COSTS;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> SELECT * FROM mysql.engine_cost\\G\n*************************** 1\\. row ***************************\n  engine_name: InnoDB\n  device_type: 0\n    cost_name: io_block_read_cost\n cost_value: 0.5\n  last_update: 2017-11-20 17:02:43\n      comment: NULL\ndefault_value: 1\n*************************** 2\\. row ***************************\n  engine_name: InnoDB\n  device_type: 0\n    cost_name: memory_block_read_cost\n   cost_value: 0.25\n  last_update: 2017-11-19 13:58:32\n      comment: NULL\ndefault_value: 0.25\n2 rows in set (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT e.emp_no, salary FROM salaries s IGNORE INDEX(from_date_2) JOIN employees e ON s.emp_no=e.emp_no WHERE from_date='2001-05-23'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: s\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY,from_date\n          key: from_date\n      key_len: 3\n          ref: const\n         rows: 90\n     filtered: 100.00\n        Extra: NULL\n*************************** 2\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: e\n   partitions: NULL\n         type: ref\npossible_keys: PRIMARY\n          key: PRIMARY\n      key_len: 4\n          ref: employees.s.emp_no\n         rows: 1\n     filtered: 100.00\n        Extra: Using index\n2 rows in set, 1 warning (0.00 sec)\n```", "```go\nmysql> SHOW CREATE TABLE employees\\G\n*************************** 1\\. row ***************************\n       Table: employees\nCreate Table: CREATE TABLE `employees` (\n  `emp_no` int(11) NOT NULL,\n  `birth_date` date NOT NULL,\n  `first_name` varchar(14) NOT NULL,\n  `last_name` varchar(16) NOT NULL,\n  `gender` enum('M','F') NOT NULL,\n  `hire_date` date NOT NULL,\n  PRIMARY KEY (`emp_no`),\n  KEY `last_name` (`last_name`) /*!80000 INVISIBLE */,\n  KEY `full_name` (`first_name`,`last_name`),\n  KEY `full_name_desc` (`first_name` DESC,`last_name`),\n  KEY `first_name` (`first_name`),\n  KEY `full_name_1` (`first_name`,`last_name`),\n  KEY `first_name_emp_no` (`first_name`,`emp_no`),\n  KEY `last_name_2` (`last_name`(10))\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n1 row in set (0.00 sec)\n\nmysql> EXPLAIN SELECT emp_no FROM employees WHERE first_name='Adam' OR last_name='Adam'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: index_merge\npossible_keys: full_name,full_name_desc,first_name,full_name_1,first_name_emp_no,last_name_2\n          key: first_name,last_name_2\n      key_len: 58,42\n          ref: NULL\n         rows: 252\n     filtered: 100.00\n        Extra: Using sort_union(first_name,last_name_2); Using where\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> EXPLAIN SELECT emp_no FROM employees USE INDEX(first_name,last_name_2) WHERE first_name='Adam' OR last_name='Adam'\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: employees\n   partitions: NULL\n         type: index_merge\npossible_keys: first_name,last_name_2\n key: first_name,last_name_2\n      key_len: 58,42\n          ref: NULL\n         rows: 252\n     filtered: 100.00\n        Extra: Using sort_union(first_name,last_name_2); Using where\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> SHOW CREATE TABLE emp_details\\G\n*************************** 1\\. row ***************************\n       Table: emp_details\nCreate Table: CREATE TABLE `emp_details` (\n  `emp_no` int(11) NOT NULL,\n  `details` json DEFAULT NULL,\n  PRIMARY KEY (`emp_no`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n1 row in set (0.00 sec)\n```", "```go\nmysql> INSERT IGNORE INTO emp_details(emp_no, details) VALUES \n     ('1', '{ \"location\": \"IN\", \"phone\": \"+11800000000\", \"email\": \"abc@example.com\", \"address\": { \"line1\": \"abc\", \"line2\": \"xyz street\", \"city\": \"Bangalore\", \"pin\": \"560103\"}}'),\n     ('2', '{ \"location\": \"IN\", \"phone\": \"+11800000000\", \"email\": \"def@example.com\", \"address\": { \"line1\": \"abc\", \"line2\": \"xyz street\", \"city\": \"Delhi\", \"pin\": \"560103\"}}'),\n     ('3', '{ \"location\": \"IN\", \"phone\": \"+11800000000\", \"email\": \"ghi@example.com\", \"address\": { \"line1\": \"abc\", \"line2\": \"xyz street\", \"city\": \"Mumbai\", \"pin\": \"560103\"}}'),\n     ('4', '{ \"location\": \"IN\", \"phone\": \"+11800000000\", \"email\": \"jkl@example.com\", \"address\": { \"line1\": \"abc\", \"line2\": \"xyz street\", \"city\": \"Delhi\", \"pin\": \"560103\"}}'),\n     ('5', '{ \"location\": \"US\", \"phone\": \"+11800000000\", \"email\": \"mno@example.com\", \"address\": { \"line1\": \"abc\", \"line2\": \"xyz street\", \"city\": \"Sunnyvale\", \"pin\": \"560103\"}}');\nQuery OK, 5 rows affected (0.00 sec)\nRecords: 5  Duplicates: 0  Warnings: 0\n```", "```go\nmysql> EXPLAIN SELECT emp_no FROM emp_details WHERE details->>'$.address.city'=\"Bangalore\"\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: emp_details\n   partitions: NULL\n         type: ALL\npossible_keys: NULL\n key: NULL\n      key_len: NULL\n          ref: NULL\n         rows: 5\n     filtered: 100.00\n        Extra: Using where\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nmysql> ALTER TABLE emp_details ADD COLUMN city varchar(20) AS (details->>'$.address.city'), ADD INDEX (city);\nQuery OK, 0 rows affected (0.22 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> SHOW CREATE TABLE emp_details\\G\n*************************** 1\\. row ***************************\n       Table: emp_details\nCreate Table: CREATE TABLE `emp_details` (\n  `emp_no` int(11) NOT NULL,\n  `details` json DEFAULT NULL,\n `city` varchar(20) GENERATED ALWAYS AS (json_unquote(json_extract(`details`,_utf8'$.address.city'))) VIRTUAL,\n  PRIMARY KEY (`emp_no`),\n KEY `city` (`city`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\n1 row in set (0.01 sec)\n```", "```go\nmysql> EXPLAIN SELECT emp_no FROM emp_details WHERE details->>'$.address.city'=\"Bangalore\"\\G\n*************************** 1\\. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: emp_details\n   partitions: NULL\n         type: ref\npossible_keys: city\n key: city\n      key_len: 83\n ref: const\n rows: 1\n     filtered: 100.00\n        Extra: NULL\n1 row in set, 1 warning (0.00 sec)\n```", "```go\nshell> ps aux | grep mysqld | grep -v grep\nmysql     5238  0.0 28.1 1253368 488472 ?      Sl   Nov19   4:04 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid\n\nshell> sudo setcap cap_sys_nice+ep /usr/sbin/mysqld\n\nshell> getcap /usr/sbin/mysqld\n/usr/sbin/mysqld = cap_sys_nice+ep\n```", "```go\nmysql> CREATE RESOURCE GROUP report_group\nTYPE = USER\nVCPU = 2-3\nTHREAD_PRIORITY = 15\nENABLE;\n# You should have at least 4 CPUs for the above resource group to create. If you have less CPUs, you can use VCPU = 0-1 for testing the example.\n```", "```go\nmysql> SELECT * FROM INFORMATION_SCHEMA.RESOURCE_GROUPS\\G\n*************************** 1\\. row ***************************\n   RESOURCE_GROUP_NAME: USR_default\n   RESOURCE_GROUP_TYPE: USER\nRESOURCE_GROUP_ENABLED: 1\n              VCPU_IDS: 0-0\n       THREAD_PRIORITY: 0\n*************************** 2\\. row ***************************\n   RESOURCE_GROUP_NAME: SYS_default\n   RESOURCE_GROUP_TYPE: SYSTEM\nRESOURCE_GROUP_ENABLED: 1\n              VCPU_IDS: 0-0\n       THREAD_PRIORITY: 0\n*************************** 3\\. row ***************************\n RESOURCE_GROUP_NAME: report_group\n RESOURCE_GROUP_TYPE: USER\nRESOURCE_GROUP_ENABLED: 1\n VCPU_IDS: 2-3\n THREAD_PRIORITY: 15 \n```", "```go\nmysql> SET RESOURCE GROUP report_group FOR <thread_id>;\n```", "```go\nmysql> SET RESOURCE GROUP report_group;\n```", "```go\nmysql> SELECT /*+ RESOURCE_GROUP(report_group) */ * FROM employees;\n```", "```go\nmysql> ALTER RESOURCE GROUP report_group VCPU = 3 THREAD_PRIORITY = 19;\nQuery OK, 0 rows affected (0.12 sec)\n```", "```go\nmysql> ALTER RESOURCE GROUP report_group VCPU = 0-12 THREAD_PRIORITY = 0;\nQuery OK, 0 rows affected (0.12 sec)\n```", "```go\nmysql> ALTER RESOURCE GROUP report_group DISABLE FORCE;\nQuery OK, 0 rows affected (0.00 sec)\n```", "```go\nmysql> DROP RESOURCE GROUP report_group FORCE;\n```", "```go\nshell> sudo vi /etc/my.cnf\n[mysqld]\nperformance_schema = 0\n```", "```go\nmysql> SELECT * FROM performance_schema.setup_consumers;\n+----------------------------------+---------+\n| NAME                             | ENABLED |\n+----------------------------------+---------+\n| events_stages_current            | NO      |\n| events_stages_history            | NO      |\n| events_stages_history_long       | NO      |\n| events_statements_current        | YES     |\n| events_statements_history        | YES     |\n| events_statements_history_long   | NO      |\n| events_transactions_current      | YES     |\n| events_transactions_history      | YES     |\n| events_transactions_history_long | NO      |\n| events_waits_current             | NO      |\n| events_waits_history             | NO      |\n| events_waits_history_long        | NO      |\n| global_instrumentation           | YES     |\n| thread_instrumentation           | YES     |\n| statements_digest                | YES     |\n+----------------------------------+---------+\n15 rows in set (0.00 sec)\n```", "```go\nmysql> UPDATE performance_schema.setup_consumers SET ENABLED='YES' WHERE NAME='events_waits_current';\n```", "```go\nmysql> SELECT NAME, ENABLED, TIMED FROM setup_instruments LIMIT 10;\n+---------------------------------------------------------+---------+-------+\n| NAME                                                    | ENABLED | TIMED |\n+---------------------------------------------------------+---------+-------+\n| wait/synch/mutex/pfs/LOCK_pfs_share_list                | NO      | NO    |\n| wait/synch/mutex/sql/TC_LOG_MMAP::LOCK_tc               | NO      | NO    |\n| wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_commit         | NO      | NO    |\n| wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_commit_queue   | NO      | NO    |\n| wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_done           | NO      | NO    |\n| wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_flush_queue    | NO      | NO    |\n| wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_index          | NO      | NO    |\n| wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_log            | NO      | NO    |\n| wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_binlog_end_pos | NO      | NO    |\n| wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_sync           | NO      | NO    |\n+---------------------------------------------------------+---------+-------+\n10 rows in set (0.00 sec)\n```", "```go\nmysql> SHOW TABLES LIKE '%current%';\n+------------------------------------------+\n| Tables_in_performance_schema (%current%) |\n+------------------------------------------+\n| events_stages_current                    |\n| events_statements_current                |\n| events_transactions_current              |\n| events_waits_current                     |\n+------------------------------------------+\n4 rows in set (0.00 sec)\n\nmysql> SHOW TABLES LIKE '%history%';\n+------------------------------------------+\n| Tables_in_performance_schema (%history%) |\n+------------------------------------------+\n| events_stages_history                    |\n| events_stages_history_long               |\n| events_statements_history                |\n| events_statements_history_long           |\n| events_transactions_history              |\n| events_transactions_history_long         |\n| events_waits_history                     |\n| events_waits_history_long                |\n+------------------------------------------+\n8 rows in set (0.00 sec)\n\nmysql> SHOW TABLES LIKE '%summary%';\n+------------------------------------------------------+\n| Tables_in_performance_schema (%summary%)             |\n+------------------------------------------------------+\n| events_errors_summary_by_account_by_error            |\n| events_errors_summary_by_host_by_error               |\n~\n~\n| table_io_waits_summary_by_table                      |\n| table_lock_waits_summary_by_table                    |\n+------------------------------------------------------+\n41 rows in set (0.00 sec)\n\nmysql> SHOW TABLES LIKE '%setup%';\n+----------------------------------------+\n| Tables_in_performance_schema (%setup%) |\n+----------------------------------------+\n| setup_actors                           |\n| setup_consumers                        |\n| setup_instruments                      |\n| setup_objects                          |\n| setup_threads                          |\n| setup_timers                           |\n+----------------------------------------+\n6 rows in set (0.00 sec)\n```", "```go\nmysql> SELECT EVENT_NAME, COUNT_STAR from file_summary_by_event_name ORDER BY count_star DESC LIMIT 10;\n+-------------------------------------------------+------------+\n| EVENT_NAME                                      | COUNT_STAR |\n+-------------------------------------------------+------------+\n| wait/io/file/innodb/innodb_data_file            |      35014 |\n| wait/io/file/sql/io_cache                       |      13454 |\n| wait/io/file/sql/binlog                         |       8785 |\n| wait/io/file/innodb/innodb_log_file             |       2070 |\n| wait/io/file/sql/query_log                      |       1257 |\n| wait/io/file/innodb/innodb_temp_file            |         96 |\n```", "```go\n| wait/io/file/innodb/innodb_tablespace_open_file |         88 |\n| wait/io/file/sql/casetest                       |         15 |\n| wait/io/file/sql/binlog_index                   |         14 |\n| wait/io/file/mysys/cnf                          |          5 |\n+-------------------------------------------------+------------+\n10 rows in set (0.00 sec)\n```", "```go\nmysql> SELECT EVENT_NAME, SUM_TIMER_WRITE FROM file_summary_by_event_name ORDER BY SUM_TIMER_WRITE DESC LIMIT 10;\n+-------------------------------------------------+-----------------+\n| EVENT_NAME                                      | SUM_TIMER_WRITE |\n+-------------------------------------------------+-----------------+\n| wait/io/file/innodb/innodb_data_file            |    410909759715 |\n| wait/io/file/innodb/innodb_log_file             |    366157166830 |\n| wait/io/file/sql/io_cache                       |    341899621700 |\n| wait/io/file/sql/query_log                      |    203975010330 |\n| wait/io/file/sql/binlog                         |     85261691515 |\n| wait/io/file/innodb/innodb_temp_file            |     25291378385 |\n| wait/io/file/innodb/innodb_tablespace_open_file |       674778195 |\n| wait/io/file/sql/SDI                            |        18981690 |\n| wait/io/file/sql/pid                            |        10233405 |\n| wait/io/file/archive/FRM                        |               0 |\n+-------------------------------------------------+-----------------+\n```", "```go\nmysql> SELECT SCHEMA_NAME, digest, digest_text, round(sum_timer_wait/ 1000000000000, 6) as avg_time, count_star FROM performance_schema.events_statements_summary_by_digest ORDER BY sum_timer_wait DESC LIMIT 1\\G\n*************************** 1\\. row ***************************\nSCHEMA_NAME: NULL\n     digest: 719f469393f90c27d84681a1d0ab3c19\ndigest_text: SELECT `sleep` (?) \n   avg_time: 60.000442\n count_star: 1\n1 row in set (0.00 sec)\n```", "```go\nmysql> SELECT SCHEMA_NAME, digest, digest_text, round(sum_timer_wait/ 1000000000000, 6) as avg_time, count_star FROM performance_schema.events_statements_summary_by_digest ORDER BY count_star DESC LIMIT 1\\G\n*************************** 1\\. row ***************************\nSCHEMA_NAME: employees\n     digest: f5296ec6642c0fb977b448b350a2ba9b\ndigest_text: INSERT INTO `salaries` VALUES (...) /* , ... */ \n   avg_time: 32.736742\n count_star: 114\n1 row in set (0.01 sec)\n```", "```go\nmysql> SELECT * FROM events_statements_summary_by_digest WHERE DIGEST_TEXT LIKE '%SELECT%employee%ORDER%' LIMIT 1\\G\n*************************** 1\\. row ***************************\n                SCHEMA_NAME: employees\n                     DIGEST: d3b56f71f362f1bf6b067bfa358c04ab\n                DIGEST_TEXT: EXPLAIN SELECT /*+ SET_VAR ( `sort_buffer_size` = ? ) */ `e` . `emp_no` , `salary` FROM `salaries` `s` JOIN `employees` `e` ON `s` . `emp_no` = `e` . `emp_no` WHERE ( `first_name` = ? OR `last_name` = ? ) ORDER BY `from_date` DESC \n                 COUNT_STAR: 1\n             SUM_TIMER_WAIT: 643710000\n             MIN_TIMER_WAIT: 643710000\n             AVG_TIMER_WAIT: 643710000\n             MAX_TIMER_WAIT: 643710000\n              SUM_LOCK_TIME: 288000000\n                 SUM_ERRORS: 0\n               SUM_WARNINGS: 1\n          SUM_ROWS_AFFECTED: 0\n              SUM_ROWS_SENT: 2\n          SUM_ROWS_EXAMINED: 0\nSUM_CREATED_TMP_DISK_TABLES: 0\n     SUM_CREATED_TMP_TABLES: 0\n       SUM_SELECT_FULL_JOIN: 0\n~\n                 FIRST_SEEN: 2017-11-23 08:40:28.565406\n                  LAST_SEEN: 2017-11-23 08:40:28.565406\n                QUANTILE_95: 301995172\n                QUANTILE_99: 301995172\n               QUANTILE_999: 301995172\n QUERY_SAMPLE_TEXT: EXPLAIN SELECT /*+ SET_VAR(sort_buffer_size = 16M) */ e.emp_no, salary FROM salaries s JOIN employees e ON s.emp_no=e.emp_no WHERE (first_name='Adam' OR last_name='Adam') ORDER BY from_date DESC\n          QUERY_SAMPLE_SEEN: 2017-11-23 08:40:28.565406\n    QUERY_SAMPLE_TIMER_WAIT: 643710000\n```", "```go\nmysql> CALL sys.ps_setup_enable_instrument('statement');\n+------------------------+\n| summary                |\n+------------------------+\n| Enabled 22 instruments |\n+------------------------+\n1 row in set (0.08 sec)\n\nQuery OK, 0 rows affected (0.08 sec)\n```", "```go\nmysql> CALL sys.ps_setup_reset_to_default(TRUE)\\G\n*************************** 1\\. row ***************************\nstatus: Resetting: setup_actors\nDELETE FROM performance_schema.setup_actors WHERE NOT (HOST = '%' AND USER = '%' AND `ROLE` = '%')\n1 row in set (0.01 sec)\n~\n*************************** 1\\. row ***************************\nstatus: Resetting: threads\nUPDATE performance_schema.threads SET INSTRUMENTED = 'YES'\n1 row in set (0.03 sec)\n\nQuery OK, 0 rows affected (0.03 sec)\n```", "```go\nmysql> SELECT statement, total, total_latency, rows_sent, rows_examined, rows_affected, full_scans FROM sys.host_summary_by_statement_type WHERE host='localhost' ORDER BY total DESC LIMIT 5;\n+------------+--------+---------------+-----------+---------------+---------------+------------+\n| statement  | total  | total_latency | rows_sent | rows_examined | rows_affected | full_scans |\n+------------+--------+---------------+-----------+---------------+---------------+------------+\n| select     | 208526 | 1.14 d        |  27484761 |     799220003 |             0 |       9265 |\n| Quit       | 199551 | 4.76 s        |         0 |             0 |             0 |          0 |\n| insert     |   9848 | 12.75 m       |         0 |             0 |       5075058 |          0 |\n| Ping       |   4674 | 278.76 ms     |         0 |             0 |             0 |          0 |\n| set_option |   2552 | 634.76 ms     |         0 |             0 |             0 |          0 |\n+------------+--------+---------------+-----------+---------------+---------------+------------+\n6 rows in set (0.00 sec)\n```", "```go\nmysql> SELECT statement, total, total_latency, rows_sent, rows_examined, rows_affected, full_scans FROM sys.user_summary_by_statement_type ORDER BY total DESC LIMIT 5;\n+------------+--------+---------------+-----------+---------------+---------------+------------+\n| statement  | total  | total_latency | rows_sent | rows_examined | rows_affected | full_scans |\n+------------+--------+---------------+-----------+---------------+---------------+------------+\n| select     | 208535 | 1.14 d        |  27485256 |     799246972 |             0 |       9273 |\n| Quit       | 199551 | 4.76 s        |         0 |             0 |             0 |          0 |\n| insert     |   9848 | 12.75 m       |         0 |             0 |       5075058 |          0 |\n| Ping       |   4674 | 278.76 ms     |         0 |             0 |             0 |          0 |\n| set_option |   2552 | 634.76 ms     |         0 |             0 |             0 |          0 |\n+------------+--------+---------------+-----------+---------------+---------------+------------+\n5 rows in set (0.01 sec)\n```", "```go\nmysql> SELECT * FROM sys.schema_redundant_indexes WHERE table_name='employees'\\G\n*************************** 1\\. row ***************************\n              table_schema: employees\n                table_name: employees\n      redundant_index_name: first_name\n   redundant_index_columns: first_name\nredundant_index_non_unique: 1\n       dominant_index_name: first_name_emp_no\n    dominant_index_columns: first_name,emp_no\n dominant_index_non_unique: 1\n            subpart_exists: 0\n            sql_drop_index: ALTER TABLE `employees`.`employees` DROP INDEX `first_name`\n~\n*************************** 8\\. row ***************************\n              table_schema: employees\n                table_name: employees\n      redundant_index_name: last_name_2\n   redundant_index_columns: last_name\nredundant_index_non_unique: 1\n       dominant_index_name: last_name\n    dominant_index_columns: last_name\n dominant_index_non_unique: 1\n            subpart_exists: 1\n            sql_drop_index: ALTER TABLE `employees`.`employees` DROP INDEX `last_name_2`\n8 rows in set (0.00 sec)\n```", "```go\nmysql> SELECT * FROM sys.schema_unused_indexes WHERE object_schema='employees';\n+---------------+----------------+-------------------+\n| object_schema | object_name    | index_name        |\n+---------------+----------------+-------------------+\n| employees     | departments    | dept_name         |\n| employees     | dept_emp       | dept_no           |\n| employees     | dept_manager   | dept_no           |\n| employees     | employees      | name              |\n| employees     | employees1     | last_name         |\n| employees     | employees1     | full_name         |\n| employees     | employees1     | full_name_desc    |\n| employees     | employees1     | first_name        |\n| employees     | employees1     | full_name_1       |\n| employees     | employees1     | first_name_emp_no |\n| employees     | employees1     | last_name_2       |\n| employees     | employees_mgr  | manager_id        |\n| employees     | employees_test | name              |\n| employees     | emp_details    | city              |\n+---------------+----------------+-------------------+\n14 rows in set (0.00 sec)\n```", "```go\nmysql> SELECT * FROM sys.host_summary ORDER BY statements DESC LIMIT 1\\G\n*************************** 1\\. row ***************************\n                  host: localhost\n            statements: 431214\n     statement_latency: 1.15 d\n statement_avg_latency: 231.14 ms\n           table_scans: 9424\n              file_ios: 671972\n       file_io_latency: 4.13 m\n   current_connections: 3\n     total_connections: 200193\n          unique_users: 1\n        current_memory: 0 bytes\ntotal_memory_allocated: 0 bytes\n1 row in set (0.02 sec)\n```", "```go\nmysql> SELECT * FROM sys.schema_table_statistics LIMIT 1\\G\n*************************** 1\\. row ***************************\n     table_schema: employees\n       table_name: employees\n    total_latency: 14.03 h\n     rows_fetched: 731760045\n    fetch_latency: 14.03 h\n    rows_inserted: 300025\n   insert_latency: 2.81 s\n     rows_updated: 0\n   update_latency: 0 ps\n     rows_deleted: 0\n   delete_latency: 0 ps\n io_read_requests: NULL\n          io_read: NULL\n  io_read_latency: NULL\nio_write_requests: NULL\n         io_write: NULL\n io_write_latency: NULL\n io_misc_requests: NULL\n  io_misc_latency: NULL\n1 row in set (0.01 sec)\n```", "```go\nmysql> SELECT * FROM sys.schema_table_statistics_with_buffer LIMIT 1\\G\n*************************** 1\\. row ***************************\n              table_schema: employees\n                table_name: employees\n              rows_fetched: 731760045\n             fetch_latency: 14.03 h\n             rows_inserted: 300025\n            insert_latency: 2.81 s\n              rows_updated: 0\n            update_latency: 0 ps\n              rows_deleted: 0\n            delete_latency: 0 ps\n~\n   innodb_buffer_allocated: 6.80 MiB\n        innodb_buffer_data: 6.23 MiB\n        innodb_buffer_free: 582.77 KiB\n       innodb_buffer_pages: 435\ninnodb_buffer_pages_hashed: 0\n   innodb_buffer_pages_old: 435\n innodb_buffer_rows_cached: 147734\n1 row in set (0.13 sec)\n```", "```go\nmysql> SELECT * FROM sys.statement_analysis ORDER BY exec_count DESC LIMIT 1\\G\n*************************** 1\\. row ***************************\n            query: SELECT `e` . `emp_no` , `salar ... emp_no` WHERE `from_date` = ? \n               db: employees\n        full_scan: \n       exec_count: 159997\n        err_count: 0\n       warn_count: 0\n    total_latency: 1.98 h\n      max_latency: 661.58 ms\n      avg_latency: 44.54 ms\n     lock_latency: 1.28 m\n        rows_sent: 14400270\n    rows_sent_avg: 90\n    rows_examined: 28800540\nrows_examined_avg: 180\n    rows_affected: 0\nrows_affected_avg: 0\n       tmp_tables: 0\n  tmp_disk_tables: 0\n      rows_sorted: 0\nsort_merge_passes: 0\n           digest: 94c925c0f00e06566d0447822066b1fe\n       first_seen: 2017-11-23 05:39:09\n        last_seen: 2017-11-23 05:45:45\n1 row in set (0.01 sec)\n```", "```go\nmysql> SELECT * FROM sys.statement_analysis ORDER BY tmp_disk_tables DESC LIMIT 1\\G\n*************************** 1\\. row ***************************\n            query: SELECT `cat` . `name` AS `TABL ... SE `col` . `type` WHEN ? THEN \n               db: employees\n        full_scan: \n       exec_count: 195\n        err_count: 0\n       warn_count: 0\n    total_latency: 249.55 ms\n      max_latency: 2.84 ms\n      avg_latency: 1.28 ms\n     lock_latency: 97.95 ms\n        rows_sent: 732\n    rows_sent_avg: 4\n    rows_examined: 4245\nrows_examined_avg: 22\n    rows_affected: 0\nrows_affected_avg: 0\n       tmp_tables: 195\n  tmp_disk_tables: 195\n      rows_sorted: 732\nsort_merge_passes: 0\n           digest: 8e8c46a210908a2efc2f1e96dd998130\n       first_seen: 2017-11-19 05:27:24\n        last_seen: 2017-11-20 17:24:34\n1 row in set (0.01 sec)\n```"]